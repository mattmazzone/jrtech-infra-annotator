var pu=s=>{throw TypeError(s)};var Sa=(s,e,t)=>e.has(s)||pu("Cannot "+t);var Ye=(s,e,t)=>(Sa(s,e,"read from private field"),t?t.call(s):e.get(s)),vn=(s,e,t)=>e.has(s)?pu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),Ot=(s,e,t,n)=>(Sa(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),bn=(s,e,t)=>(Sa(s,e,"access private method"),t);var gu=(s,e,t,n)=>({set _(i){Ot(s,e,i,t)},get _(){return Ye(s,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ac(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const Ve={},ai=[],Pn=()=>{},om=()=>!1,Bo=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),lc=s=>s.startsWith("onUpdate:"),_t=Object.assign,cc=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},am=Object.prototype.hasOwnProperty,Ne=(s,e)=>am.call(s,e),_e=Array.isArray,li=s=>No(s)==="[object Map]",kh=s=>No(s)==="[object Set]",Ae=s=>typeof s=="function",tt=s=>typeof s=="string",Jn=s=>typeof s=="symbol",Ke=s=>s!==null&&typeof s=="object",Mh=s=>(Ke(s)||Ae(s))&&Ae(s.then)&&Ae(s.catch),Rh=Object.prototype.toString,No=s=>Rh.call(s),lm=s=>No(s).slice(8,-1),Dh=s=>No(s)==="[object Object]",uc=s=>tt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,zi=ac(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$o=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},cm=/-(\w)/g,$t=$o(s=>s.replace(cm,(e,t)=>t?t.toUpperCase():"")),um=/\B([A-Z])/g,ws=$o(s=>s.replace(um,"-$1").toLowerCase()),qo=$o(s=>s.charAt(0).toUpperCase()+s.slice(1)),Wi=$o(s=>s?`on${qo(s)}`:""),hs=(s,e)=>!Object.is(s,e),oo=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},al=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},ll=s=>{const e=parseFloat(s);return isNaN(e)?s:e};let mu;const Ho=()=>mu||(mu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zn(s){if(_e(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],i=tt(n)?pm(n):Zn(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(tt(s)||Ke(s))return s}const dm=/;(?![^(]*\))/g,hm=/:([^]+)/,fm=/\/\*[^]*?\*\//g;function pm(s){const e={};return s.replace(fm,"").split(dm).forEach(t=>{if(t){const n=t.split(hm);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function qt(s){let e="";if(tt(s))e=s;else if(_e(s))for(let t=0;t<s.length;t++){const n=qt(s[t]);n&&(e+=n+" ")}else if(Ke(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}function un(s){if(!s)return null;let{class:e,style:t}=s;return e&&!tt(e)&&(s.class=qt(e)),t&&(s.style=Zn(t)),s}const gm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mm=ac(gm);function Ih(s){return!!s||s===""}const Oh=s=>!!(s&&s.__v_isRef===!0),nn=s=>tt(s)?s:s==null?"":_e(s)||Ke(s)&&(s.toString===Rh||!Ae(s.toString))?Oh(s)?nn(s.value):JSON.stringify(s,Lh,2):String(s),Lh=(s,e)=>Oh(e)?Lh(s,e.value):li(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],r)=>(t[Ca(n,r)+" =>"]=i,t),{})}:kh(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ca(t))}:Jn(e)?Ca(e):Ke(e)&&!_e(e)&&!Dh(e)?String(e):e,Ca=(s,e="")=>{var t;return Jn(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vt;class Fh{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=vt,!e&&vt&&(this.index=(vt.scopes||(vt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=vt;try{return vt=this,e()}finally{vt=t}}}on(){++this._on===1&&(this.prevScope=vt,vt=this)}off(){this._on>0&&--this._on===0&&(vt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function jo(s){return new Fh(s)}function Ar(){return vt}function Uo(s,e=!1){vt&&vt.cleanups.push(s)}let Ge;const Ea=new WeakSet;class Bh{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,vt&&vt.active&&vt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ea.has(this)&&(Ea.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||$h(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,yu(this),qh(this);const e=Ge,t=ln;Ge=this,ln=!0;try{return this.fn()}finally{Hh(this),Ge=e,ln=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)fc(e);this.deps=this.depsTail=void 0,yu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ea.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){cl(this)&&this.run()}get dirty(){return cl(this)}}let Nh=0,Gi,Ki;function $h(s,e=!1){if(s.flags|=8,e){s.next=Ki,Ki=s;return}s.next=Gi,Gi=s}function dc(){Nh++}function hc(){if(--Nh>0)return;if(Ki){let e=Ki;for(Ki=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;Gi;){let e=Gi;for(Gi=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){s||(s=n)}e=t}}if(s)throw s}function qh(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Hh(s){let e,t=s.depsTail,n=t;for(;n;){const i=n.prevDep;n.version===-1?(n===t&&(t=i),fc(n),ym(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}s.deps=e,s.depsTail=t}function cl(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(jh(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function jh(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===ir)||(s.globalVersion=ir,!s.isSSR&&s.flags&128&&(!s.deps&&!s._dirty||!cl(s))))return;s.flags|=2;const e=s.dep,t=Ge,n=ln;Ge=s,ln=!0;try{qh(s);const i=s.fn(s._value);(e.version===0||hs(i,s._value))&&(s.flags|=128,s._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ge=t,ln=n,Hh(s),s.flags&=-3}}function fc(s,e=!1){const{dep:t,prevSub:n,nextSub:i}=s;if(n&&(n.nextSub=i,s.prevSub=void 0),i&&(i.prevSub=n,s.nextSub=void 0),t.subs===s&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)fc(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function ym(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let ln=!0;const Uh=[];function Gn(){Uh.push(ln),ln=!1}function Kn(){const s=Uh.pop();ln=s===void 0?!0:s}function yu(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=Ge;Ge=void 0;try{e()}finally{Ge=t}}}let ir=0;class vm{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Vo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Ge||!ln||Ge===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Ge)t=this.activeLink=new vm(Ge,this),Ge.deps?(t.prevDep=Ge.depsTail,Ge.depsTail.nextDep=t,Ge.depsTail=t):Ge.deps=Ge.depsTail=t,Vh(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Ge.depsTail,t.nextDep=void 0,Ge.depsTail.nextDep=t,Ge.depsTail=t,Ge.deps===t&&(Ge.deps=n)}return t}trigger(e){this.version++,ir++,this.notify(e)}notify(e){dc();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{hc()}}}function Vh(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Vh(n)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const yo=new WeakMap,Rs=Symbol(""),ul=Symbol(""),rr=Symbol("");function bt(s,e,t){if(ln&&Ge){let n=yo.get(s);n||yo.set(s,n=new Map);let i=n.get(t);i||(n.set(t,i=new Vo),i.map=n,i.key=t),i.track()}}function Un(s,e,t,n,i,r){const o=yo.get(s);if(!o){ir++;return}const a=l=>{l&&l.trigger()};if(dc(),e==="clear")o.forEach(a);else{const l=_e(s),c=l&&uc(t);if(l&&t==="length"){const u=Number(n);o.forEach((d,h)=>{(h==="length"||h===rr||!Jn(h)&&h>=u)&&a(d)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(rr)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Rs)),li(s)&&a(o.get(ul)));break;case"delete":l||(a(o.get(Rs)),li(s)&&a(o.get(ul)));break;case"set":li(s)&&a(o.get(Rs));break}}hc()}function bm(s,e){const t=yo.get(s);return t&&t.get(e)}function zs(s){const e=Le(s);return e===s?e:(bt(e,"iterate",rr),sn(s)?e:e.map(gt))}function zo(s){return bt(s=Le(s),"iterate",rr),s}const wm={__proto__:null,[Symbol.iterator](){return Ta(this,Symbol.iterator,gt)},concat(...s){return zs(this).concat(...s.map(e=>_e(e)?zs(e):e))},entries(){return Ta(this,"entries",s=>(s[1]=gt(s[1]),s))},every(s,e){return Ln(this,"every",s,e,void 0,arguments)},filter(s,e){return Ln(this,"filter",s,e,t=>t.map(gt),arguments)},find(s,e){return Ln(this,"find",s,e,gt,arguments)},findIndex(s,e){return Ln(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return Ln(this,"findLast",s,e,gt,arguments)},findLastIndex(s,e){return Ln(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return Ln(this,"forEach",s,e,void 0,arguments)},includes(...s){return Pa(this,"includes",s)},indexOf(...s){return Pa(this,"indexOf",s)},join(s){return zs(this).join(s)},lastIndexOf(...s){return Pa(this,"lastIndexOf",s)},map(s,e){return Ln(this,"map",s,e,void 0,arguments)},pop(){return ki(this,"pop")},push(...s){return ki(this,"push",s)},reduce(s,...e){return vu(this,"reduce",s,e)},reduceRight(s,...e){return vu(this,"reduceRight",s,e)},shift(){return ki(this,"shift")},some(s,e){return Ln(this,"some",s,e,void 0,arguments)},splice(...s){return ki(this,"splice",s)},toReversed(){return zs(this).toReversed()},toSorted(s){return zs(this).toSorted(s)},toSpliced(...s){return zs(this).toSpliced(...s)},unshift(...s){return ki(this,"unshift",s)},values(){return Ta(this,"values",gt)}};function Ta(s,e,t){const n=zo(s),i=n[e]();return n!==s&&!sn(s)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=t(r.value)),r}),i}const _m=Array.prototype;function Ln(s,e,t,n,i,r){const o=zo(s),a=o!==s&&!sn(s),l=o[e];if(l!==_m[e]){const d=l.apply(s,r);return a?gt(d):d}let c=t;o!==s&&(a?c=function(d,h){return t.call(this,gt(d),h,s)}:t.length>2&&(c=function(d,h){return t.call(this,d,h,s)}));const u=l.call(o,c,n);return a&&i?i(u):u}function vu(s,e,t,n){const i=zo(s);let r=t;return i!==s&&(sn(s)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,s)}):r=function(o,a,l){return t.call(this,o,gt(a),l,s)}),i[e](r,...n)}function Pa(s,e,t){const n=Le(s);bt(n,"iterate",rr);const i=n[e](...t);return(i===-1||i===!1)&&pc(t[0])?(t[0]=Le(t[0]),n[e](...t)):i}function ki(s,e,t=[]){Gn(),dc();const n=Le(s)[e].apply(s,t);return hc(),Kn(),n}const Am=ac("__proto__,__v_isRef,__isVue"),zh=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Jn));function xm(s){Jn(s)||(s=String(s));const e=Le(this);return bt(e,"has",s),e.hasOwnProperty(s)}class Wh{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return n===(i?r?Zh:Jh:r?Yh:Xh).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=_e(e);if(!i){let l;if(o&&(l=wm[t]))return l;if(t==="hasOwnProperty")return xm}const a=Reflect.get(e,t,Ue(e)?e:n);return(Jn(t)?zh.has(t):Am(t))||(i||bt(e,"get",t),r)?a:Ue(a)?o&&uc(t)?a:a.value:Ke(a)?i?xi(a):dt(a):a}}class Gh extends Wh{constructor(e=!1){super(!1,e)}set(e,t,n,i){let r=e[t];if(!this._isShallow){const l=ps(r);if(!sn(n)&&!ps(n)&&(r=Le(r),n=Le(n)),!_e(e)&&Ue(r)&&!Ue(n))return l?!1:(r.value=n,!0)}const o=_e(e)&&uc(t)?Number(t)<e.length:Ne(e,t),a=Reflect.set(e,t,n,Ue(e)?e:i);return e===Le(i)&&(o?hs(n,r)&&Un(e,"set",t,n):Un(e,"add",t,n)),a}deleteProperty(e,t){const n=Ne(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Un(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!Jn(t)||!zh.has(t))&&bt(e,"has",t),n}ownKeys(e){return bt(e,"iterate",_e(e)?"length":Rs),Reflect.ownKeys(e)}}class Kh extends Wh{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Sm=new Gh,Cm=new Kh,Em=new Gh(!0),Tm=new Kh(!0),dl=s=>s,Br=s=>Reflect.getPrototypeOf(s);function Pm(s,e,t){return function(...n){const i=this.__v_raw,r=Le(i),o=li(r),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,c=i[s](...n),u=t?dl:e?vo:gt;return!e&&bt(r,"iterate",l?ul:Rs),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Nr(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function km(s,e){const t={get(i){const r=this.__v_raw,o=Le(r),a=Le(i);s||(hs(i,a)&&bt(o,"get",i),bt(o,"get",a));const{has:l}=Br(o),c=e?dl:s?vo:gt;if(l.call(o,i))return c(r.get(i));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!s&&bt(Le(i),"iterate",Rs),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Le(r),a=Le(i);return s||(hs(i,a)&&bt(o,"has",i),bt(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=Le(a),c=e?dl:s?vo:gt;return!s&&bt(l,"iterate",Rs),a.forEach((u,d)=>i.call(r,c(u),c(d),o))}};return _t(t,s?{add:Nr("add"),set:Nr("set"),delete:Nr("delete"),clear:Nr("clear")}:{add(i){!e&&!sn(i)&&!ps(i)&&(i=Le(i));const r=Le(this);return Br(r).has.call(r,i)||(r.add(i),Un(r,"add",i,i)),this},set(i,r){!e&&!sn(r)&&!ps(r)&&(r=Le(r));const o=Le(this),{has:a,get:l}=Br(o);let c=a.call(o,i);c||(i=Le(i),c=a.call(o,i));const u=l.call(o,i);return o.set(i,r),c?hs(r,u)&&Un(o,"set",i,r):Un(o,"add",i,r),this},delete(i){const r=Le(this),{has:o,get:a}=Br(r);let l=o.call(r,i);l||(i=Le(i),l=o.call(r,i)),a&&a.call(r,i);const c=r.delete(i);return l&&Un(r,"delete",i,void 0),c},clear(){const i=Le(this),r=i.size!==0,o=i.clear();return r&&Un(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Pm(i,s,e)}),t}function Wo(s,e){const t=km(s,e);return(n,i,r)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?n:Reflect.get(Ne(t,i)&&i in n?t:n,i,r)}const Mm={get:Wo(!1,!1)},Rm={get:Wo(!1,!0)},Dm={get:Wo(!0,!1)},Im={get:Wo(!0,!0)},Xh=new WeakMap,Yh=new WeakMap,Jh=new WeakMap,Zh=new WeakMap;function Om(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lm(s){return s.__v_skip||!Object.isExtensible(s)?0:Om(lm(s))}function dt(s){return ps(s)?s:Go(s,!1,Sm,Mm,Xh)}function Qh(s){return Go(s,!1,Em,Rm,Yh)}function xi(s){return Go(s,!0,Cm,Dm,Jh)}function Ws(s){return Go(s,!0,Tm,Im,Zh)}function Go(s,e,t,n,i){if(!Ke(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=Lm(s);if(r===0)return s;const o=i.get(s);if(o)return o;const a=new Proxy(s,r===2?n:t);return i.set(s,a),a}function zn(s){return ps(s)?zn(s.__v_raw):!!(s&&s.__v_isReactive)}function ps(s){return!!(s&&s.__v_isReadonly)}function sn(s){return!!(s&&s.__v_isShallow)}function pc(s){return s?!!s.__v_raw:!1}function Le(s){const e=s&&s.__v_raw;return e?Le(e):s}function Ko(s){return!Ne(s,"__v_skip")&&Object.isExtensible(s)&&al(s,"__v_skip",!0),s}const gt=s=>Ke(s)?dt(s):s,vo=s=>Ke(s)?xi(s):s;function Ue(s){return s?s.__v_isRef===!0:!1}function Q(s){return ef(s,!1)}function cn(s){return ef(s,!0)}function ef(s,e){return Ue(s)?s:new Fm(s,e)}class Fm{constructor(e,t){this.dep=new Vo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Le(e),this._value=t?e:gt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||sn(e)||ps(e);e=n?e:Le(e),hs(e,t)&&(this._rawValue=e,this._value=n?e:gt(e),this.dep.trigger())}}function v(s){return Ue(s)?s.value:s}function Ze(s){return Ae(s)?s():v(s)}const Bm={get:(s,e,t)=>e==="__v_raw"?s:v(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const i=s[e];return Ue(i)&&!Ue(t)?(i.value=t,!0):Reflect.set(s,e,t,n)}};function tf(s){return zn(s)?s:new Proxy(s,Bm)}class Nm{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Vo,{get:n,set:i}=e(t.track.bind(t),t.trigger.bind(t));this._get=n,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function nf(s){return new Nm(s)}function rn(s){const e=_e(s)?new Array(s.length):{};for(const t in s)e[t]=sf(s,t);return e}class $m{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return bm(Le(this._object),this._key)}}class qm{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function gc(s,e,t){return Ue(s)?s:Ae(s)?new qm(s):Ke(s)&&arguments.length>1?sf(s,e,t):Q(s)}function sf(s,e,t){const n=s[e];return Ue(n)?n:new $m(s,e,t)}class Hm{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Vo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ir-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Ge!==this)return $h(this,!0),!0}get value(){const e=this.dep.track();return jh(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function jm(s,e,t=!1){let n,i;return Ae(s)?n=s:(n=s.get,i=s.set),new Hm(n,i,t)}const $r={},bo=new WeakMap;let Es;function Um(s,e=!1,t=Es){if(t){let n=bo.get(t);n||bo.set(t,n=[]),n.push(s)}}function Vm(s,e,t=Ve){const{immediate:n,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=t,c=A=>i?A:sn(A)||i===!1||i===0?Vn(A,1):Vn(A);let u,d,h,f,p=!1,g=!1;if(Ue(s)?(d=()=>s.value,p=sn(s)):zn(s)?(d=()=>c(s),p=!0):_e(s)?(g=!0,p=s.some(A=>zn(A)||sn(A)),d=()=>s.map(A=>{if(Ue(A))return A.value;if(zn(A))return c(A);if(Ae(A))return l?l(A,2):A()})):Ae(s)?e?d=l?()=>l(s,2):s:d=()=>{if(h){Gn();try{h()}finally{Kn()}}const A=Es;Es=u;try{return l?l(s,3,[f]):s(f)}finally{Es=A}}:d=Pn,e&&i){const A=d,S=i===!0?1/0:i;d=()=>Vn(A(),S)}const m=Ar(),y=()=>{u.stop(),m&&m.active&&cc(m.effects,u)};if(r&&e){const A=e;e=(...S)=>{A(...S),y()}}let _=g?new Array(s.length).fill($r):$r;const w=A=>{if(!(!(u.flags&1)||!u.dirty&&!A))if(e){const S=u.run();if(i||p||(g?S.some((b,x)=>hs(b,_[x])):hs(S,_))){h&&h();const b=Es;Es=u;try{const x=[S,_===$r?void 0:g&&_[0]===$r?[]:_,f];_=S,l?l(e,3,x):e(...x)}finally{Es=b}}}else u.run()};return a&&a(w),u=new Bh(d),u.scheduler=o?()=>o(w,!1):w,f=A=>Um(A,!1,u),h=u.onStop=()=>{const A=bo.get(u);if(A){if(l)l(A,4);else for(const S of A)S();bo.delete(u)}},e?n?w(!0):_=u.run():o?o(w.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function Vn(s,e=1/0,t){if(e<=0||!Ke(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,Ue(s))Vn(s.value,e,t);else if(_e(s))for(let n=0;n<s.length;n++)Vn(s[n],e,t);else if(kh(s)||li(s))s.forEach(n=>{Vn(n,e,t)});else if(Dh(s)){for(const n in s)Vn(s[n],e,t);for(const n of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,n)&&Vn(s[n],e,t)}return s}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xr(s,e,t,n){try{return n?s(...n):s()}catch(i){Xo(i,e,t)}}function Mn(s,e,t,n){if(Ae(s)){const i=xr(s,e,t,n);return i&&Mh(i)&&i.catch(r=>{Xo(r,e,t)}),i}if(_e(s)){const i=[];for(let r=0;r<s.length;r++)i.push(Mn(s[r],e,t,n));return i}}function Xo(s,e,t,n=!0){const i=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ve;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](s,l,c)===!1)return}a=a.parent}if(r){Gn(),xr(r,null,10,[s,l,c]),Kn();return}}zm(s,t,i,n,o)}function zm(s,e,t,n=!0,i=!1){if(i)throw s;console.error(s)}const Pt=[];let xn=-1;const ci=[];let os=null,Js=0;const rf=Promise.resolve();let wo=null;function st(s){const e=wo||rf;return s?e.then(this?s.bind(this):s):e}function Wm(s){let e=xn+1,t=Pt.length;for(;e<t;){const n=e+t>>>1,i=Pt[n],r=or(i);r<s||r===s&&i.flags&2?e=n+1:t=n}return e}function mc(s){if(!(s.flags&1)){const e=or(s),t=Pt[Pt.length-1];!t||!(s.flags&2)&&e>=or(t)?Pt.push(s):Pt.splice(Wm(e),0,s),s.flags|=1,of()}}function of(){wo||(wo=rf.then(lf))}function Gm(s){_e(s)?ci.push(...s):os&&s.id===-1?os.splice(Js+1,0,s):s.flags&1||(ci.push(s),s.flags|=1),of()}function bu(s,e,t=xn+1){for(;t<Pt.length;t++){const n=Pt[t];if(n&&n.flags&2){if(s&&n.id!==s.uid)continue;Pt.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function af(s){if(ci.length){const e=[...new Set(ci)].sort((t,n)=>or(t)-or(n));if(ci.length=0,os){os.push(...e);return}for(os=e,Js=0;Js<os.length;Js++){const t=os[Js];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}os=null,Js=0}}const or=s=>s.id==null?s.flags&2?-1:1/0:s.id;function lf(s){try{for(xn=0;xn<Pt.length;xn++){const e=Pt[xn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),xr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;xn<Pt.length;xn++){const e=Pt[xn];e&&(e.flags&=-2)}xn=-1,Pt.length=0,af(),wo=null,(Pt.length||ci.length)&&lf()}}let mt=null,cf=null;function _o(s){const e=mt;return mt=s,cf=s&&s.type.__scopeId||null,e}function I(s,e=mt,t){if(!e||s._n)return s;const n=(...i)=>{n._d&&Ru(-1);const r=_o(e);let o;try{o=s(...i)}finally{_o(r),n._d&&Ru(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function hl(s,e){if(mt===null)return s;const t=ea(mt),n=s.dirs||(s.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,l=Ve]=e[i];r&&(Ae(r)&&(r={mounted:r,updated:r}),r.deep&&Vn(o),n.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return s}function xs(s,e,t,n){const i=s.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Gn(),Mn(l,t,8,[s.el,a,s,e]),Kn())}}const uf=Symbol("_vte"),Km=s=>s.__isTeleport,Xi=s=>s&&(s.disabled||s.disabled===""),wu=s=>s&&(s.defer||s.defer===""),_u=s=>typeof SVGElement<"u"&&s instanceof SVGElement,Au=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,fl=(s,e)=>{const t=s&&s.to;return tt(t)?e?e(t):null:t},df={name:"Teleport",__isTeleport:!0,process(s,e,t,n,i,r,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:f,querySelector:p,createText:g,createComment:m}}=c,y=Xi(e.props);let{shapeFlag:_,children:w,dynamicChildren:A}=e;if(s==null){const S=e.el=g(""),b=e.anchor=g("");f(S,t,n),f(b,t,n);const x=(C,M)=>{_&16&&(i&&i.isCE&&(i.ce._teleportTarget=C),u(w,C,M,i,r,o,a,l))},E=()=>{const C=e.target=fl(e.props,p),M=hf(C,e,g,f);C&&(o!=="svg"&&_u(C)?o="svg":o!=="mathml"&&Au(C)&&(o="mathml"),y||(x(C,M),ao(e,!1)))};y&&(x(t,b),ao(e,!0)),wu(e.props)?(e.el.__isMounted=!1,St(()=>{E(),delete e.el.__isMounted},r)):E()}else{if(wu(e.props)&&s.el.__isMounted===!1){St(()=>{df.process(s,e,t,n,i,r,o,a,l,c)},r);return}e.el=s.el,e.targetStart=s.targetStart;const S=e.anchor=s.anchor,b=e.target=s.target,x=e.targetAnchor=s.targetAnchor,E=Xi(s.props),C=E?t:b,M=E?S:x;if(o==="svg"||_u(b)?o="svg":(o==="mathml"||Au(b))&&(o="mathml"),A?(h(s.dynamicChildren,A,C,i,r,o,a),Ac(s,e,!0)):l||d(s,e,C,M,i,r,o,a,!1),y)E?e.props&&s.props&&e.props.to!==s.props.to&&(e.props.to=s.props.to):qr(e,t,S,c,1);else if((e.props&&e.props.to)!==(s.props&&s.props.to)){const O=e.target=fl(e.props,p);O&&qr(e,O,null,c,0)}else E&&qr(e,b,x,c,1);ao(e,y)}},remove(s,e,t,{um:n,o:{remove:i}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=s;if(d&&(i(c),i(u)),r&&i(l),o&16){const f=r||!Xi(h);for(let p=0;p<a.length;p++){const g=a[p];n(g,e,t,f,!!g.dynamicChildren)}}},move:qr,hydrate:Xm};function qr(s,e,t,{o:{insert:n},m:i},r=2){r===0&&n(s.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=s,d=r===2;if(d&&n(o,e,t),(!d||Xi(u))&&l&16)for(let h=0;h<c.length;h++)i(c[h],e,t,2);d&&n(a,e,t)}function Xm(s,e,t,n,i,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const h=e.target=fl(e.props,l);if(h){const f=Xi(e.props),p=h._lpa||h.firstChild;if(e.shapeFlag&16)if(f)e.anchor=d(o(s),e,a(s),t,n,i,r),e.targetStart=p,e.targetAnchor=p&&o(p);else{e.anchor=o(s);let g=p;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}g=o(g)}e.targetAnchor||hf(h,e,u,c),d(p&&o(p),e,h,t,n,i,r)}ao(e,f)}return e.anchor&&o(e.anchor)}const Ym=df;function ao(s,e){const t=s.ctx;if(t&&t.ut){let n,i;for(e?(n=s.el,i=s.anchor):(n=s.targetStart,i=s.targetAnchor);n&&n!==i;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}function hf(s,e,t,n){const i=e.targetStart=t(""),r=e.targetAnchor=t("");return i[uf]=r,s&&(n(i,s),n(r,s)),r}function yc(s,e){s.shapeFlag&6&&s.component?(s.transition=e,yc(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}/*! #__NO_SIDE_EFFECTS__ */function V(s,e){return Ae(s)?_t({name:s.name},e,{setup:s}):s}function Jm(){const s=Mt();return s?(s.appContext.config.idPrefix||"v")+"-"+s.ids[0]+s.ids[1]++:""}function ff(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function Yi(s,e,t,n,i=!1){if(_e(s)){s.forEach((p,g)=>Yi(p,e&&(_e(e)?e[g]:e),t,n,i));return}if(ui(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Yi(s,e,t,n.component.subTree);return}const r=n.shapeFlag&4?ea(n.component):n.el,o=i?null:r,{i:a,r:l}=s,c=e&&e.r,u=a.refs===Ve?a.refs={}:a.refs,d=a.setupState,h=Le(d),f=d===Ve?()=>!1:p=>Ne(h,p);if(c!=null&&c!==l&&(tt(c)?(u[c]=null,f(c)&&(d[c]=null)):Ue(c)&&(c.value=null)),Ae(l))xr(l,a,12,[o,u]);else{const p=tt(l),g=Ue(l);if(p||g){const m=()=>{if(s.f){const y=p?f(l)?d[l]:u[l]:l.value;i?_e(y)&&cc(y,r):_e(y)?y.includes(r)||y.push(r):p?(u[l]=[r],f(l)&&(d[l]=u[l])):(l.value=[r],s.k&&(u[s.k]=l.value))}else p?(u[l]=o,f(l)&&(d[l]=o)):g&&(l.value=o,s.k&&(u[s.k]=o))};o?(m.id=-1,St(m,t)):m()}}}Ho().requestIdleCallback;Ho().cancelIdleCallback;const ui=s=>!!s.type.__asyncLoader,pf=s=>s.type.__isKeepAlive;function Zm(s,e){gf(s,"a",e)}function Qm(s,e){gf(s,"da",e)}function gf(s,e,t=wt){const n=s.__wdc||(s.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return s()});if(Yo(e,n,t),t){let i=t.parent;for(;i&&i.parent;)pf(i.parent.vnode)&&ey(n,e,t,i),i=i.parent}}function ey(s,e,t,n){const i=Yo(e,s,n,!0);Ns(()=>{cc(n[e],i)},t)}function Yo(s,e,t=wt,n=!1){if(t){const i=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{Gn();const a=Cr(t),l=Mn(e,t,s,o);return a(),Kn(),l});return n?i.unshift(r):i.push(r),r}}const Qn=s=>(e,t=wt)=>{(!cr||s==="sp")&&Yo(s,(...n)=>e(...n),t)},ty=Qn("bm"),Ht=Qn("m"),ny=Qn("bu"),sy=Qn("u"),Ao=Qn("bum"),Ns=Qn("um"),iy=Qn("sp"),ry=Qn("rtg"),oy=Qn("rtc");function ay(s,e=wt){Yo("ec",s,e)}const ly="components",mf=Symbol.for("v-ndc");function vc(s){return tt(s)?cy(ly,s,!1)||s:s||mf}function cy(s,e,t=!0,n=!1){const i=mt||wt;if(i){const r=i.type;{const a=Xy(r,!1);if(a&&(a===e||a===$t(e)||a===qo($t(e))))return r}const o=xu(i[s]||r[s],e)||xu(i.appContext[s],e);return!o&&n?r:o}}function xu(s,e){return s&&(s[e]||s[$t(e)]||s[qo($t(e))])}function Sr(s,e,t,n){let i;const r=t,o=_e(s);if(o||tt(s)){const a=o&&zn(s);let l=!1,c=!1;a&&(l=!sn(s),c=ps(s),s=zo(s)),i=new Array(s.length);for(let u=0,d=s.length;u<d;u++)i[u]=e(l?c?vo(gt(s[u])):gt(s[u]):s[u],u,void 0,r)}else if(typeof s=="number"){i=new Array(s);for(let a=0;a<s;a++)i[a]=e(a+1,a,void 0,r)}else if(Ke(s))if(s[Symbol.iterator])i=Array.from(s,(a,l)=>e(a,l,void 0,r));else{const a=Object.keys(s);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];i[l]=e(s[u],u,l,r)}}else i=[];return i}function J(s,e,t={},n,i){if(mt.ce||mt.parent&&ui(mt.parent)&&mt.parent.ce)return e!=="default"&&(t.name=e),F(),K(lt,null,[B("slot",t,n&&n())],64);let r=s[e];r&&r._c&&(r._d=!1),F();const o=r&&yf(r(t)),a=t.key||o&&o.key,l=K(lt,{key:(a&&!Jn(a)?a:`_${e}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&s._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function yf(s){return s.some(e=>lr(e)?!(e.type===dn||e.type===lt&&!yf(e.children)):!0)?s:null}function uy(s,e){const t={};for(const n in s)t[Wi(n)]=s[n];return t}const pl=s=>s?Bf(s)?ea(s):pl(s.parent):null,Ji=_t(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>pl(s.parent),$root:s=>pl(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>wf(s),$forceUpdate:s=>s.f||(s.f=()=>{mc(s.update)}),$nextTick:s=>s.n||(s.n=st.bind(s.proxy)),$watch:s=>Iy.bind(s)}),ka=(s,e)=>s!==Ve&&!s.__isScriptSetup&&Ne(s,e),dy={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=s;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(ka(n,e))return o[e]=1,n[e];if(i!==Ve&&Ne(i,e))return o[e]=2,i[e];if((c=s.propsOptions[0])&&Ne(c,e))return o[e]=3,r[e];if(t!==Ve&&Ne(t,e))return o[e]=4,t[e];ml&&(o[e]=0)}}const u=Ji[e];let d,h;if(u)return e==="$attrs"&&bt(s.attrs,"get",""),u(s);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==Ve&&Ne(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,Ne(h,e))return h[e]},set({_:s},e,t){const{data:n,setupState:i,ctx:r}=s;return ka(i,e)?(i[e]=t,!0):n!==Ve&&Ne(n,e)?(n[e]=t,!0):Ne(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:r}},o){let a;return!!t[o]||s!==Ve&&Ne(s,o)||ka(e,o)||(a=r[0])&&Ne(a,o)||Ne(n,o)||Ne(Ji,o)||Ne(i.config.globalProperties,o)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:Ne(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function hy(){return fy().slots}function fy(s){const e=Mt();return e.setupContext||(e.setupContext=$f(e))}function gl(s){return _e(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}function vf(s,e){const t=gl(s);for(const n in e){if(n.startsWith("__skip"))continue;let i=t[n];i?_e(i)||Ae(i)?i=t[n]={type:i,default:e[n]}:i.default=e[n]:i===null&&(i=t[n]={default:e[n]}),i&&e[`__skip_${n}`]&&(i.skipFactory=!0)}return t}let ml=!0;function py(s){const e=wf(s),t=s.proxy,n=s.ctx;ml=!1,e.beforeCreate&&Su(e.beforeCreate,s,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:f,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:_,destroyed:w,unmounted:A,render:S,renderTracked:b,renderTriggered:x,errorCaptured:E,serverPrefetch:C,expose:M,inheritAttrs:O,components:W,directives:se,filters:z}=e;if(c&&gy(c,n,null),o)for(const $ in o){const k=o[$];Ae(k)&&(n[$]=k.bind(t))}if(i){const $=i.call(t,t);Ke($)&&(s.data=dt($))}if(ml=!0,r)for(const $ in r){const k=r[$],L=Ae(k)?k.bind(t,t):Ae(k.get)?k.get.bind(t,t):Pn,Y=!Ae(k)&&Ae(k.set)?k.set.bind(t):Pn,ee=G({get:L,set:Y});Object.defineProperty(n,$,{enumerable:!0,configurable:!0,get:()=>ee.value,set:N=>ee.value=N})}if(a)for(const $ in a)bf(a[$],n,t,$);if(l){const $=Ae(l)?l.call(t):l;Reflect.ownKeys($).forEach(k=>{di(k,$[k])})}u&&Su(u,s,"c");function q($,k){_e(k)?k.forEach(L=>$(L.bind(t))):k&&$(k.bind(t))}if(q(ty,d),q(Ht,h),q(ny,f),q(sy,p),q(Zm,g),q(Qm,m),q(ay,E),q(oy,b),q(ry,x),q(Ao,_),q(Ns,A),q(iy,C),_e(M))if(M.length){const $=s.exposed||(s.exposed={});M.forEach(k=>{Object.defineProperty($,k,{get:()=>t[k],set:L=>t[k]=L,enumerable:!0})})}else s.exposed||(s.exposed={});S&&s.render===Pn&&(s.render=S),O!=null&&(s.inheritAttrs=O),W&&(s.components=W),se&&(s.directives=se),C&&ff(s)}function gy(s,e,t=Pn){_e(s)&&(s=yl(s));for(const n in s){const i=s[n];let r;Ke(i)?"default"in i?r=Gt(i.from||n,i.default,!0):r=Gt(i.from||n):r=Gt(i),Ue(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function Su(s,e,t){Mn(_e(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function bf(s,e,t,n){let i=n.includes(".")?Df(t,n):()=>t[n];if(tt(s)){const r=e[s];Ae(r)&&He(i,r)}else if(Ae(s))He(i,s.bind(t));else if(Ke(s))if(_e(s))s.forEach(r=>bf(r,e,t,n));else{const r=Ae(s.handler)?s.handler.bind(t):e[s.handler];Ae(r)&&He(i,r,s)}}function wf(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(c=>xo(l,c,o,!0)),xo(l,e,o)),Ke(e)&&r.set(e,l),l}function xo(s,e,t,n=!1){const{mixins:i,extends:r}=e;r&&xo(s,r,t,!0),i&&i.forEach(o=>xo(s,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=my[o]||t&&t[o];s[o]=a?a(s[o],e[o]):e[o]}return s}const my={data:Cu,props:Eu,emits:Eu,methods:Hi,computed:Hi,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:Hi,directives:Hi,watch:vy,provide:Cu,inject:yy};function Cu(s,e){return e?s?function(){return _t(Ae(s)?s.call(this,this):s,Ae(e)?e.call(this,this):e)}:e:s}function yy(s,e){return Hi(yl(s),yl(e))}function yl(s){if(_e(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function xt(s,e){return s?[...new Set([].concat(s,e))]:e}function Hi(s,e){return s?_t(Object.create(null),s,e):e}function Eu(s,e){return s?_e(s)&&_e(e)?[...new Set([...s,...e])]:_t(Object.create(null),gl(s),gl(e??{})):e}function vy(s,e){if(!s)return e;if(!e)return s;const t=_t(Object.create(null),s);for(const n in e)t[n]=xt(s[n],e[n]);return t}function _f(){return{app:null,config:{isNativeTag:om,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let by=0;function wy(s,e){return function(n,i=null){Ae(n)||(n=_t({},n)),i!=null&&!Ke(i)&&(i=null);const r=_f(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:by++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:Jy,get config(){return r.config},set config(u){},use(u,...d){return o.has(u)||(u&&Ae(u.install)?(o.add(u),u.install(c,...d)):Ae(u)&&(o.add(u),u(c,...d))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,d){return d?(r.components[u]=d,c):r.components[u]},directive(u,d){return d?(r.directives[u]=d,c):r.directives[u]},mount(u,d,h){if(!l){const f=c._ceVNode||B(n,i);return f.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),s(f,u,h),l=!0,c._container=u,u.__vue_app__=c,ea(f.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Mn(a,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,d){return r.provides[u]=d,c},runWithContext(u){const d=Ds;Ds=c;try{return u()}finally{Ds=d}}};return c}}let Ds=null;function di(s,e){if(wt){let t=wt.provides;const n=wt.parent&&wt.parent.provides;n===t&&(t=wt.provides=Object.create(n)),t[s]=e}}function Gt(s,e,t=!1){const n=Mt();if(n||Ds){let i=Ds?Ds._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&s in i)return i[s];if(arguments.length>1)return t&&Ae(e)?e.call(n&&n.proxy):e}}function bc(){return!!(Mt()||Ds)}const Af={},xf=()=>Object.create(Af),Sf=s=>Object.getPrototypeOf(s)===Af;function _y(s,e,t,n=!1){const i={},r=xf();s.propsDefaults=Object.create(null),Cf(s,e,i,r);for(const o in s.propsOptions[0])o in i||(i[o]=void 0);t?s.props=n?i:Qh(i):s.type.props?s.props=i:s.props=r,s.attrs=r}function Ay(s,e,t,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=s,a=Le(i),[l]=s.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(Zo(s.emitsOptions,h))continue;const f=e[h];if(l)if(Ne(r,h))f!==r[h]&&(r[h]=f,c=!0);else{const p=$t(h);i[p]=vl(l,a,p,f,s,!1)}else f!==r[h]&&(r[h]=f,c=!0)}}}else{Cf(s,e,i,r)&&(c=!0);let u;for(const d in a)(!e||!Ne(e,d)&&((u=ws(d))===d||!Ne(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(i[d]=vl(l,a,d,void 0,s,!0)):delete i[d]);if(r!==a)for(const d in r)(!e||!Ne(e,d))&&(delete r[d],c=!0)}c&&Un(s.attrs,"set","")}function Cf(s,e,t,n){const[i,r]=s.propsOptions;let o=!1,a;if(e)for(let l in e){if(zi(l))continue;const c=e[l];let u;i&&Ne(i,u=$t(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:Zo(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=Le(t),c=a||Ve;for(let u=0;u<r.length;u++){const d=r[u];t[d]=vl(i,l,d,c[d],s,!Ne(c,d))}}return o}function vl(s,e,t,n,i,r){const o=s[t];if(o!=null){const a=Ne(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ae(l)){const{propsDefaults:c}=i;if(t in c)n=c[t];else{const u=Cr(i);n=c[t]=l.call(null,e),u()}}else n=l;i.ce&&i.ce._setProp(t,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===ws(t))&&(n=!0))}return n}const xy=new WeakMap;function Ef(s,e,t=!1){const n=t?xy:e.propsCache,i=n.get(s);if(i)return i;const r=s.props,o={},a=[];let l=!1;if(!Ae(s)){const u=d=>{l=!0;const[h,f]=Ef(d,e,!0);_t(o,h),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!l)return Ke(s)&&n.set(s,ai),ai;if(_e(r))for(let u=0;u<r.length;u++){const d=$t(r[u]);Tu(d)&&(o[d]=Ve)}else if(r)for(const u in r){const d=$t(u);if(Tu(d)){const h=r[u],f=o[d]=_e(h)||Ae(h)?{type:h}:_t({},h),p=f.type;let g=!1,m=!0;if(_e(p))for(let y=0;y<p.length;++y){const _=p[y],w=Ae(_)&&_.name;if(w==="Boolean"){g=!0;break}else w==="String"&&(m=!1)}else g=Ae(p)&&p.name==="Boolean";f[0]=g,f[1]=m,(g||Ne(f,"default"))&&a.push(d)}}const c=[o,a];return Ke(s)&&n.set(s,c),c}function Tu(s){return s[0]!=="$"&&!zi(s)}const wc=s=>s==="_"||s==="__"||s==="_ctx"||s==="$stable",_c=s=>_e(s)?s.map(En):[En(s)],Sy=(s,e,t)=>{if(e._n)return e;const n=I((...i)=>_c(e(...i)),t);return n._c=!1,n},Tf=(s,e,t)=>{const n=s._ctx;for(const i in s){if(wc(i))continue;const r=s[i];if(Ae(r))e[i]=Sy(i,r,n);else if(r!=null){const o=_c(r);e[i]=()=>o}}},Pf=(s,e)=>{const t=_c(e);s.slots.default=()=>t},kf=(s,e,t)=>{for(const n in e)(t||!wc(n))&&(s[n]=e[n])},Cy=(s,e,t)=>{const n=s.slots=xf();if(s.vnode.shapeFlag&32){const i=e.__;i&&al(n,"__",i,!0);const r=e._;r?(kf(n,e,t),t&&al(n,"_",r,!0)):Tf(e,n)}else e&&Pf(s,e)},Ey=(s,e,t)=>{const{vnode:n,slots:i}=s;let r=!0,o=Ve;if(n.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:kf(i,e,t):(r=!e.$stable,Tf(e,i)),o=e}else e&&(Pf(s,e),o={default:1});if(r)for(const a in i)!wc(a)&&o[a]==null&&delete i[a]},St=qy;function Ty(s){return Py(s)}function Py(s,e){const t=Ho();t.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:f=Pn,insertStaticContent:p}=s,g=(T,P,R,H=null,U=null,j=null,ae=void 0,re=null,ne=!!P.dynamicChildren)=>{if(T===P)return;T&&!Mi(T,P)&&(H=D(T),N(T,U,j,!0),T=null),P.patchFlag===-2&&(ne=!1,P.dynamicChildren=null);const{type:X,ref:me,shapeFlag:le}=P;switch(X){case Qo:m(T,P,R,H);break;case dn:y(T,P,R,H);break;case Ra:T==null&&_(P,R,H,ae);break;case lt:W(T,P,R,H,U,j,ae,re,ne);break;default:le&1?S(T,P,R,H,U,j,ae,re,ne):le&6?se(T,P,R,H,U,j,ae,re,ne):(le&64||le&128)&&X.process(T,P,R,H,U,j,ae,re,ne,ce)}me!=null&&U?Yi(me,T&&T.ref,j,P||T,!P):me==null&&T&&T.ref!=null&&Yi(T.ref,null,j,T,!0)},m=(T,P,R,H)=>{if(T==null)n(P.el=a(P.children),R,H);else{const U=P.el=T.el;P.children!==T.children&&c(U,P.children)}},y=(T,P,R,H)=>{T==null?n(P.el=l(P.children||""),R,H):P.el=T.el},_=(T,P,R,H)=>{[T.el,T.anchor]=p(T.children,P,R,H,T.el,T.anchor)},w=({el:T,anchor:P},R,H)=>{let U;for(;T&&T!==P;)U=h(T),n(T,R,H),T=U;n(P,R,H)},A=({el:T,anchor:P})=>{let R;for(;T&&T!==P;)R=h(T),i(T),T=R;i(P)},S=(T,P,R,H,U,j,ae,re,ne)=>{P.type==="svg"?ae="svg":P.type==="math"&&(ae="mathml"),T==null?b(P,R,H,U,j,ae,re,ne):C(T,P,U,j,ae,re,ne)},b=(T,P,R,H,U,j,ae,re)=>{let ne,X;const{props:me,shapeFlag:le,transition:ge,dirs:xe}=T;if(ne=T.el=o(T.type,j,me&&me.is,me),le&8?u(ne,T.children):le&16&&E(T.children,ne,null,H,U,Ma(T,j),ae,re),xe&&xs(T,null,H,"created"),x(ne,T,T.scopeId,ae,H),me){for(const We in me)We!=="value"&&!zi(We)&&r(ne,We,null,me[We],j,H);"value"in me&&r(ne,"value",null,me.value,j),(X=me.onVnodeBeforeMount)&&wn(X,H,T)}xe&&xs(T,null,H,"beforeMount");const Oe=ky(U,ge);Oe&&ge.beforeEnter(ne),n(ne,P,R),((X=me&&me.onVnodeMounted)||Oe||xe)&&St(()=>{X&&wn(X,H,T),Oe&&ge.enter(ne),xe&&xs(T,null,H,"mounted")},U)},x=(T,P,R,H,U)=>{if(R&&f(T,R),H)for(let j=0;j<H.length;j++)f(T,H[j]);if(U){let j=U.subTree;if(P===j||Of(j.type)&&(j.ssContent===P||j.ssFallback===P)){const ae=U.vnode;x(T,ae,ae.scopeId,ae.slotScopeIds,U.parent)}}},E=(T,P,R,H,U,j,ae,re,ne=0)=>{for(let X=ne;X<T.length;X++){const me=T[X]=re?as(T[X]):En(T[X]);g(null,me,P,R,H,U,j,ae,re)}},C=(T,P,R,H,U,j,ae)=>{const re=P.el=T.el;let{patchFlag:ne,dynamicChildren:X,dirs:me}=P;ne|=T.patchFlag&16;const le=T.props||Ve,ge=P.props||Ve;let xe;if(R&&Ss(R,!1),(xe=ge.onVnodeBeforeUpdate)&&wn(xe,R,P,T),me&&xs(P,T,R,"beforeUpdate"),R&&Ss(R,!0),(le.innerHTML&&ge.innerHTML==null||le.textContent&&ge.textContent==null)&&u(re,""),X?M(T.dynamicChildren,X,re,R,H,Ma(P,U),j):ae||k(T,P,re,null,R,H,Ma(P,U),j,!1),ne>0){if(ne&16)O(re,le,ge,R,U);else if(ne&2&&le.class!==ge.class&&r(re,"class",null,ge.class,U),ne&4&&r(re,"style",le.style,ge.style,U),ne&8){const Oe=P.dynamicProps;for(let We=0;We<Oe.length;We++){const $e=Oe[We],Dt=le[$e],It=ge[$e];(It!==Dt||$e==="value")&&r(re,$e,Dt,It,U,R)}}ne&1&&T.children!==P.children&&u(re,P.children)}else!ae&&X==null&&O(re,le,ge,R,U);((xe=ge.onVnodeUpdated)||me)&&St(()=>{xe&&wn(xe,R,P,T),me&&xs(P,T,R,"updated")},H)},M=(T,P,R,H,U,j,ae)=>{for(let re=0;re<P.length;re++){const ne=T[re],X=P[re],me=ne.el&&(ne.type===lt||!Mi(ne,X)||ne.shapeFlag&198)?d(ne.el):R;g(ne,X,me,null,H,U,j,ae,!0)}},O=(T,P,R,H,U)=>{if(P!==R){if(P!==Ve)for(const j in P)!zi(j)&&!(j in R)&&r(T,j,P[j],null,U,H);for(const j in R){if(zi(j))continue;const ae=R[j],re=P[j];ae!==re&&j!=="value"&&r(T,j,re,ae,U,H)}"value"in R&&r(T,"value",P.value,R.value,U)}},W=(T,P,R,H,U,j,ae,re,ne)=>{const X=P.el=T?T.el:a(""),me=P.anchor=T?T.anchor:a("");let{patchFlag:le,dynamicChildren:ge,slotScopeIds:xe}=P;xe&&(re=re?re.concat(xe):xe),T==null?(n(X,R,H),n(me,R,H),E(P.children||[],R,me,U,j,ae,re,ne)):le>0&&le&64&&ge&&T.dynamicChildren?(M(T.dynamicChildren,ge,R,U,j,ae,re),(P.key!=null||U&&P===U.subTree)&&Ac(T,P,!0)):k(T,P,R,me,U,j,ae,re,ne)},se=(T,P,R,H,U,j,ae,re,ne)=>{P.slotScopeIds=re,T==null?P.shapeFlag&512?U.ctx.activate(P,R,H,ae,ne):z(P,R,H,U,j,ae,ne):oe(T,P,ne)},z=(T,P,R,H,U,j,ae)=>{const re=T.component=zy(T,H,U);if(pf(T)&&(re.ctx.renderer=ce),Wy(re,!1,ae),re.asyncDep){if(U&&U.registerDep(re,q,ae),!T.el){const ne=re.subTree=B(dn);y(null,ne,P,R),T.placeholder=ne.el}}else q(re,T,P,R,U,j,ae)},oe=(T,P,R)=>{const H=P.component=T.component;if(Ny(T,P,R))if(H.asyncDep&&!H.asyncResolved){$(H,P,R);return}else H.next=P,H.update();else P.el=T.el,H.vnode=P},q=(T,P,R,H,U,j,ae)=>{const re=()=>{if(T.isMounted){let{next:le,bu:ge,u:xe,parent:Oe,vnode:We}=T;{const mn=Mf(T);if(mn){le&&(le.el=We.el,$(T,le,ae)),mn.asyncDep.then(()=>{T.isUnmounted||re()});return}}let $e=le,Dt;Ss(T,!1),le?(le.el=We.el,$(T,le,ae)):le=We,ge&&oo(ge),(Dt=le.props&&le.props.onVnodeBeforeUpdate)&&wn(Dt,Oe,le,We),Ss(T,!0);const It=ku(T),gn=T.subTree;T.subTree=It,g(gn,It,d(gn.el),D(gn),T,U,j),le.el=It.el,$e===null&&$y(T,It.el),xe&&St(xe,U),(Dt=le.props&&le.props.onVnodeUpdated)&&St(()=>wn(Dt,Oe,le,We),U)}else{let le;const{el:ge,props:xe}=P,{bm:Oe,m:We,parent:$e,root:Dt,type:It}=T,gn=ui(P);Ss(T,!1),Oe&&oo(Oe),!gn&&(le=xe&&xe.onVnodeBeforeMount)&&wn(le,$e,P),Ss(T,!0);{Dt.ce&&Dt.ce._def.shadowRoot!==!1&&Dt.ce._injectChildStyle(It);const mn=T.subTree=ku(T);g(null,mn,R,H,T,U,j),P.el=mn.el}if(We&&St(We,U),!gn&&(le=xe&&xe.onVnodeMounted)){const mn=P;St(()=>wn(le,$e,mn),U)}(P.shapeFlag&256||$e&&ui($e.vnode)&&$e.vnode.shapeFlag&256)&&T.a&&St(T.a,U),T.isMounted=!0,P=R=H=null}};T.scope.on();const ne=T.effect=new Bh(re);T.scope.off();const X=T.update=ne.run.bind(ne),me=T.job=ne.runIfDirty.bind(ne);me.i=T,me.id=T.uid,ne.scheduler=()=>mc(me),Ss(T,!0),X()},$=(T,P,R)=>{P.component=T;const H=T.vnode.props;T.vnode=P,T.next=null,Ay(T,P.props,H,R),Ey(T,P.children,R),Gn(),bu(T),Kn()},k=(T,P,R,H,U,j,ae,re,ne=!1)=>{const X=T&&T.children,me=T?T.shapeFlag:0,le=P.children,{patchFlag:ge,shapeFlag:xe}=P;if(ge>0){if(ge&128){Y(X,le,R,H,U,j,ae,re,ne);return}else if(ge&256){L(X,le,R,H,U,j,ae,re,ne);return}}xe&8?(me&16&&Me(X,U,j),le!==X&&u(R,le)):me&16?xe&16?Y(X,le,R,H,U,j,ae,re,ne):Me(X,U,j,!0):(me&8&&u(R,""),xe&16&&E(le,R,H,U,j,ae,re,ne))},L=(T,P,R,H,U,j,ae,re,ne)=>{T=T||ai,P=P||ai;const X=T.length,me=P.length,le=Math.min(X,me);let ge;for(ge=0;ge<le;ge++){const xe=P[ge]=ne?as(P[ge]):En(P[ge]);g(T[ge],xe,R,null,U,j,ae,re,ne)}X>me?Me(T,U,j,!0,!1,le):E(P,R,H,U,j,ae,re,ne,le)},Y=(T,P,R,H,U,j,ae,re,ne)=>{let X=0;const me=P.length;let le=T.length-1,ge=me-1;for(;X<=le&&X<=ge;){const xe=T[X],Oe=P[X]=ne?as(P[X]):En(P[X]);if(Mi(xe,Oe))g(xe,Oe,R,null,U,j,ae,re,ne);else break;X++}for(;X<=le&&X<=ge;){const xe=T[le],Oe=P[ge]=ne?as(P[ge]):En(P[ge]);if(Mi(xe,Oe))g(xe,Oe,R,null,U,j,ae,re,ne);else break;le--,ge--}if(X>le){if(X<=ge){const xe=ge+1,Oe=xe<me?P[xe].el:H;for(;X<=ge;)g(null,P[X]=ne?as(P[X]):En(P[X]),R,Oe,U,j,ae,re,ne),X++}}else if(X>ge)for(;X<=le;)N(T[X],U,j,!0),X++;else{const xe=X,Oe=X,We=new Map;for(X=Oe;X<=ge;X++){const jt=P[X]=ne?as(P[X]):En(P[X]);jt.key!=null&&We.set(jt.key,X)}let $e,Dt=0;const It=ge-Oe+1;let gn=!1,mn=0;const Pi=new Array(It);for(X=0;X<It;X++)Pi[X]=0;for(X=xe;X<=le;X++){const jt=T[X];if(Dt>=It){N(jt,U,j,!0);continue}let yn;if(jt.key!=null)yn=We.get(jt.key);else for($e=Oe;$e<=ge;$e++)if(Pi[$e-Oe]===0&&Mi(jt,P[$e])){yn=$e;break}yn===void 0?N(jt,U,j,!0):(Pi[yn-Oe]=X+1,yn>=mn?mn=yn:gn=!0,g(jt,P[yn],R,null,U,j,ae,re,ne),Dt++)}const du=gn?My(Pi):ai;for($e=du.length-1,X=It-1;X>=0;X--){const jt=Oe+X,yn=P[jt],hu=P[jt+1],fu=jt+1<me?hu.el||hu.placeholder:H;Pi[X]===0?g(null,yn,R,fu,U,j,ae,re,ne):gn&&($e<0||X!==du[$e]?ee(yn,R,fu,2):$e--)}}},ee=(T,P,R,H,U=null)=>{const{el:j,type:ae,transition:re,children:ne,shapeFlag:X}=T;if(X&6){ee(T.component.subTree,P,R,H);return}if(X&128){T.suspense.move(P,R,H);return}if(X&64){ae.move(T,P,R,ce);return}if(ae===lt){n(j,P,R);for(let le=0;le<ne.length;le++)ee(ne[le],P,R,H);n(T.anchor,P,R);return}if(ae===Ra){w(T,P,R);return}if(H!==2&&X&1&&re)if(H===0)re.beforeEnter(j),n(j,P,R),St(()=>re.enter(j),U);else{const{leave:le,delayLeave:ge,afterLeave:xe}=re,Oe=()=>{T.ctx.isUnmounted?i(j):n(j,P,R)},We=()=>{le(j,()=>{Oe(),xe&&xe()})};ge?ge(j,Oe,We):We()}else n(j,P,R)},N=(T,P,R,H=!1,U=!1)=>{const{type:j,props:ae,ref:re,children:ne,dynamicChildren:X,shapeFlag:me,patchFlag:le,dirs:ge,cacheIndex:xe}=T;if(le===-2&&(U=!1),re!=null&&(Gn(),Yi(re,null,R,T,!0),Kn()),xe!=null&&(P.renderCache[xe]=void 0),me&256){P.ctx.deactivate(T);return}const Oe=me&1&&ge,We=!ui(T);let $e;if(We&&($e=ae&&ae.onVnodeBeforeUnmount)&&wn($e,P,T),me&6)Ce(T.component,R,H);else{if(me&128){T.suspense.unmount(R,H);return}Oe&&xs(T,null,P,"beforeUnmount"),me&64?T.type.remove(T,P,R,ce,H):X&&!X.hasOnce&&(j!==lt||le>0&&le&64)?Me(X,P,R,!1,!0):(j===lt&&le&384||!U&&me&16)&&Me(ne,P,R),H&&ie(T)}(We&&($e=ae&&ae.onVnodeUnmounted)||Oe)&&St(()=>{$e&&wn($e,P,T),Oe&&xs(T,null,P,"unmounted")},R)},ie=T=>{const{type:P,el:R,anchor:H,transition:U}=T;if(P===lt){we(R,H);return}if(P===Ra){A(T);return}const j=()=>{i(R),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(T.shapeFlag&1&&U&&!U.persisted){const{leave:ae,delayLeave:re}=U,ne=()=>ae(R,j);re?re(T.el,j,ne):ne()}else j()},we=(T,P)=>{let R;for(;T!==P;)R=h(T),i(T),T=R;i(P)},Ce=(T,P,R)=>{const{bum:H,scope:U,job:j,subTree:ae,um:re,m:ne,a:X,parent:me,slots:{__:le}}=T;Pu(ne),Pu(X),H&&oo(H),me&&_e(le)&&le.forEach(ge=>{me.renderCache[ge]=void 0}),U.stop(),j&&(j.flags|=8,N(ae,T,P,R)),re&&St(re,P),St(()=>{T.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},Me=(T,P,R,H=!1,U=!1,j=0)=>{for(let ae=j;ae<T.length;ae++)N(T[ae],P,R,H,U)},D=T=>{if(T.shapeFlag&6)return D(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const P=h(T.anchor||T.el),R=P&&P[uf];return R?h(R):P};let te=!1;const Z=(T,P,R)=>{T==null?P._vnode&&N(P._vnode,null,null,!0):g(P._vnode||null,T,P,null,null,null,R),P._vnode=T,te||(te=!0,bu(),af(),te=!1)},ce={p:g,um:N,m:ee,r:ie,mt:z,mc:E,pc:k,pbc:M,n:D,o:s};return{render:Z,hydrate:void 0,createApp:wy(Z)}}function Ma({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Ss({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function ky(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function Ac(s,e,t=!1){const n=s.children,i=e.children;if(_e(n)&&_e(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=as(i[r]),a.el=o.el),!t&&a.patchFlag!==-2&&Ac(o,a)),a.type===Qo&&(a.el=o.el),a.type===dn&&!a.el&&(a.el=o.el)}}function My(s){const e=s.slice(),t=[0];let n,i,r,o,a;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(i=t[t.length-1],s[i]<c){e[n]=i,t.push(n);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,s[t[a]]<c?r=a+1:o=a;c<s[t[r]]&&(r>0&&(e[n]=t[r-1]),t[r]=n)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function Mf(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Mf(e)}function Pu(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const Ry=Symbol.for("v-scx"),Dy=()=>Gt(Ry);function Yt(s,e){return Jo(s,null,e)}function Rf(s,e){return Jo(s,null,{flush:"post"})}function He(s,e,t){return Jo(s,e,t)}function Jo(s,e,t=Ve){const{immediate:n,deep:i,flush:r,once:o}=t,a=_t({},t),l=e&&n||!e&&r!=="post";let c;if(cr){if(r==="sync"){const f=Dy();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Pn,f.resume=Pn,f.pause=Pn,f}}const u=wt;a.call=(f,p,g)=>Mn(f,u,p,g);let d=!1;r==="post"?a.scheduler=f=>{St(f,u&&u.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(f,p)=>{p?f():mc(f)}),a.augmentJob=f=>{e&&(f.flags|=4),d&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const h=Vm(s,e,a);return cr&&(c?c.push(h):l&&h()),h}function Iy(s,e,t){const n=this.proxy,i=tt(s)?s.includes(".")?Df(n,s):()=>n[s]:s.bind(n,n);let r;Ae(e)?r=e:(r=e.handler,t=e);const o=Cr(this),a=Jo(i,r.bind(n),t);return o(),a}function Df(s,e){const t=e.split(".");return()=>{let n=s;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}const Oy=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${$t(e)}Modifiers`]||s[`${ws(e)}Modifiers`];function Ly(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||Ve;let i=t;const r=e.startsWith("update:"),o=r&&Oy(n,e.slice(7));o&&(o.trim&&(i=t.map(u=>tt(u)?u.trim():u)),o.number&&(i=t.map(ll)));let a,l=n[a=Wi(e)]||n[a=Wi($t(e))];!l&&r&&(l=n[a=Wi(ws(e))]),l&&Mn(l,s,6,i);const c=n[a+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,Mn(c,s,6,i)}}function If(s,e,t=!1){const n=e.emitsCache,i=n.get(s);if(i!==void 0)return i;const r=s.emits;let o={},a=!1;if(!Ae(s)){const l=c=>{const u=If(c,e,!0);u&&(a=!0,_t(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!r&&!a?(Ke(s)&&n.set(s,null),null):(_e(r)?r.forEach(l=>o[l]=null):_t(o,r),Ke(s)&&n.set(s,o),o)}function Zo(s,e){return!s||!Bo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ne(s,e[0].toLowerCase()+e.slice(1))||Ne(s,ws(e))||Ne(s,e))}function ku(s){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:f,ctx:p,inheritAttrs:g}=s,m=_o(s);let y,_;try{if(t.shapeFlag&4){const A=i||n,S=A;y=En(c.call(S,A,u,d,f,h,p)),_=a}else{const A=e;y=En(A.length>1?A(d,{attrs:a,slots:o,emit:l}):A(d,null)),_=e.props?a:Fy(a)}}catch(A){Zi.length=0,Xo(A,s,1),y=B(dn)}let w=y;if(_&&g!==!1){const A=Object.keys(_),{shapeFlag:S}=w;A.length&&S&7&&(r&&A.some(lc)&&(_=By(_,r)),w=Is(w,_,!1,!0))}return t.dirs&&(w=Is(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(t.dirs):t.dirs),t.transition&&yc(w,t.transition),y=w,_o(m),y}const Fy=s=>{let e;for(const t in s)(t==="class"||t==="style"||Bo(t))&&((e||(e={}))[t]=s[t]);return e},By=(s,e)=>{const t={};for(const n in s)(!lc(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function Ny(s,e,t){const{props:n,children:i,component:r}=s,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?Mu(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==n[h]&&!Zo(c,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Mu(n,o,c):!0:!!o;return!1}function Mu(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==s[r]&&!Zo(t,r))return!0}return!1}function $y({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const Of=s=>s.__isSuspense;function qy(s,e){e&&e.pendingBranch?_e(s)?e.effects.push(...s):e.effects.push(s):Gm(s)}const lt=Symbol.for("v-fgt"),Qo=Symbol.for("v-txt"),dn=Symbol.for("v-cmt"),Ra=Symbol.for("v-stc"),Zi=[];let Wt=null;function F(s=!1){Zi.push(Wt=s?null:[])}function Hy(){Zi.pop(),Wt=Zi[Zi.length-1]||null}let ar=1;function Ru(s,e=!1){ar+=s,s<0&&Wt&&e&&(Wt.hasOnce=!0)}function Lf(s){return s.dynamicChildren=ar>0?Wt||ai:null,Hy(),ar>0&&Wt&&Wt.push(s),s}function Fe(s,e,t,n,i,r){return Lf(ve(s,e,t,n,i,r,!0))}function K(s,e,t,n,i){return Lf(B(s,e,t,n,i,!0))}function lr(s){return s?s.__v_isVNode===!0:!1}function Mi(s,e){return s.type===e.type&&s.key===e.key}const Ff=({key:s})=>s??null,lo=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?tt(s)||Ue(s)||Ae(s)?{i:mt,r:s,k:e,f:!!t}:s:null);function ve(s,e=null,t=null,n=0,i=null,r=s===lt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&Ff(e),ref:e&&lo(e),scopeId:cf,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:mt};return a?(xc(l,t),r&128&&s.normalize(l)):t&&(l.shapeFlag|=tt(t)?8:16),ar>0&&!o&&Wt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Wt.push(l),l}const B=jy;function jy(s,e=null,t=null,n=0,i=null,r=!1){if((!s||s===mf)&&(s=dn),lr(s)){const a=Is(s,e,!0);return t&&xc(a,t),ar>0&&!r&&Wt&&(a.shapeFlag&6?Wt[Wt.indexOf(s)]=a:Wt.push(a)),a.patchFlag=-2,a}if(Yy(s)&&(s=s.__vccOpts),e){e=In(e);let{class:a,style:l}=e;a&&!tt(a)&&(e.class=qt(a)),Ke(l)&&(pc(l)&&!_e(l)&&(l=_t({},l)),e.style=Zn(l))}const o=tt(s)?1:Of(s)?128:Km(s)?64:Ke(s)?4:Ae(s)?2:0;return ve(s,e,t,n,i,o,r,!0)}function In(s){return s?pc(s)||Sf(s)?_t({},s):s:null}function Is(s,e,t=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=s,c=e?ye(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&Ff(c),ref:e&&e.ref?t&&r?_e(r)?r.concat(lo(e)):[r,lo(e)]:lo(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==lt?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&Is(s.ssContent),ssFallback:s.ssFallback&&Is(s.ssFallback),placeholder:s.placeholder,el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&yc(u,l.clone(u)),u}function qe(s=" ",e=0){return B(Qo,null,s,e)}function Wn(s="",e=!1){return e?(F(),K(dn,null,s)):B(dn,null,s)}function En(s){return s==null||typeof s=="boolean"?B(dn):_e(s)?B(lt,null,s.slice()):lr(s)?as(s):B(Qo,null,String(s))}function as(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:Is(s)}function xc(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(_e(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),xc(s,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!Sf(e)?e._ctx=mt:i===3&&mt&&(mt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:mt},t=32):(e=String(e),n&64?(t=16,e=[qe(e)]):t=8);s.children=e,s.shapeFlag|=t}function ye(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=qt([e.class,n.class]));else if(i==="style")e.style=Zn([e.style,n.style]);else if(Bo(i)){const r=e[i],o=n[i];o&&r!==o&&!(_e(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function wn(s,e,t,n=null){Mn(s,e,7,[t,n])}const Uy=_f();let Vy=0;function zy(s,e,t){const n=s.type,i=(e?e.appContext:s.appContext)||Uy,r={uid:Vy++,vnode:s,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ef(n,i),emitsOptions:If(n,i),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:n.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=Ly.bind(null,r),s.ce&&s.ce(r),r}let wt=null;const Mt=()=>wt||mt;let So,bl;{const s=Ho(),e=(t,n)=>{let i;return(i=s[t])||(i=s[t]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};So=e("__VUE_INSTANCE_SETTERS__",t=>wt=t),bl=e("__VUE_SSR_SETTERS__",t=>cr=t)}const Cr=s=>{const e=wt;return So(s),s.scope.on(),()=>{s.scope.off(),So(e)}},Du=()=>{wt&&wt.scope.off(),So(null)};function Bf(s){return s.vnode.shapeFlag&4}let cr=!1;function Wy(s,e=!1,t=!1){e&&bl(e);const{props:n,children:i}=s.vnode,r=Bf(s);_y(s,n,r,e),Cy(s,i,t||e);const o=r?Gy(s,e):void 0;return e&&bl(!1),o}function Gy(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,dy);const{setup:n}=t;if(n){Gn();const i=s.setupContext=n.length>1?$f(s):null,r=Cr(s),o=xr(n,s,0,[s.props,i]),a=Mh(o);if(Kn(),r(),(a||s.sp)&&!ui(s)&&ff(s),a){if(o.then(Du,Du),e)return o.then(l=>{Iu(s,l)}).catch(l=>{Xo(l,s,0)});s.asyncDep=o}else Iu(s,o)}else Nf(s)}function Iu(s,e,t){Ae(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:Ke(e)&&(s.setupState=tf(e)),Nf(s)}function Nf(s,e,t){const n=s.type;s.render||(s.render=n.render||Pn);{const i=Cr(s);Gn();try{py(s)}finally{Kn(),i()}}}const Ky={get(s,e){return bt(s,"get",""),s[e]}};function $f(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,Ky),slots:s.slots,emit:s.emit,expose:e}}function ea(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(tf(Ko(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ji)return Ji[t](s)},has(e,t){return t in e||t in Ji}})):s.proxy}function Xy(s,e=!0){return Ae(s)?s.displayName||s.name:s.name||e&&s.__name}function Yy(s){return Ae(s)&&"__vccOpts"in s}const G=(s,e)=>jm(s,e,cr);function Kt(s,e,t){const n=arguments.length;return n===2?Ke(e)&&!_e(e)?lr(e)?B(s,null,[e]):B(s,e):B(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&lr(t)&&(t=[t]),B(s,e,t))}const Jy="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wl;const Ou=typeof window<"u"&&window.trustedTypes;if(Ou)try{wl=Ou.createPolicy("vue",{createHTML:s=>s})}catch{}const qf=wl?s=>wl.createHTML(s):s=>s,Zy="http://www.w3.org/2000/svg",Qy="http://www.w3.org/1998/Math/MathML",qn=typeof document<"u"?document:null,Lu=qn&&qn.createElement("template"),ev={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const i=e==="svg"?qn.createElementNS(Zy,s):e==="mathml"?qn.createElementNS(Qy,s):t?qn.createElement(s,{is:t}):qn.createElement(s);return s==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:s=>qn.createTextNode(s),createComment:s=>qn.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>qn.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{Lu.innerHTML=qf(n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s);const a=Lu.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},tv=Symbol("_vtc");function nv(s,e,t){const n=s[tv];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const Co=Symbol("_vod"),Hf=Symbol("_vsh"),Fu={beforeMount(s,{value:e},{transition:t}){s[Co]=s.style.display==="none"?"":s.style.display,t&&e?t.beforeEnter(s):Ri(s,e)},mounted(s,{value:e},{transition:t}){t&&e&&t.enter(s)},updated(s,{value:e,oldValue:t},{transition:n}){!e!=!t&&(n?e?(n.beforeEnter(s),Ri(s,!0),n.enter(s)):n.leave(s,()=>{Ri(s,!1)}):Ri(s,e))},beforeUnmount(s,{value:e}){Ri(s,e)}};function Ri(s,e){s.style.display=e?s[Co]:"none",s[Hf]=!e}const sv=Symbol(""),iv=/(^|;)\s*display\s*:/;function rv(s,e,t){const n=s.style,i=tt(t);let r=!1;if(t&&!i){if(e)if(tt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&co(n,a,"")}else for(const o in e)t[o]==null&&co(n,o,"");for(const o in t)o==="display"&&(r=!0),co(n,o,t[o])}else if(i){if(e!==t){const o=n[sv];o&&(t+=";"+o),n.cssText=t,r=iv.test(t)}}else e&&s.removeAttribute("style");Co in s&&(s[Co]=r?n.display:"",s[Hf]&&(n.display="none"))}const Bu=/\s*!important$/;function co(s,e,t){if(_e(t))t.forEach(n=>co(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=ov(s,e);Bu.test(t)?s.setProperty(ws(n),t.replace(Bu,""),"important"):s[n]=t}}const Nu=["Webkit","Moz","ms"],Da={};function ov(s,e){const t=Da[e];if(t)return t;let n=$t(e);if(n!=="filter"&&n in s)return Da[e]=n;n=qo(n);for(let i=0;i<Nu.length;i++){const r=Nu[i]+n;if(r in s)return Da[e]=r}return e}const $u="http://www.w3.org/1999/xlink";function qu(s,e,t,n,i,r=mm(e)){n&&e.startsWith("xlink:")?t==null?s.removeAttributeNS($u,e.slice(6,e.length)):s.setAttributeNS($u,e,t):t==null||r&&!Ih(t)?s.removeAttribute(e):s.setAttribute(e,r?"":Jn(t)?String(t):t)}function Hu(s,e,t,n,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?qf(t):t);return}const r=s.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?s.getAttribute("value")||"":s.value,l=t==null?s.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in s))&&(s.value=l),t==null&&s.removeAttribute(e),s._value=t;return}let o=!1;if(t===""||t==null){const a=typeof s[e];a==="boolean"?t=Ih(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{s[e]=t}catch{}o&&s.removeAttribute(i||e)}function Zs(s,e,t,n){s.addEventListener(e,t,n)}function av(s,e,t,n){s.removeEventListener(e,t,n)}const ju=Symbol("_vei");function lv(s,e,t,n,i=null){const r=s[ju]||(s[ju]={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=cv(e);if(n){const c=r[e]=hv(n,i);Zs(s,a,c,l)}else o&&(av(s,a,o,l),r[e]=void 0)}}const Uu=/(?:Once|Passive|Capture)$/;function cv(s){let e;if(Uu.test(s)){e={};let n;for(;n=s.match(Uu);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):ws(s.slice(2)),e]}let Ia=0;const uv=Promise.resolve(),dv=()=>Ia||(uv.then(()=>Ia=0),Ia=Date.now());function hv(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Mn(fv(n,t.value),e,5,[n])};return t.value=s,t.attached=dv(),t}function fv(s,e){if(_e(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const Vu=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,pv=(s,e,t,n,i,r)=>{const o=i==="svg";e==="class"?nv(s,n,o):e==="style"?rv(s,t,n):Bo(e)?lc(e)||lv(s,e,t,n,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):gv(s,e,n,o))?(Hu(s,e,n),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&qu(s,e,n,o,r,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!tt(n))?Hu(s,$t(e),n,r,e):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),qu(s,e,n,o))};function gv(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&Vu(e)&&Ae(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=s.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Vu(e)&&tt(t)?!1:e in s}const zu=s=>{const e=s.props["onUpdate:modelValue"]||!1;return _e(e)?t=>oo(e,t):e};function mv(s){s.target.composing=!0}function Wu(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Oa=Symbol("_assign"),yv={created(s,{modifiers:{lazy:e,trim:t,number:n}},i){s[Oa]=zu(i);const r=n||i.props&&i.props.type==="number";Zs(s,e?"change":"input",o=>{if(o.target.composing)return;let a=s.value;t&&(a=a.trim()),r&&(a=ll(a)),s[Oa](a)}),t&&Zs(s,"change",()=>{s.value=s.value.trim()}),e||(Zs(s,"compositionstart",mv),Zs(s,"compositionend",Wu),Zs(s,"change",Wu))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:r}},o){if(s[Oa]=zu(o),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?ll(s.value):s.value,l=e??"";a!==l&&(document.activeElement===s&&s.type!=="range"&&(n&&e===t||i&&s.value.trim()===l)||(s.value=l))}},vv=["ctrl","shift","alt","meta"],bv={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>vv.some(t=>s[`${t}Key`]&&!e.includes(t))},ta=(s,e)=>{const t=s._withMods||(s._withMods={}),n=e.join(".");return t[n]||(t[n]=(i,...r)=>{for(let o=0;o<e.length;o++){const a=bv[e[o]];if(a&&a(i,e))return}return s(i,...r)})},wv={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Sc=(s,e)=>{const t=s._withKeys||(s._withKeys={}),n=e.join(".");return t[n]||(t[n]=i=>{if(!("key"in i))return;const r=ws(i.key);if(e.some(o=>o===r||wv[o]===r))return s(i)})},_v=_t({patchProp:pv},ev);let Gu;function Av(){return Gu||(Gu=Ty(_v))}const xv=(...s)=>{const e=Av().createApp(...s),{mount:t}=e;return e.mount=n=>{const i=Cv(n);if(!i)return;const r=e._component;!Ae(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,Sv(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Sv(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function Cv(s){return tt(s)?document.querySelector(s):s}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let jf;const na=s=>jf=s,Uf=Symbol();function _l(s){return s&&typeof s=="object"&&Object.prototype.toString.call(s)==="[object Object]"&&typeof s.toJSON!="function"}var Qi;(function(s){s.direct="direct",s.patchObject="patch object",s.patchFunction="patch function"})(Qi||(Qi={}));function Ev(){const s=jo(!0),e=s.run(()=>Q({}));let t=[],n=[];const i=Ko({install(r){na(i),i._a=r,r.provide(Uf,i),r.config.globalProperties.$pinia=i,n.forEach(o=>t.push(o)),n=[]},use(r){return this._a?t.push(r):n.push(r),this},_p:t,_a:null,_e:s,_s:new Map,state:e});return i}const Vf=()=>{};function Ku(s,e,t,n=Vf){s.push(e);const i=()=>{const r=s.indexOf(e);r>-1&&(s.splice(r,1),n())};return!t&&Ar()&&Uo(i),i}function Gs(s,...e){s.slice().forEach(t=>{t(...e)})}const Tv=s=>s(),Xu=Symbol(),La=Symbol();function Al(s,e){s instanceof Map&&e instanceof Map?e.forEach((t,n)=>s.set(n,t)):s instanceof Set&&e instanceof Set&&e.forEach(s.add,s);for(const t in e){if(!e.hasOwnProperty(t))continue;const n=e[t],i=s[t];_l(i)&&_l(n)&&s.hasOwnProperty(t)&&!Ue(n)&&!zn(n)?s[t]=Al(i,n):s[t]=n}return s}const Pv=Symbol();function kv(s){return!_l(s)||!Object.prototype.hasOwnProperty.call(s,Pv)}const{assign:is}=Object;function Mv(s){return!!(Ue(s)&&s.effect)}function Rv(s,e,t,n){const{state:i,actions:r,getters:o}=e,a=t.state.value[s];let l;function c(){a||(t.state.value[s]=i?i():{});const u=rn(t.state.value[s]);return is(u,r,Object.keys(o||{}).reduce((d,h)=>(d[h]=Ko(G(()=>{na(t);const f=t._s.get(s);return o[h].call(f,f)})),d),{}))}return l=zf(s,c,e,t,n,!0),l}function zf(s,e,t={},n,i,r){let o;const a=is({actions:{}},t),l={deep:!0};let c,u,d=[],h=[],f;const p=n.state.value[s];!r&&!p&&(n.state.value[s]={}),Q({});let g;function m(E){let C;c=u=!1,typeof E=="function"?(E(n.state.value[s]),C={type:Qi.patchFunction,storeId:s,events:f}):(Al(n.state.value[s],E),C={type:Qi.patchObject,payload:E,storeId:s,events:f});const M=g=Symbol();st().then(()=>{g===M&&(c=!0)}),u=!0,Gs(d,C,n.state.value[s])}const y=r?function(){const{state:C}=t,M=C?C():{};this.$patch(O=>{is(O,M)})}:Vf;function _(){o.stop(),d=[],h=[],n._s.delete(s)}const w=(E,C="")=>{if(Xu in E)return E[La]=C,E;const M=function(){na(n);const O=Array.from(arguments),W=[],se=[];function z($){W.push($)}function oe($){se.push($)}Gs(h,{args:O,name:M[La],store:S,after:z,onError:oe});let q;try{q=E.apply(this&&this.$id===s?this:S,O)}catch($){throw Gs(se,$),$}return q instanceof Promise?q.then($=>(Gs(W,$),$)).catch($=>(Gs(se,$),Promise.reject($))):(Gs(W,q),q)};return M[Xu]=!0,M[La]=C,M},A={_p:n,$id:s,$onAction:Ku.bind(null,h),$patch:m,$reset:y,$subscribe(E,C={}){const M=Ku(d,E,C.detached,()=>O()),O=o.run(()=>He(()=>n.state.value[s],W=>{(C.flush==="sync"?u:c)&&E({storeId:s,type:Qi.direct,events:f},W)},is({},l,C)));return M},$dispose:_},S=dt(A);n._s.set(s,S);const x=(n._a&&n._a.runWithContext||Tv)(()=>n._e.run(()=>(o=jo()).run(()=>e({action:w}))));for(const E in x){const C=x[E];if(Ue(C)&&!Mv(C)||zn(C))r||(p&&kv(C)&&(Ue(C)?C.value=p[E]:Al(C,p[E])),n.state.value[s][E]=C);else if(typeof C=="function"){const M=w(C,E);x[E]=M,a.actions[E]=C}}return is(S,x),is(Le(S),x),Object.defineProperty(S,"$state",{get:()=>n.state.value[s],set:E=>{m(C=>{is(C,E)})}}),n._p.forEach(E=>{is(S,o.run(()=>E({store:S,app:n._a,pinia:n,options:a})))}),p&&r&&t.hydrate&&t.hydrate(S.$state,p),c=!0,u=!0,S}/*! #__NO_SIDE_EFFECTS__ */function Er(s,e,t){let n;const i=typeof e=="function";n=i?t:e;function r(o,a){const l=bc();return o=o||(l?Gt(Uf,null):null),o&&na(o),o=jf,o._s.has(s)||(i?zf(s,e,n,o):Rv(s,n,o)),o._s.get(s)}return r.$id=s,r}function Hr(s){const e=Le(s),t={};for(const n in e){const i=e[n];i.effect?t[n]=G({get:()=>s[n],set(r){s[n]=r}}):(Ue(i)||zn(i))&&(t[n]=gc(s,n))}return t}function Yu(s){return typeof s=="string"?`'${s}'`:new Dv().serialize(s)}const Dv=function(){class s{#e=new Map;compare(t,n){const i=typeof t,r=typeof n;return i==="string"&&r==="string"?t.localeCompare(n):i==="number"&&r==="number"?t-n:String.prototype.localeCompare.call(this.serialize(t,!0),this.serialize(n,!0))}serialize(t,n){if(t===null)return"null";switch(typeof t){case"string":return n?t:`'${t}'`;case"bigint":return`${t}n`;case"object":return this.$object(t);case"function":return this.$function(t)}return String(t)}serializeObject(t){const n=Object.prototype.toString.call(t);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),t);const i=t.constructor,r=i===Object||i===void 0?"":i.name;if(r!==""&&globalThis[r]===i)return this.serializeBuiltInType(r,t);if(typeof t.toJSON=="function"){const o=t.toJSON();return r+(o!==null&&typeof o=="object"?this.$object(o):`(${this.serialize(o)})`)}return this.serializeObjectEntries(r,Object.entries(t))}serializeBuiltInType(t,n){const i=this["$"+t];if(i)return i.call(this,n);if(typeof n?.entries=="function")return this.serializeObjectEntries(t,n.entries());throw new Error(`Cannot serialize ${t}`)}serializeObjectEntries(t,n){const i=Array.from(n).sort((o,a)=>this.compare(o[0],a[0]));let r=`${t}{`;for(let o=0;o<i.length;o++){const[a,l]=i[o];r+=`${this.serialize(a,!0)}:${this.serialize(l)}`,o<i.length-1&&(r+=",")}return r+"}"}$object(t){let n=this.#e.get(t);return n===void 0&&(this.#e.set(t,`#${this.#e.size}`),n=this.serializeObject(t),this.#e.set(t,n)),n}$function(t){const n=Function.prototype.toString.call(t);return n.slice(-15)==="[native code] }"?`${t.name||""}()[native]`:`${t.name}(${t.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(t){let n="[";for(let i=0;i<t.length;i++)n+=this.serialize(t[i]),i<t.length-1&&(n+=",");return n+"]"}$Date(t){try{return`Date(${t.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(t){return`ArrayBuffer[${new Uint8Array(t).join(",")}]`}$Set(t){return`Set${this.$Array(Array.from(t).sort((n,i)=>this.compare(n,i)))}`}$Map(t){return this.serializeObjectEntries("Map",t.entries())}}for(const e of["Error","RegExp","URL"])s.prototype["$"+e]=function(t){return`${e}(${t})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])s.prototype["$"+e]=function(t){return`${e}[${t.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])s.prototype["$"+e]=function(t){return`${e}[${t.join("n,")}${t.length>0?"n":""}]`};return s}();function ur(s,e){return s===e||Yu(s)===Yu(e)}function At(s,e){const t=typeof s=="string"&&!e?`${s}Context`:e,n=Symbol(t);return[o=>{const a=Gt(n,o);if(a||a===null)return a;throw new Error(`Injection \`${n.toString()}\` not found. Component must be used within ${Array.isArray(s)?`one of the following components: ${s.join(", ")}`:`\`${s}\``}`)},o=>(di(n,o),o)]}function Nt(){let s=document.activeElement;if(s==null)return null;for(;s!=null&&s.shadowRoot!=null&&s.shadowRoot.activeElement!=null;)s=s.shadowRoot.activeElement;return s}function Wf(s,e,t){const n=t.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&n.addEventListener(s,e,{once:!0}),n.dispatchEvent(i)}function xl(s){return s==null}function Sl(s,e){return xl(s)?!1:Array.isArray(s)?s.some(t=>ur(t,e)):ur(s,e)}function Cc(s){return s?s.flatMap(e=>e.type===lt?Cc(e.children):[e]):[]}const Iv=["INPUT","TEXTAREA"];function Gf(s,e,t,n={}){if(!e||n.enableIgnoredElement&&Iv.includes(e.nodeName))return null;const{arrowKeyOptions:i="both",attributeName:r="[data-reka-collection-item]",itemsArray:o=[],loop:a=!0,dir:l="ltr",preventScroll:c=!0,focus:u=!1}=n,[d,h,f,p,g,m]=[s.key==="ArrowRight",s.key==="ArrowLeft",s.key==="ArrowUp",s.key==="ArrowDown",s.key==="Home",s.key==="End"],y=f||p,_=d||h;if(!g&&!m&&(!y&&!_||i==="vertical"&&_||i==="horizontal"&&y))return null;const w=t?Array.from(t.querySelectorAll(r)):o;if(!w.length)return null;c&&s.preventDefault();let A=null;return _||y?A=Kf(w,e,{goForward:y?p:l==="ltr"?d:h,loop:a}):g?A=w.at(0)||null:m&&(A=w.at(-1)||null),u&&A?.focus(),A}function Kf(s,e,t,n=s.length){if(--n===0)return null;const i=s.indexOf(e),r=t.goForward?i+1:i-1;if(!t.loop&&(r<0||r>=s.length))return null;const o=(r+s.length)%s.length,a=s[o];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?Kf(s,a,t,n):a:null}const[Xf,hP]=At("ConfigProvider");function Ov(s,e){var t;const n=cn();return Yt(()=>{n.value=s()},{...e,flush:(t=void 0)!=null?t:"sync"}),xi(n)}function Tr(s){return Ar()?(Uo(s),!0):!1}function Lv(){const s=new Set,e=r=>{s.delete(r)};return{on:r=>{s.add(r);const o=()=>e(r);return Tr(o),{off:o}},off:e,trigger:(...r)=>Promise.all(Array.from(s).map(o=>o(...r))),clear:()=>{s.clear()}}}function Fv(s){let e=!1,t;const n=jo(!0);return(...i)=>(e||(t=n.run(()=>s(...i)),e=!0),t)}function Yf(s){let e=0,t,n;const i=()=>{e-=1,n&&e<=0&&(n.stop(),t=void 0,n=void 0)};return(...r)=>(e+=1,n||(n=jo(!0),t=n.run(()=>s(...r))),Tr(i),t)}const es=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Bv=s=>typeof s<"u",Nv=Object.prototype.toString,$v=s=>Nv.call(s)==="[object Object]",Ju=qv();function qv(){var s,e;return es&&((s=window?.navigator)==null?void 0:s.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Hv(s){return Mt()}function Fa(s){return Array.isArray(s)?s:[s]}function Jf(s,e=1e4){return nf((t,n)=>{let i=Ze(s),r;const o=()=>setTimeout(()=>{i=Ze(s),n()},Ze(e));return Tr(()=>{clearTimeout(r)}),{get(){return t(),i},set(a){i=a,n(),clearTimeout(r),r=o()}}})}const jv=Ze;function Uv(s,e){Hv()&&Ao(s,e)}function Zf(s,e,t={}){const{immediate:n=!0,immediateCallback:i=!1}=t,r=cn(!1);let o=null;function a(){o&&(clearTimeout(o),o=null)}function l(){r.value=!1,a()}function c(...u){i&&s(),a(),r.value=!0,o=setTimeout(()=>{r.value=!1,o=null,s(...u)},Ze(e))}return n&&(r.value=!0,es&&c()),Tr(l),{isPending:xi(r),start:c,stop:l}}function Vv(s,e,t){return He(s,e,{...t,immediate:!0})}const Ec=es?window:void 0;function $s(s){var e;const t=Ze(s);return(e=t?.$el)!=null?e:t}function Os(...s){const e=[],t=()=>{e.forEach(a=>a()),e.length=0},n=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),i=G(()=>{const a=Fa(Ze(s[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),r=Vv(()=>{var a,l;return[(l=(a=i.value)==null?void 0:a.map(c=>$s(c)))!=null?l:[Ec].filter(c=>c!=null),Fa(Ze(i.value?s[1]:s[0])),Fa(v(i.value?s[2]:s[1])),Ze(i.value?s[3]:s[2])]},([a,l,c,u])=>{if(t(),!a?.length||!l?.length||!c?.length)return;const d=$v(u)?{...u}:u;e.push(...a.flatMap(h=>l.flatMap(f=>c.map(p=>n(h,f,p,d)))))},{flush:"post"}),o=()=>{r(),t()};return Tr(t),o}function zv(){const s=cn(!1),e=Mt();return e&&Ht(()=>{s.value=!0},e),s}function Wv(s){return typeof s=="function"?s:typeof s=="string"?e=>e.key===s:Array.isArray(s)?e=>s.includes(e.key):()=>!0}function Gv(...s){let e,t,n={};s.length===3?(e=s[0],t=s[1],n=s[2]):s.length===2?typeof s[1]=="object"?(e=!0,t=s[0],n=s[1]):(e=s[0],t=s[1]):(e=!0,t=s[0]);const{target:i=Ec,eventName:r="keydown",passive:o=!1,dedupe:a=!1}=n,l=Wv(e);return Os(i,r,u=>{u.repeat&&Ze(a)||l(u)&&t(u)},o)}function Kv(s){return JSON.parse(JSON.stringify(s))}function _s(s,e,t,n={}){var i,r,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d,shouldEmit:h}=n,f=Mt(),p=t||f?.emit||((i=f?.$emit)==null?void 0:i.bind(f))||((o=(r=f?.proxy)==null?void 0:r.$emit)==null?void 0:o.bind(f?.proxy));let g=c;e||(e="modelValue"),g=g||`update:${e.toString()}`;const m=w=>a?typeof a=="function"?a(w):Kv(w):w,y=()=>Bv(s[e])?m(s[e]):d,_=w=>{h?h(w)&&p(g,w):p(g,w)};if(l){const w=y(),A=Q(w);let S=!1;return He(()=>s[e],b=>{S||(S=!0,A.value=m(b),st(()=>S=!1))}),He(A,b=>{!S&&(b!==s[e]||u)&&_(b)},{deep:u}),A}else return G({get(){return y()},set(w){_(w)}})}function Ba(s){if(s===null||typeof s!="object")return!1;const e=Object.getPrototypeOf(s);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in s?!1:Symbol.toStringTag in s?Object.prototype.toString.call(s)==="[object Module]":!0}function Cl(s,e,t=".",n){if(!Ba(e))return Cl(s,{},t,n);const i=Object.assign({},e);for(const r in s){if(r==="__proto__"||r==="constructor")continue;const o=s[r];o!=null&&(n&&n(i,r,o,t)||(Array.isArray(o)&&Array.isArray(i[r])?i[r]=[...o,...i[r]]:Ba(o)&&Ba(i[r])?i[r]=Cl(o,i[r],(t?`${t}.`:"")+r.toString(),n):i[r]=o))}return i}function Xv(s){return(...e)=>e.reduce((t,n)=>Cl(t,n,"",s),{})}const Yv=Xv(),Jv=Yf(()=>{const s=Q(new Map),e=Q(),t=G(()=>{for(const o of s.value.values())if(o)return!0;return!1}),n=Xf({scrollBody:Q(!0)});let i=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",Ju&&i?.(),e.value=void 0};return He(t,(o,a)=>{if(!es)return;if(!o){a&&r();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=n.scrollBody?.value?typeof n.scrollBody.value=="object"?Yv({padding:n.scrollBody.value.padding===!0?l:n.scrollBody.value.padding,margin:n.scrollBody.value.margin===!0?l:n.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),Ju&&(i=Os(document,"touchmove",d=>Zv(d),{passive:!1})),st(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),s});function Qf(s){const e=Math.random().toString(36).substring(2,7),t=Jv();t.value.set(e,s??!1);const n=G({get:()=>t.value.get(e)??!1,set:i=>t.value.set(e,i)});return Uv(()=>{t.value.delete(e)}),n}function ep(s){const e=window.getComputedStyle(s);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&s.clientWidth<s.scrollWidth||e.overflowY==="auto"&&s.clientHeight<s.scrollHeight)return!0;{const t=s.parentNode;return!(t instanceof Element)||t.tagName==="BODY"?!1:ep(t)}}function Zv(s){const e=s||window.event,t=e.target;return t instanceof Element&&ep(t)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function sa(s){const e=Xf({dir:Q("ltr")});return G(()=>s?.value||e.dir?.value||"ltr")}function Pr(s){const e=Mt(),t=e?.type.emits,n={};return t?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),t?.forEach(i=>{n[Wi($t(i))]=(...r)=>s(i,...r)}),n}let Na=0;function Qv(){Yt(s=>{if(!es)return;const e=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",e[0]??Zu()),document.body.insertAdjacentElement("beforeend",e[1]??Zu()),Na++,s(()=>{Na===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(t=>t.remove()),Na--})})}function Zu(){const s=document.createElement("span");return s.setAttribute("data-reka-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}function eb(s){return G(()=>jv(s)?!!$s(s)?.closest("form"):!0)}function Pe(){const s=Mt(),e=Q(),t=G(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:$s(e)),n=Object.assign({},s.exposed),i={};for(const o in s.props)Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>s.props[o]});if(Object.keys(n).length>0)for(const o in n)Object.defineProperty(i,o,{enumerable:!0,configurable:!0,get:()=>n[o]});Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>s.vnode.el}),s.exposed=i;function r(o){e.value=o,o&&(Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),s.exposed=i)}return{forwardRef:r,currentRef:e,currentElement:t}}function qs(s){const e=Mt(),t=Object.keys(e?.type.props??{}).reduce((i,r)=>{const o=(e?.type.props[r]).default;return o!==void 0&&(i[r]=o),i},{}),n=gc(s);return G(()=>{const i={},r=e?.vnode.props??{};return Object.keys(r).forEach(o=>{i[$t(o)]=r[o]}),Object.keys({...t,...i}).reduce((o,a)=>(n.value[a]!==void 0&&(o[a]=n.value[a]),o),{})})}function Jt(s,e){const t=qs(s),n=e?Pr(e):{};return G(()=>({...t.value,...n}))}function tb(s,e){const t=Jf(!1,300),n=Q(null),i=Lv();function r(){n.value=null,t.value=!1}function o(a,l){const c=a.currentTarget,u={x:a.clientX,y:a.clientY},d=nb(u,c.getBoundingClientRect()),h=sb(u,d),f=ib(l.getBoundingClientRect()),p=ob([...h,...f]);n.value=p,t.value=!0}return Yt(a=>{if(s.value&&e.value){const l=u=>o(u,e.value),c=u=>o(u,s.value);s.value.addEventListener("pointerleave",l),e.value.addEventListener("pointerleave",c),a(()=>{s.value?.removeEventListener("pointerleave",l),e.value?.removeEventListener("pointerleave",c)})}}),Yt(a=>{if(n.value){const l=c=>{if(!n.value||!(c.target instanceof HTMLElement))return;const u=c.target,d={x:c.clientX,y:c.clientY},h=s.value?.contains(u)||e.value?.contains(u),f=!rb(d,n.value),p=!!u.closest("[data-grace-area-trigger]");h?r():(f||p)&&(r(),i.trigger())};s.value?.ownerDocument.addEventListener("pointermove",l),a(()=>s.value?.ownerDocument.removeEventListener("pointermove",l))}}),{isPointerInTransit:t,onPointerExit:i.on}}function nb(s,e){const t=Math.abs(e.top-s.y),n=Math.abs(e.bottom-s.y),i=Math.abs(e.right-s.x),r=Math.abs(e.left-s.x);switch(Math.min(t,n,i,r)){case r:return"left";case i:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function sb(s,e,t=5){const n=[];switch(e){case"top":n.push({x:s.x-t,y:s.y+t},{x:s.x+t,y:s.y+t});break;case"bottom":n.push({x:s.x-t,y:s.y-t},{x:s.x+t,y:s.y-t});break;case"left":n.push({x:s.x+t,y:s.y-t},{x:s.x+t,y:s.y+t});break;case"right":n.push({x:s.x-t,y:s.y-t},{x:s.x-t,y:s.y+t});break}return n}function ib(s){const{top:e,right:t,bottom:n,left:i}=s;return[{x:i,y:e},{x:t,y:e},{x:t,y:n},{x:i,y:n}]}function rb(s,e){const{x:t,y:n}=s;let i=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r].x,l=e[r].y,c=e[o].x,u=e[o].y;l>n!=u>n&&t<(c-a)*(n-l)/(u-l)+a&&(i=!i)}return i}function ob(s){const e=s.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),ab(e)}function ab(s){if(s.length<=1)return s.slice();const e=[];for(let n=0;n<s.length;n++){const i=s[n];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(i.y-o.y)>=(r.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let n=s.length-1;n>=0;n--){const i=s[n];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(i.y-o.y)>=(r.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var lb=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},Ks=new WeakMap,jr=new WeakMap,Ur={},$a=0,tp=function(s){return s&&(s.host||tp(s.parentNode))},cb=function(s,e){return e.map(function(t){if(s.contains(t))return t;var n=tp(t);return n&&s.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},ub=function(s,e,t,n){var i=cb(e,Array.isArray(s)?s:[s]);Ur[t]||(Ur[t]=new WeakMap);var r=Ur[t],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(n),p=f!==null&&f!=="false",g=(Ks.get(h)||0)+1,m=(r.get(h)||0)+1;Ks.set(h,g),r.set(h,m),o.push(h),g===1&&p&&jr.set(h,!0),m===1&&h.setAttribute(t,"true"),p||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),$a++,function(){o.forEach(function(d){var h=Ks.get(d)-1,f=r.get(d)-1;Ks.set(d,h),r.set(d,f),h||(jr.has(d)||d.removeAttribute(n),jr.delete(d)),f||d.removeAttribute(t)}),$a--,$a||(Ks=new WeakMap,Ks=new WeakMap,jr=new WeakMap,Ur={})}},db=function(s,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),i=lb(s);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),ub(n,i,t,"aria-hidden")):function(){return null}};function np(s){let e;He(()=>$s(s),t=>{t?e=db(t):e&&e()}),Ns(()=>{e&&e()})}function gs(s,e="reka"){return`${e}-${Jm?.()}`}function hb(s){const e=Q(),t=G(()=>e.value?.width??0),n=G(()=>e.value?.height??0);return Ht(()=>{const i=$s(s);if(i){e.value={width:i.offsetWidth,height:i.offsetHeight};const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let l,c;if("borderBoxSize"in a){const u=a.borderBoxSize,d=Array.isArray(u)?u[0]:u;l=d.inlineSize,c=d.blockSize}else l=i.offsetWidth,c=i.offsetHeight;e.value={width:l,height:c}});return r.observe(i,{box:"border-box"}),()=>r.unobserve(i)}else e.value=void 0}),{width:t,height:n}}function fb(s,e){const t=Q(s);function n(r){return e[t.value][r]??t.value}return{state:t,dispatch:r=>{t.value=n(r)}}}function pb(s){const e=Jf("",1e3);return{search:e,handleTypeaheadSearch:(i,r)=>{e.value=e.value+i;{const o=Nt(),a=r.map(h=>({...h,textValue:h.value?.textValue??h.ref.textContent?.trim()??""})),l=a.find(h=>h.ref===o),c=a.map(h=>h.textValue),u=mb(c,e.value,l?.textValue),d=a.find(h=>h.textValue===u);return d&&d.ref.focus(),d?.ref}},resetTypeahead:()=>{e.value=""}}}function gb(s,e){return s.map((t,n)=>s[(e+n)%s.length])}function mb(s,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?s.indexOf(t):-1;let o=gb(s,Math.max(r,0));i.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function yb(s,e){const t=Q({}),n=Q("none"),i=Q(s),r=s.value?"mounted":"unmounted";let o;const a=e.value?.ownerDocument.defaultView??Ec,{state:l,dispatch:c}=fb(r,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=m=>{if(es){const y=new CustomEvent(m,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(y)}};He(s,async(m,y)=>{const _=y!==m;if(await st(),_){const w=n.value,A=Vr(e.value);m?(c("MOUNT"),u("enter"),A==="none"&&u("after-enter")):A==="none"||A==="undefined"||t.value?.display==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):y&&w!==A?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const d=m=>{const y=Vr(e.value),_=y.includes(m.animationName),w=l.value==="mounted"?"enter":"leave";if(m.target===e.value&&_&&(u(`after-${w}`),c("ANIMATION_END"),!i.value)){const A=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=A)})}m.target===e.value&&y==="none"&&c("ANIMATION_END")},h=m=>{m.target===e.value&&(n.value=Vr(e.value))},f=He(e,(m,y)=>{m?(t.value=getComputedStyle(m),m.addEventListener("animationstart",h),m.addEventListener("animationcancel",d),m.addEventListener("animationend",d)):(c("ANIMATION_END"),o!==void 0&&a?.clearTimeout(o),y?.removeEventListener("animationstart",h),y?.removeEventListener("animationcancel",d),y?.removeEventListener("animationend",d))},{immediate:!0}),p=He(l,()=>{const m=Vr(e.value);n.value=l.value==="mounted"?m:"none"});return Ns(()=>{f(),p()}),{isPresent:G(()=>["mounted","unmountSuspended"].includes(l.value))}}function Vr(s){return s&&getComputedStyle(s).animationName||"none"}var Si=V({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(s,{slots:e,expose:t}){const{present:n,forceMount:i}=rn(s),r=Q(),{isPresent:o}=yb(n,r);t({present:o});let a=e.default({present:o.value});a=Cc(a||[]);const l=Mt();if(a&&a?.length>1){const c=l?.parent?.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}return()=>i.value||n.value||o.value?Kt(e.default({present:o.value})[0],{ref:c=>{const u=$s(c);return typeof u?.hasAttribute>"u"||(u?.hasAttribute("data-reka-popper-content-wrapper")?r.value=u.firstElementChild:r.value=u),u}}):null}});const El=V({name:"PrimitiveSlot",inheritAttrs:!1,setup(s,{attrs:e,slots:t}){return()=>{if(!t.default)return null;const n=Cc(t.default()),i=n.findIndex(l=>l.type!==dn);if(i===-1)return n;const r=n[i];delete r.props?.ref;const o=r.props?ye(e,r.props):e,a=Is({...r,props:{}},o);return n.length===1?a:(n[i]=a,n)}}}),vb=["area","img","input"],Xe=V({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(s,{attrs:e,slots:t}){const n=s.asChild?"template":s.as;return typeof n=="string"&&vb.includes(n)?()=>Kt(n,e):n!=="template"?()=>Kt(s.as,e,{default:t.default}):()=>Kt(El,e,{default:t.default})}});function Tl(){const s=Q(),e=G(()=>["#text","#comment"].includes(s.value?.$el.nodeName)?s.value?.$el.nextElementSibling:$s(s));return{primitiveElement:s,currentElement:e}}const[sp,bb]=At("CollapsibleRoot");var wb=V({__name:"CollapsibleRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["update:open"],setup(s,{expose:e,emit:t}){const n=s,r=_s(n,"open",t,{defaultValue:n.defaultOpen,passive:n.open===void 0}),{disabled:o,unmountOnHide:a}=rn(n);return bb({contentId:"",disabled:o,open:r,unmountOnHide:a,onOpenToggle:()=>{o.value||(r.value=!r.value)}}),e({open:r}),Pe(),(l,c)=>(F(),K(v(Xe),{as:l.as,"as-child":n.asChild,"data-state":v(r)?"open":"closed","data-disabled":v(o)?"":void 0},{default:I(()=>[J(l.$slots,"default",{open:v(r)})]),_:3},8,["as","as-child","data-state","data-disabled"]))}}),_b=wb,Ab=V({inheritAttrs:!1,__name:"CollapsibleContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["contentFound"],setup(s,{emit:e}){const t=s,n=e,i=sp();i.contentId||=gs(void 0,"reka-collapsible-content");const r=Q(),{forwardRef:o,currentElement:a}=Pe(),l=Q(0),c=Q(0),u=G(()=>i.open.value),d=Q(u.value),h=Q();He(()=>[u.value,r.value?.present],async()=>{await st();const p=a.value;if(!p)return;h.value=h.value||{transitionDuration:p.style.transitionDuration,animationName:p.style.animationName},p.style.transitionDuration="0s",p.style.animationName="none";const g=p.getBoundingClientRect();c.value=g.height,l.value=g.width,d.value||(p.style.transitionDuration=h.value.transitionDuration,p.style.animationName=h.value.animationName)},{immediate:!0});const f=G(()=>d.value&&i.open.value);return Ht(()=>{requestAnimationFrame(()=>{d.value=!1})}),Os(a,"beforematch",p=>{requestAnimationFrame(()=>{i.onOpenToggle(),n("contentFound")})}),(p,g)=>(F(),K(v(Si),{ref_key:"presentRef",ref:r,present:p.forceMount||v(i).open.value,"force-mount":!0},{default:I(({present:m})=>[B(v(Xe),ye(p.$attrs,{id:v(i).contentId,ref:v(o),"as-child":t.asChild,as:p.as,hidden:m?void 0:v(i).unmountOnHide.value?"":"until-found","data-state":f.value?void 0:v(i).open.value?"open":"closed","data-disabled":v(i).disabled?.value?"":void 0,style:{"--reka-collapsible-content-height":`${c.value}px`,"--reka-collapsible-content-width":`${l.value}px`}}),{default:I(()=>[!v(i).unmountOnHide.value||m?J(p.$slots,"default",{key:0}):Wn("v-if",!0)]),_:2},1040,["id","as-child","as","hidden","data-state","data-disabled","style"])]),_:3},8,["present"]))}}),xb=Ab,Sb=V({__name:"CollapsibleTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const e=s;Pe();const t=sp();return(n,i)=>(F(),K(v(Xe),{type:n.as==="button"?"button":void 0,as:n.as,"as-child":e.asChild,"aria-controls":v(t).contentId,"aria-expanded":v(t).open.value,"data-state":v(t).open.value?"open":"closed","data-disabled":v(t).disabled?.value?"":void 0,disabled:v(t).disabled?.value,onClick:v(t).onOpenToggle},{default:I(()=>[J(n.$slots,"default")]),_:3},8,["type","as","as-child","aria-controls","aria-expanded","data-state","data-disabled","disabled","onClick"]))}}),Cb=Sb;function Eb({type:s,defaultValue:e,modelValue:t}){const n=t||e;return t!==void 0||e!==void 0?Array.isArray(n)?"multiple":"single":s??"single"}function Tb({type:s,defaultValue:e,modelValue:t}){return s||Eb({type:s,defaultValue:e,modelValue:t})}function Pb({type:s,defaultValue:e}){return e!==void 0?e:s==="single"?void 0:[]}function kb(s,e){const t=G(()=>Tb(s)),n=_s(s,"modelValue",e,{defaultValue:Pb(s),passive:s.modelValue===void 0,deep:!0});function i(o){if(t.value==="single")n.value=ur(o,n.value)?void 0:o;else{const a=Array.isArray(n.value)?[...n.value||[]]:[n.value].filter(Boolean);if(Sl(a,o)){const l=a.findIndex(c=>ur(c,o));a.splice(l,1)}else a.push(o);n.value=a}}const r=G(()=>t.value==="single");return{modelValue:n,changeModelValue:i,isSingle:r}}const[ia,Mb]=At("AccordionRoot");var Rb=V({__name:"AccordionRoot",props:{collapsible:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},orientation:{type:String,required:!1,default:"vertical"},unmountOnHide:{type:Boolean,required:!1,default:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},type:{type:String,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,{dir:i,disabled:r,unmountOnHide:o}=rn(t),a=sa(i),{modelValue:l,changeModelValue:c,isSingle:u}=kb(t,n),{forwardRef:d,currentElement:h}=Pe();return Mb({disabled:r,direction:a,orientation:t.orientation,parentElement:h,isSingle:u,collapsible:t.collapsible,modelValue:l,changeModelValue:c,unmountOnHide:o}),(f,p)=>(F(),K(v(Xe),{ref:v(d),"as-child":f.asChild,as:f.as},{default:I(()=>[J(f.$slots,"default",{modelValue:v(l)})]),_:3},8,["as-child","as"]))}}),Db=Rb,Pl=function(s){return s.Open="open",s.Closed="closed",s}(Pl||{});const[Tc,Ib]=At("AccordionItem");var Ob=V({__name:"AccordionItem",props:{disabled:{type:Boolean,required:!1},value:{type:String,required:!0},unmountOnHide:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s,{expose:e}){const t=s,n=ia(),i=G(()=>n.isSingle.value?t.value===n.modelValue.value:Array.isArray(n.modelValue.value)&&n.modelValue.value.includes(t.value)),r=G(()=>n.disabled.value||t.disabled),o=G(()=>r.value?"":void 0),a=G(()=>i.value?Pl.Open:Pl.Closed);e({open:i,dataDisabled:o});const{currentRef:l,currentElement:c}=Pe();Ib({open:i,dataState:a,disabled:r,dataDisabled:o,triggerId:"",currentRef:l,currentElement:c,value:G(()=>t.value)});function u(d){const h=d.target;if(Array.from(n.parentElement.value?.querySelectorAll("[data-reka-collection-item]")??[]).findIndex(g=>g===h)===-1)return null;Gf(d,h,n.parentElement.value,{arrowKeyOptions:n.orientation,dir:n.direction.value,focus:!0})}return(d,h)=>(F(),K(v(_b),{"data-orientation":v(n).orientation,"data-disabled":o.value,"data-state":a.value,disabled:r.value,open:i.value,as:t.as,"as-child":t.asChild,"unmount-on-hide":v(n).unmountOnHide.value,onKeydown:Sc(u,["up","down","left","right","home","end"])},{default:I(()=>[J(d.$slots,"default",{open:i.value})]),_:3},8,["data-orientation","data-disabled","data-state","disabled","open","as","as-child","unmount-on-hide"]))}}),Lb=Ob,Fb=V({__name:"AccordionContent",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,t=ia(),n=Tc();return Pe(),(i,r)=>(F(),K(v(xb),{role:"region","as-child":e.asChild,as:i.as,"force-mount":e.forceMount,"aria-labelledby":v(n).triggerId,"data-state":v(n).dataState.value,"data-disabled":v(n).dataDisabled.value,"data-orientation":v(t).orientation,style:{"--reka-accordion-content-width":"var(--reka-collapsible-content-width)","--reka-accordion-content-height":"var(--reka-collapsible-content-height)"},onContentFound:r[0]||(r[0]=o=>v(t).changeModelValue(v(n).value.value))},{default:I(()=>[J(i.$slots,"default")]),_:3},8,["as-child","as","force-mount","aria-labelledby","data-state","data-disabled","data-orientation"]))}}),Bb=Fb,Nb=V({__name:"AccordionHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h3"}},setup(s){const e=s,t=ia(),n=Tc();return Pe(),(i,r)=>(F(),K(v(Xe),{as:e.as,"as-child":e.asChild,"data-orientation":v(t).orientation,"data-state":v(n).dataState.value,"data-disabled":v(n).dataDisabled.value},{default:I(()=>[J(i.$slots,"default")]),_:3},8,["as","as-child","data-orientation","data-state","data-disabled"]))}}),$b=Nb,qb=V({__name:"AccordionTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,t=ia(),n=Tc();n.triggerId||=gs(void 0,"reka-accordion-trigger");function i(){const r=t.isSingle.value&&n.open.value&&!t.collapsible;n.disabled.value||r||t.changeModelValue(n.value.value)}return(r,o)=>(F(),K(v(Cb),{id:v(n).triggerId,ref:v(n).currentRef,"data-reka-collection-item":"",as:e.as,"as-child":e.asChild,"aria-disabled":v(n).disabled.value||void 0,"aria-expanded":v(n).open.value||!1,"data-disabled":v(n).dataDisabled.value,"data-orientation":v(t).orientation,"data-state":v(n).dataState.value,disabled:v(n).disabled.value,onClick:i},{default:I(()=>[J(r.$slots,"default")]),_:3},8,["id","as","as-child","aria-disabled","aria-expanded","data-disabled","data-orientation","data-state","disabled"]))}}),Hb=qb;const[ts,jb]=At("DialogRoot");var Ub=V({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(s,{emit:e}){const t=s,i=_s(t,"open",e,{defaultValue:t.defaultOpen,passive:t.open===void 0}),r=Q(),o=Q(),{modal:a}=rn(t);return jb({open:i,modal:a,openModal:()=>{i.value=!0},onOpenChange:l=>{i.value=l},onOpenToggle:()=>{i.value=!i.value},contentId:"",titleId:"",descriptionId:"",triggerElement:r,contentElement:o}),(l,c)=>J(l.$slots,"default",{open:v(i),close:()=>i.value=!1})}}),Vb=Ub,zb=V({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const e=s;Pe();const t=ts();return(n,i)=>(F(),K(v(Xe),ye(e,{type:n.as==="button"?"button":void 0,onClick:i[0]||(i[0]=r=>v(t).onOpenChange(!1))}),{default:I(()=>[J(n.$slots,"default")]),_:3},16,["type"]))}}),Wb=zb;const Gb="dismissableLayer.pointerDownOutside",Kb="dismissableLayer.focusOutside";function ip(s,e){const t=e.closest("[data-dismissable-layer]"),n=s.dataset.dismissableLayer===""?s:s.querySelector("[data-dismissable-layer]"),i=Array.from(s.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(t&&(n===t||i.indexOf(n)<i.indexOf(t)))}function Xb(s,e,t=!0){const n=e?.value?.ownerDocument??globalThis?.document,i=Q(!1),r=Q(()=>{});return Yt(o=>{if(!es||!Ze(t))return;const a=async c=>{const u=c.target;if(!(!e?.value||!u)){if(ip(e.value,u)){i.value=!1;return}if(c.target&&!i.value){let h=function(){Wf(Gb,s,d)};const d={originalEvent:c};c.pointerType==="touch"?(n.removeEventListener("click",r.value),r.value=h,n.addEventListener("click",r.value,{once:!0})):h()}else n.removeEventListener("click",r.value);i.value=!1}},l=window.setTimeout(()=>{n.addEventListener("pointerdown",a)},0);o(()=>{window.clearTimeout(l),n.removeEventListener("pointerdown",a),n.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>{Ze(t)&&(i.value=!0)}}}function Yb(s,e,t=!0){const n=e?.value?.ownerDocument??globalThis?.document,i=Q(!1);return Yt(r=>{if(!es||!Ze(t))return;const o=async a=>{if(!e?.value)return;await st(),await st();const l=a.target;!e.value||!l||ip(e.value,l)||a.target&&!i.value&&Wf(Kb,s,{originalEvent:a})};n.addEventListener("focusin",o),r(()=>n.removeEventListener("focusin",o))}),{onFocusCapture:()=>{Ze(t)&&(i.value=!0)},onBlurCapture:()=>{Ze(t)&&(i.value=!1)}}}const Fn=dt({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var Jb=V({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(s,{emit:e}){const t=s,n=e,{forwardRef:i,currentElement:r}=Pe(),o=G(()=>r.value?.ownerDocument??globalThis.document),a=G(()=>Fn.layersRoot),l=G(()=>r.value?Array.from(a.value).indexOf(r.value):-1),c=G(()=>Fn.layersWithOutsidePointerEventsDisabled.size>0),u=G(()=>{const p=Array.from(a.value),[g]=[...Fn.layersWithOutsidePointerEventsDisabled].slice(-1),m=p.indexOf(g);return l.value>=m}),d=Xb(async p=>{const g=[...Fn.branches].some(m=>m?.contains(p.target));!u.value||g||(n("pointerDownOutside",p),n("interactOutside",p),await st(),p.defaultPrevented||n("dismiss"))},r),h=Yb(p=>{[...Fn.branches].some(m=>m?.contains(p.target))||(n("focusOutside",p),n("interactOutside",p),p.defaultPrevented||n("dismiss"))},r);Gv("Escape",p=>{l.value===a.value.size-1&&(n("escapeKeyDown",p),p.defaultPrevented||n("dismiss"))});let f;return Yt(p=>{r.value&&(t.disableOutsidePointerEvents&&(Fn.layersWithOutsidePointerEventsDisabled.size===0&&(f=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),Fn.layersWithOutsidePointerEventsDisabled.add(r.value)),a.value.add(r.value),p(()=>{t.disableOutsidePointerEvents&&Fn.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=f)}))}),Yt(p=>{p(()=>{r.value&&(a.value.delete(r.value),Fn.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(p,g)=>(F(),K(v(Xe),{ref:v(i),"as-child":p.asChild,as:p.as,"data-dismissable-layer":"",style:Zn({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:v(h).onFocusCapture,onBlurCapture:v(h).onBlurCapture,onPointerdownCapture:v(d).onPointerDownCapture},{default:I(()=>[J(p.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),Pc=Jb;const Zb=Fv(()=>Q([]));function Qb(){const s=Zb();return{add(e){const t=s.value[0];e!==t&&t?.pause(),s.value=Qu(s.value,e),s.value.unshift(e)},remove(e){s.value=Qu(s.value,e),s.value[0]?.resume()}}}function Qu(s,e){const t=[...s],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function ew(s){return s.filter(e=>e.tagName!=="A")}const qa="focusScope.autoFocusOnMount",Ha="focusScope.autoFocusOnUnmount",ed={bubbles:!1,cancelable:!0};function tw(s,{select:e=!1}={}){const t=Nt();for(const n of s)if(rs(n,{select:e}),Nt()!==t)return!0}function nw(s){const e=rp(s),t=td(e,s),n=td(e.reverse(),s);return[t,n]}function rp(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function td(s,e){for(const t of s)if(!sw(t,{upTo:e}))return t}function sw(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function iw(s){return s instanceof HTMLInputElement&&"select"in s}function rs(s,{select:e=!1}={}){if(s&&s.focus){const t=Nt();s.focus({preventScroll:!0}),s!==t&&iw(s)&&e&&s.select()}}var rw=V({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(s,{emit:e}){const t=s,n=e,{currentRef:i,currentElement:r}=Pe(),o=Q(null),a=Qb(),l=dt({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Yt(u=>{if(!es)return;const d=r.value;if(!t.trapped)return;function h(m){if(l.paused||!d)return;const y=m.target;d.contains(y)?o.value=y:rs(o.value,{select:!0})}function f(m){if(l.paused||!d)return;const y=m.relatedTarget;y!==null&&(d.contains(y)||rs(o.value,{select:!0}))}function p(m){d.contains(o.value)||rs(d)}document.addEventListener("focusin",h),document.addEventListener("focusout",f);const g=new MutationObserver(p);d&&g.observe(d,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",f),g.disconnect()})}),Yt(async u=>{const d=r.value;if(await st(),!d)return;a.add(l);const h=Nt();if(!d.contains(h)){const p=new CustomEvent(qa,ed);d.addEventListener(qa,g=>n("mountAutoFocus",g)),d.dispatchEvent(p),p.defaultPrevented||(tw(ew(rp(d)),{select:!0}),Nt()===h&&rs(d))}u(()=>{d.removeEventListener(qa,m=>n("mountAutoFocus",m));const p=new CustomEvent(Ha,ed),g=m=>{n("unmountAutoFocus",m)};d.addEventListener(Ha,g),d.dispatchEvent(p),setTimeout(()=>{p.defaultPrevented||rs(h??document.body,{select:!0}),d.removeEventListener(Ha,g),a.remove(l)},0)})});function c(u){if(!t.loop&&!t.trapped||l.paused)return;const d=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,h=Nt();if(d&&h){const f=u.currentTarget,[p,g]=nw(f);p&&g?!u.shiftKey&&h===g?(u.preventDefault(),t.loop&&rs(p,{select:!0})):u.shiftKey&&h===p&&(u.preventDefault(),t.loop&&rs(g,{select:!0})):h===f&&u.preventDefault()}}return(u,d)=>(F(),K(v(Xe),{ref_key:"currentRef",ref:i,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:I(()=>[J(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),op=rw;const ow="menu.itemSelect",kl=["Enter"," "],aw=["ArrowDown","PageUp","Home"],ap=["ArrowUp","PageDown","End"],lw=[...aw,...ap];[...kl],[...kl];function lp(s){return s?"open":"closed"}function cw(s){const e=Nt();for(const t of s)if(t===e||(t.focus(),Nt()!==e))return}function uw(s,e){const{x:t,y:n}=s;let i=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r].x,l=e[r].y,c=e[o].x,u=e[o].y;l>n!=u>n&&t<(c-a)*(n-l)/(u-l)+a&&(i=!i)}return i}function dw(s,e){if(!e)return!1;const t={x:s.clientX,y:s.clientY};return uw(t,e)}function Ml(s){return s.pointerType==="mouse"}var hw=V({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const t=s,n=e,i=ts(),{forwardRef:r,currentElement:o}=Pe();return i.titleId||=gs(void 0,"reka-dialog-title"),i.descriptionId||=gs(void 0,"reka-dialog-description"),Ht(()=>{i.contentElement=o,Nt()!==document.body&&(i.triggerElement.value=Nt())}),(a,l)=>(F(),K(v(op),{"as-child":"",loop:"",trapped:t.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>n("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>n("closeAutoFocus",c))},{default:I(()=>[B(v(Pc),ye({id:v(i).contentId,ref:v(r),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":v(i).descriptionId,"aria-labelledby":v(i).titleId,"data-state":v(lp)(v(i).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>v(i).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>n("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>n("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>n("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>n("pointerDownOutside",c))}),{default:I(()=>[J(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),cp=hw,fw=V({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const t=s,n=e,i=ts(),r=Pr(n),{forwardRef:o,currentElement:a}=Pe();return np(a),(l,c)=>(F(),K(cp,ye({...t,...v(r)},{ref:v(o),"trap-focus":v(i).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(u.preventDefault(),v(i).triggerElement.value?.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const d=u.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0;(d.button===2||h)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:I(()=>[J(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),pw=fw,gw=V({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const t=s,i=Pr(e);Pe();const r=ts(),o=Q(!1),a=Q(!1);return(l,c)=>(F(),K(cp,ye({...t,...v(i)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(o.value||v(r).triggerElement.value?.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const d=u.target;v(r).triggerElement.value?.contains(d)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:I(()=>[J(l.$slots,"default")]),_:3},16))}}),mw=gw,yw=V({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const t=s,n=e,i=ts(),r=Pr(n),{forwardRef:o}=Pe();return(a,l)=>(F(),K(v(Si),{present:a.forceMount||v(i).open.value},{default:I(()=>[v(i).modal.value?(F(),K(pw,ye({key:0,ref:v(o)},{...t,...v(r),...a.$attrs}),{default:I(()=>[J(a.$slots,"default")]),_:3},16)):(F(),K(mw,ye({key:1,ref:v(o)},{...t,...v(r),...a.$attrs}),{default:I(()=>[J(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),vw=yw,bw=V({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(s){const e=s;Pe();const t=ts();return(n,i)=>(F(),K(v(Xe),ye(e,{id:v(t).descriptionId}),{default:I(()=>[J(n.$slots,"default")]),_:3},16,["id"]))}}),ww=bw,_w=V({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=ts();return Qf(!0),Pe(),(t,n)=>(F(),K(v(Xe),{as:t.as,"as-child":t.asChild,"data-state":v(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:I(()=>[J(t.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Aw=_w,xw=V({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=ts(),{forwardRef:t}=Pe();return(n,i)=>v(e)?.modal.value?(F(),K(v(Si),{key:0,present:n.forceMount||v(e).open.value},{default:I(()=>[B(Aw,ye(n.$attrs,{ref:v(t),as:n.as,"as-child":n.asChild}),{default:I(()=>[J(n.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):Wn("v-if",!0)}}),Sw=xw,Cw=V({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=zv();return(t,n)=>v(e)||t.forceMount?(F(),K(Ym,{key:0,to:t.to,disabled:t.disabled,defer:t.defer},[J(t.$slots,"default")],8,["to","disabled","defer"])):Wn("v-if",!0)}}),kc=Cw,Ew=V({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=s;return(t,n)=>(F(),K(v(kc),un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),Tw=Ew,Pw=V({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(s){const e=s,t=ts();return Pe(),(n,i)=>(F(),K(v(Xe),ye(e,{id:v(t).titleId}),{default:I(()=>[J(n.$slots,"default")]),_:3},16,["id"]))}}),kw=Pw;const nd="data-reka-collection-item";function Mc(s={}){const{key:e="",isProvider:t=!1}=s,n=`${e}CollectionProvider`;let i;if(t){const u=Q(new Map);i={collectionRef:Q(),itemMap:u},di(n,i)}else i=Gt(n);const r=(u=!1)=>{const d=i.collectionRef.value;if(!d)return[];const h=Array.from(d.querySelectorAll(`[${nd}]`)),p=Array.from(i.itemMap.value.values()).sort((g,m)=>h.indexOf(g.ref)-h.indexOf(m.ref));return u?p:p.filter(g=>g.ref.dataset.disabled!=="")},o=V({name:"CollectionSlot",setup(u,{slots:d}){const{primitiveElement:h,currentElement:f}=Tl();return He(f,()=>{i.collectionRef.value=f.value}),()=>Kt(El,{ref:h},d)}}),a=V({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(u,{slots:d,attrs:h}){const{primitiveElement:f,currentElement:p}=Tl();return Yt(g=>{if(p.value){const m=Ko(p.value);i.itemMap.value.set(m,{ref:p.value,value:u.value}),g(()=>i.itemMap.value.delete(m))}}),()=>Kt(El,{...h,[nd]:"",ref:f},d)}}),l=G(()=>Array.from(i.itemMap.value.values())),c=G(()=>i.itemMap.value.size);return{getItems:r,reactiveItems:l,itemMapSize:c,CollectionSlot:o,CollectionItem:a}}const Mw="rovingFocusGroup.onEntryFocus",Rw={bubbles:!1,cancelable:!0},Dw={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Iw(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Ow(s,e,t){const n=Iw(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Dw[n]}function up(s,e=!1){const t=Nt();for(const n of s)if(n===t||(n.focus({preventScroll:e}),Nt()!==t))return}function Lw(s,e){return s.map((t,n)=>s[(e+n)%s.length])}const[Fw,Bw]=At("RovingFocusGroup");var Nw=V({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(s,{expose:e,emit:t}){const n=s,i=t,{loop:r,orientation:o,dir:a}=rn(n),l=sa(a),c=_s(n,"currentTabStopId",i,{defaultValue:n.defaultCurrentTabStopId,passive:n.currentTabStopId===void 0}),u=Q(!1),d=Q(!1),h=Q(0),{getItems:f,CollectionSlot:p}=Mc({isProvider:!0});function g(y){const _=!d.value;if(y.currentTarget&&y.target===y.currentTarget&&_&&!u.value){const w=new CustomEvent(Mw,Rw);if(y.currentTarget.dispatchEvent(w),i("entryFocus",w),!w.defaultPrevented){const A=f().map(C=>C.ref).filter(C=>C.dataset.disabled!==""),S=A.find(C=>C.getAttribute("data-active")===""),b=A.find(C=>C.getAttribute("data-highlighted")===""),x=A.find(C=>C.id===c.value),E=[S,b,x,...A].filter(Boolean);up(E,n.preventScrollOnEntryFocus)}}d.value=!1}function m(){setTimeout(()=>{d.value=!1},1)}return e({getItems:f}),Bw({loop:r,dir:l,orientation:o,currentTabStopId:c,onItemFocus:y=>{c.value=y},onItemShiftTab:()=>{u.value=!0},onFocusableItemAdd:()=>{h.value++},onFocusableItemRemove:()=>{h.value--}}),(y,_)=>(F(),K(v(p),null,{default:I(()=>[B(v(Xe),{tabindex:u.value||h.value===0?-1:0,"data-orientation":v(o),as:y.as,"as-child":y.asChild,dir:v(l),style:{outline:"none"},onMousedown:_[0]||(_[0]=w=>d.value=!0),onMouseup:m,onFocus:g,onBlur:_[1]||(_[1]=w=>u.value=!1)},{default:I(()=>[J(y.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),$w=Nw,qw=V({__name:"RovingFocusItem",props:{tabStopId:{type:String,required:!1},focusable:{type:Boolean,required:!1,default:!0},active:{type:Boolean,required:!1},allowShiftKey:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const e=s,t=Fw(),n=gs(),i=G(()=>e.tabStopId||n),r=G(()=>t.currentTabStopId.value===i.value),{getItems:o,CollectionItem:a}=Mc();Ht(()=>{e.focusable&&t.onFocusableItemAdd()}),Ns(()=>{e.focusable&&t.onFocusableItemRemove()});function l(c){if(c.key==="Tab"&&c.shiftKey){t.onItemShiftTab();return}if(c.target!==c.currentTarget)return;const u=Ow(c,t.orientation.value,t.dir.value);if(u!==void 0){if(c.metaKey||c.ctrlKey||c.altKey||!e.allowShiftKey&&c.shiftKey)return;c.preventDefault();let d=[...o().map(h=>h.ref).filter(h=>h.dataset.disabled!=="")];if(u==="last")d.reverse();else if(u==="prev"||u==="next"){u==="prev"&&d.reverse();const h=d.indexOf(c.currentTarget);d=t.loop.value?Lw(d,h+1):d.slice(h+1)}st(()=>up(d))}}return(c,u)=>(F(),K(v(a),null,{default:I(()=>[B(v(Xe),{tabindex:r.value?0:-1,"data-orientation":v(t).orientation.value,"data-active":c.active?"":void 0,"data-disabled":c.focusable?void 0:"",as:c.as,"as-child":c.asChild,onMousedown:u[0]||(u[0]=d=>{c.focusable?v(t).onItemFocus(i.value):d.preventDefault()}),onFocus:u[1]||(u[1]=d=>v(t).onItemFocus(i.value)),onKeydown:l},{default:I(()=>[J(c.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}}),Hw=qw,jw=V({__name:"VisuallyHidden",props:{feature:{type:String,required:!1,default:"focusable"},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){return(e,t)=>(F(),K(v(Xe),{as:e.as,"as-child":e.asChild,"aria-hidden":e.feature==="focusable"?"true":void 0,"data-hidden":e.feature==="fully-hidden"?"":void 0,tabindex:e.feature==="fully-hidden"?"-1":void 0,style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",whiteSpace:"nowrap",wordWrap:"normal"}},{default:I(()=>[J(e.$slots,"default")]),_:3},8,["as","as-child","aria-hidden","data-hidden","tabindex"]))}}),dp=jw,Uw=V({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const e=s,{primitiveElement:t,currentElement:n}=Tl(),i=G(()=>e.checked??e.value);return He(i,(r,o)=>{if(!n.value)return;const a=n.value,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(u&&r!==o){const d=new Event("input",{bubbles:!0}),h=new Event("change",{bubbles:!0});u.call(a,r),a.dispatchEvent(d),a.dispatchEvent(h)}}),(r,o)=>(F(),K(dp,ye({ref_key:"primitiveElement",ref:t},{...e,...r.$attrs},{as:"input"}),null,16))}}),sd=Uw,Vw=V({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const e=s,t=G(()=>typeof e.value=="object"&&Array.isArray(e.value)&&e.value.length===0&&e.required),n=G(()=>typeof e.value=="string"||typeof e.value=="number"||typeof e.value=="boolean"||e.value===null||e.value===void 0?[{name:e.name,value:e.value}]:typeof e.value=="object"&&Array.isArray(e.value)?e.value.flatMap((i,r)=>typeof i=="object"?Object.entries(i).map(([o,a])=>({name:`${e.name}[${r}][${o}]`,value:a})):{name:`${e.name}[${r}]`,value:i}):e.value!==null&&typeof e.value=="object"&&!Array.isArray(e.value)?Object.entries(e.value).map(([i,r])=>({name:`${e.name}[${i}]`,value:r})):[]);return(i,r)=>(F(),Fe(lt,null,[Wn(" We render single input if it's required "),t.value?(F(),K(sd,ye({key:i.name},{...e,...i.$attrs},{name:i.name,value:i.value}),null,16,["name","value"])):(F(!0),Fe(lt,{key:1},Sr(n.value,o=>(F(),K(sd,ye({key:o.name},{ref_for:!0},{...e,...i.$attrs},{name:o.name,value:o.value}),null,16,["name","value"]))),128))],2112))}}),zw=Vw;const[Ww,fP]=At("CheckboxGroupRoot");function Eo(s){return s==="indeterminate"}function hp(s){return Eo(s)?"indeterminate":s?"checked":"unchecked"}const[Gw,Kw]=At("CheckboxRoot");var Xw=V({inheritAttrs:!1,__name:"CheckboxRoot",props:{defaultValue:{type:[Boolean,String],required:!1},modelValue:{type:[Boolean,String,null],required:!1,default:void 0},disabled:{type:Boolean,required:!1},value:{type:null,required:!1,default:"on"},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,{forwardRef:i,currentElement:r}=Pe(),o=Ww(null),a=_s(t,"modelValue",n,{defaultValue:t.defaultValue,passive:t.modelValue===void 0}),l=G(()=>o?.disabled.value||t.disabled),c=G(()=>xl(o?.modelValue.value)?a.value==="indeterminate"?"indeterminate":a.value:Sl(o.modelValue.value,t.value));function u(){if(xl(o?.modelValue.value))a.value=Eo(a.value)?!0:!a.value;else{const f=[...o.modelValue.value||[]];if(Sl(f,t.value)){const p=f.findIndex(g=>ur(g,t.value));f.splice(p,1)}else f.push(t.value);o.modelValue.value=f}}const d=eb(r),h=G(()=>t.id&&r.value?document.querySelector(`[for="${t.id}"]`)?.innerText:void 0);return Kw({disabled:l,state:c}),(f,p)=>(F(),K(vc(v(o)?.rovingFocus.value?v(Hw):v(Xe)),ye(f.$attrs,{id:f.id,ref:v(i),role:"checkbox","as-child":f.asChild,as:f.as,type:f.as==="button"?"button":void 0,"aria-checked":v(Eo)(c.value)?"mixed":c.value,"aria-required":f.required,"aria-label":f.$attrs["aria-label"]||h.value,"data-state":v(hp)(c.value),"data-disabled":l.value?"":void 0,disabled:l.value,focusable:v(o)?.rovingFocus.value?!l.value:void 0,onKeydown:Sc(ta(()=>{},["prevent"]),["enter"]),onClick:u}),{default:I(()=>[J(f.$slots,"default",{modelValue:v(a),state:c.value}),v(d)&&f.name&&!v(o)?(F(),K(v(zw),{key:0,type:"checkbox",checked:!!c.value,name:f.name,value:f.value,disabled:l.value,required:f.required},null,8,["checked","name","value","disabled","required"])):Wn("v-if",!0)]),_:3},16,["id","as-child","as","type","aria-checked","aria-required","aria-label","data-state","data-disabled","disabled","focusable","onKeydown"]))}}),Yw=Xw,Jw=V({__name:"CheckboxIndicator",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const{forwardRef:e}=Pe(),t=Gw();return(n,i)=>(F(),K(v(Si),{present:n.forceMount||v(Eo)(v(t).state.value)||v(t).state.value===!0},{default:I(()=>[B(v(Xe),ye({ref:v(e),"data-state":v(hp)(v(t).state.value),"data-disabled":v(t).disabled.value?"":void 0,style:{pointerEvents:"none"},"as-child":n.asChild,as:n.as},n.$attrs),{default:I(()=>[J(n.$slots,"default")]),_:3},16,["data-state","data-disabled","as-child","as"])]),_:3},8,["present"]))}}),Zw=Jw;const[fp,Qw]=At("PopperRoot");var e0=V({inheritAttrs:!1,__name:"PopperRoot",setup(s){const e=Q();return Qw({anchor:e,onAnchorChange:t=>e.value=t}),(t,n)=>J(t.$slots,"default")}}),pp=e0,t0=V({__name:"PopperAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,{forwardRef:t,currentElement:n}=Pe(),i=fp();return Rf(()=>{i.onAnchorChange(e.reference??n.value)}),(r,o)=>(F(),K(v(Xe),{ref:v(t),as:r.as,"as-child":r.asChild},{default:I(()=>[J(r.$slots,"default")]),_:3},8,["as","as-child"]))}}),gp=t0;const n0={key:0,d:"M0 0L6 6L12 0"},s0={key:1,d:"M0 0L4.58579 4.58579C5.36683 5.36683 6.63316 5.36684 7.41421 4.58579L12 0"};var i0=V({__name:"Arrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(s){const e=s;return Pe(),(t,n)=>(F(),K(v(Xe),ye(e,{width:t.width,height:t.height,viewBox:t.asChild?void 0:"0 0 12 6",preserveAspectRatio:t.asChild?void 0:"none"}),{default:I(()=>[J(t.$slots,"default",{},()=>[t.rounded?(F(),Fe("path",s0)):(F(),Fe("path",n0))])]),_:3},16,["width","height","viewBox","preserveAspectRatio"]))}}),r0=i0;function o0(s){return s!==null}function a0(s){return{name:"transformOrigin",options:s,fn(e){const{placement:t,rects:n,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,a=o?0:s.arrowWidth,l=o?0:s.arrowHeight,[c,u]=Rl(t),d={start:"0%",center:"50%",end:"100%"}[u],h=(i.arrow?.x??0)+a/2,f=(i.arrow?.y??0)+l/2;let p="",g="";return c==="bottom"?(p=o?d:`${h}px`,g=`${-l}px`):c==="top"?(p=o?d:`${h}px`,g=`${n.floating.height+l}px`):c==="right"?(p=`${-l}px`,g=o?d:`${f}px`):c==="left"&&(p=`${n.floating.width+l}px`,g=o?d:`${f}px`),{data:{x:p,y:g}}}}}function Rl(s){const[e,t="center"]=s.split("-");return[e,t]}const l0=["top","right","bottom","left"],ms=Math.min,zt=Math.max,To=Math.round,zr=Math.floor,kn=s=>({x:s,y:s}),c0={left:"right",right:"left",bottom:"top",top:"bottom"},u0={start:"end",end:"start"};function Dl(s,e,t){return zt(s,ms(e,t))}function Xn(s,e){return typeof s=="function"?s(e):s}function Yn(s){return s.split("-")[0]}function Ci(s){return s.split("-")[1]}function Rc(s){return s==="x"?"y":"x"}function Dc(s){return s==="y"?"height":"width"}const d0=new Set(["top","bottom"]);function Tn(s){return d0.has(Yn(s))?"y":"x"}function Ic(s){return Rc(Tn(s))}function h0(s,e,t){t===void 0&&(t=!1);const n=Ci(s),i=Ic(s),r=Dc(i);let o=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=Po(o)),[o,Po(o)]}function f0(s){const e=Po(s);return[Il(s),e,Il(e)]}function Il(s){return s.replace(/start|end/g,e=>u0[e])}const id=["left","right"],rd=["right","left"],p0=["top","bottom"],g0=["bottom","top"];function m0(s,e,t){switch(s){case"top":case"bottom":return t?e?rd:id:e?id:rd;case"left":case"right":return e?p0:g0;default:return[]}}function y0(s,e,t,n){const i=Ci(s);let r=m0(Yn(s),t==="start",n);return i&&(r=r.map(o=>o+"-"+i),e&&(r=r.concat(r.map(Il)))),r}function Po(s){return s.replace(/left|right|bottom|top/g,e=>c0[e])}function v0(s){return{top:0,right:0,bottom:0,left:0,...s}}function mp(s){return typeof s!="number"?v0(s):{top:s,right:s,bottom:s,left:s}}function ko(s){const{x:e,y:t,width:n,height:i}=s;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function od(s,e,t){let{reference:n,floating:i}=s;const r=Tn(e),o=Ic(e),a=Dc(o),l=Yn(e),c=r==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(Ci(e)){case"start":f[o]-=h*(t&&c?-1:1);break;case"end":f[o]+=h*(t&&c?-1:1);break}return f}const b0=async(s,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:s,floating:e,strategy:i}),{x:u,y:d}=od(c,n,l),h=n,f={},p=0;for(let g=0;g<a.length;g++){const{name:m,fn:y}=a[g],{x:_,y:w,data:A,reset:S}=await y({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:s,floating:e}});u=_??u,d=w??d,f={...f,[m]:{...f[m],...A}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:s,floating:e,strategy:i}):S.rects),{x:u,y:d}=od(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function dr(s,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:r,rects:o,elements:a,strategy:l}=s,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Xn(e,s),p=mp(f),m=a[h?d==="floating"?"reference":"floating":d],y=ko(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(m)))==null||t?m:m.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),A=await(r.isElement==null?void 0:r.isElement(w))?await(r.getScale==null?void 0:r.getScale(w))||{x:1,y:1}:{x:1,y:1},S=ko(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:w,strategy:l}):_);return{top:(y.top-S.top+p.top)/A.y,bottom:(S.bottom-y.bottom+p.bottom)/A.y,left:(y.left-S.left+p.left)/A.x,right:(S.right-y.right+p.right)/A.x}}const w0=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:n,placement:i,rects:r,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Xn(s,e)||{};if(c==null)return{};const d=mp(u),h={x:t,y:n},f=Ic(i),p=Dc(f),g=await o.getDimensions(c),m=f==="y",y=m?"top":"left",_=m?"bottom":"right",w=m?"clientHeight":"clientWidth",A=r.reference[p]+r.reference[f]-h[f]-r.floating[p],S=h[f]-r.reference[f],b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let x=b?b[w]:0;(!x||!await(o.isElement==null?void 0:o.isElement(b)))&&(x=a.floating[w]||r.floating[p]);const E=A/2-S/2,C=x/2-g[p]/2-1,M=ms(d[y],C),O=ms(d[_],C),W=M,se=x-g[p]-O,z=x/2-g[p]/2+E,oe=Dl(W,z,se),q=!l.arrow&&Ci(i)!=null&&z!==oe&&r.reference[p]/2-(z<W?M:O)-g[p]/2<0,$=q?z<W?z-W:z-se:0;return{[f]:h[f]+$,data:{[f]:oe,centerOffset:z-oe-$,...q&&{alignmentOffset:$}},reset:q}}}),_0=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,n;const{placement:i,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=Xn(s,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const y=Yn(i),_=Tn(a),w=Yn(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(w||!g?[Po(a)]:f0(a)),b=p!=="none";!h&&b&&S.push(...y0(a,g,p,A));const x=[a,...S],E=await dr(e,m),C=[];let M=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&C.push(E[y]),d){const z=h0(i,o,A);C.push(E[z[0]],E[z[1]])}if(M=[...M,{placement:i,overflows:C}],!C.every(z=>z<=0)){var O,W;const z=(((O=r.flip)==null?void 0:O.index)||0)+1,oe=x[z];if(oe&&(!(d==="alignment"?_!==Tn(oe):!1)||M.every(k=>Tn(k.placement)===_?k.overflows[0]>0:!0)))return{data:{index:z,overflows:M},reset:{placement:oe}};let q=(W=M.filter($=>$.overflows[0]<=0).sort(($,k)=>$.overflows[1]-k.overflows[1])[0])==null?void 0:W.placement;if(!q)switch(f){case"bestFit":{var se;const $=(se=M.filter(k=>{if(b){const L=Tn(k.placement);return L===_||L==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(L=>L>0).reduce((L,Y)=>L+Y,0)]).sort((k,L)=>k[1]-L[1])[0])==null?void 0:se[0];$&&(q=$);break}case"initialPlacement":q=a;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function ad(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function ld(s){return l0.some(e=>s[e]>=0)}const A0=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=Xn(s,e);switch(n){case"referenceHidden":{const r=await dr(e,{...i,elementContext:"reference"}),o=ad(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ld(o)}}}case"escaped":{const r=await dr(e,{...i,altBoundary:!0}),o=ad(r,t.floating);return{data:{escapedOffsets:o,escaped:ld(o)}}}default:return{}}}}},yp=new Set(["left","top"]);async function x0(s,e){const{placement:t,platform:n,elements:i}=s,r=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Yn(t),a=Ci(t),l=Tn(t)==="y",c=yp.has(o)?-1:1,u=r&&l?-1:1,d=Xn(e,s);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const S0=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,n;const{x:i,y:r,placement:o,middlewareData:a}=e,l=await x0(e,s);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:o}}}}},C0=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:m=>{let{x:y,y:_}=m;return{x:y,y:_}}},...l}=Xn(s,e),c={x:t,y:n},u=await dr(e,l),d=Tn(Yn(i)),h=Rc(d);let f=c[h],p=c[d];if(r){const m=h==="y"?"top":"left",y=h==="y"?"bottom":"right",_=f+u[m],w=f-u[y];f=Dl(_,f,w)}if(o){const m=d==="y"?"top":"left",y=d==="y"?"bottom":"right",_=p+u[m],w=p-u[y];p=Dl(_,p,w)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-t,y:g.y-n,enabled:{[h]:r,[d]:o}}}}}},E0=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:n,placement:i,rects:r,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Xn(s,e),u={x:t,y:n},d=Tn(i),h=Rc(d);let f=u[h],p=u[d];const g=Xn(a,e),m=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=h==="y"?"height":"width",A=r.reference[h]-r.floating[w]+m.mainAxis,S=r.reference[h]+r.reference[w]-m.mainAxis;f<A?f=A:f>S&&(f=S)}if(c){var y,_;const w=h==="y"?"width":"height",A=yp.has(Yn(i)),S=r.reference[d]-r.floating[w]+(A&&((y=o.offset)==null?void 0:y[d])||0)+(A?0:m.crossAxis),b=r.reference[d]+r.reference[w]+(A?0:((_=o.offset)==null?void 0:_[d])||0)-(A?m.crossAxis:0);p<S?p=S:p>b&&(p=b)}return{[h]:f,[d]:p}}}},T0=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){var t,n;const{placement:i,rects:r,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Xn(s,e),u=await dr(e,c),d=Yn(i),h=Ci(i),f=Tn(i)==="y",{width:p,height:g}=r.floating;let m,y;d==="top"||d==="bottom"?(m=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,m=h==="end"?"top":"bottom");const _=g-u.top-u.bottom,w=p-u.left-u.right,A=ms(g-u[m],_),S=ms(p-u[y],w),b=!e.middlewareData.shift;let x=A,E=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(E=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(x=_),b&&!h){const M=zt(u.left,0),O=zt(u.right,0),W=zt(u.top,0),se=zt(u.bottom,0);f?E=p-2*(M!==0||O!==0?M+O:zt(u.left,u.right)):x=g-2*(W!==0||se!==0?W+se:zt(u.top,u.bottom))}await l({...e,availableWidth:E,availableHeight:x});const C=await o.getDimensions(a.floating);return p!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}};function ra(){return typeof window<"u"}function Hs(s){return Oc(s)?(s.nodeName||"").toLowerCase():"#document"}function Xt(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function On(s){var e;return(e=(Oc(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function Oc(s){return ra()?s instanceof Node||s instanceof Xt(s).Node:!1}function hn(s){return ra()?s instanceof Element||s instanceof Xt(s).Element:!1}function Rn(s){return ra()?s instanceof HTMLElement||s instanceof Xt(s).HTMLElement:!1}function cd(s){return!ra()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Xt(s).ShadowRoot}const P0=new Set(["inline","contents"]);function kr(s){const{overflow:e,overflowX:t,overflowY:n,display:i}=fn(s);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!P0.has(i)}const k0=new Set(["table","td","th"]);function M0(s){return k0.has(Hs(s))}const R0=[":popover-open",":modal"];function oa(s){return R0.some(e=>{try{return s.matches(e)}catch{return!1}})}const D0=["transform","translate","scale","rotate","perspective"],I0=["transform","translate","scale","rotate","perspective","filter"],O0=["paint","layout","strict","content"];function Lc(s){const e=Fc(),t=hn(s)?fn(s):s;return D0.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||I0.some(n=>(t.willChange||"").includes(n))||O0.some(n=>(t.contain||"").includes(n))}function L0(s){let e=ys(s);for(;Rn(e)&&!vi(e);){if(Lc(e))return e;if(oa(e))return null;e=ys(e)}return null}function Fc(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const F0=new Set(["html","body","#document"]);function vi(s){return F0.has(Hs(s))}function fn(s){return Xt(s).getComputedStyle(s)}function aa(s){return hn(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function ys(s){if(Hs(s)==="html")return s;const e=s.assignedSlot||s.parentNode||cd(s)&&s.host||On(s);return cd(e)?e.host:e}function vp(s){const e=ys(s);return vi(e)?s.ownerDocument?s.ownerDocument.body:s.body:Rn(e)&&kr(e)?e:vp(e)}function hr(s,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=vp(s),r=i===((n=s.ownerDocument)==null?void 0:n.body),o=Xt(i);if(r){const a=Ol(o);return e.concat(o,o.visualViewport||[],kr(i)?i:[],a&&t?hr(a):[])}return e.concat(i,hr(i,[],t))}function Ol(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function bp(s){const e=fn(s);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Rn(s),r=i?s.offsetWidth:t,o=i?s.offsetHeight:n,a=To(t)!==r||To(n)!==o;return a&&(t=r,n=o),{width:t,height:n,$:a}}function Bc(s){return hn(s)?s:s.contextElement}function hi(s){const e=Bc(s);if(!Rn(e))return kn(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:r}=bp(e);let o=(r?To(t.width):t.width)/n,a=(r?To(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const B0=kn(0);function wp(s){const e=Xt(s);return!Fc()||!e.visualViewport?B0:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function N0(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==Xt(s)?!1:e}function Ls(s,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=s.getBoundingClientRect(),r=Bc(s);let o=kn(1);e&&(n?hn(n)&&(o=hi(n)):o=hi(s));const a=N0(r,t,n)?wp(r):kn(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(r){const h=Xt(r),f=n&&hn(n)?Xt(n):n;let p=h,g=Ol(p);for(;g&&n&&f!==p;){const m=hi(g),y=g.getBoundingClientRect(),_=fn(g),w=y.left+(g.clientLeft+parseFloat(_.paddingLeft))*m.x,A=y.top+(g.clientTop+parseFloat(_.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=w,c+=A,p=Xt(g),g=Ol(p)}}return ko({width:u,height:d,x:l,y:c})}function Nc(s,e){const t=aa(s).scrollLeft;return e?e.left+t:Ls(On(s)).left+t}function _p(s,e,t){t===void 0&&(t=!1);const n=s.getBoundingClientRect(),i=n.left+e.scrollLeft-(t?0:Nc(s,n)),r=n.top+e.scrollTop;return{x:i,y:r}}function $0(s){let{elements:e,rect:t,offsetParent:n,strategy:i}=s;const r=i==="fixed",o=On(n),a=e?oa(e.floating):!1;if(n===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},c=kn(1);const u=kn(0),d=Rn(n);if((d||!d&&!r)&&((Hs(n)!=="body"||kr(o))&&(l=aa(n)),Rn(n))){const f=Ls(n);c=hi(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const h=o&&!d&&!r?_p(o,l,!0):kn(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:t.y*c.y-l.scrollTop*c.y+u.y+h.y}}function q0(s){return Array.from(s.getClientRects())}function H0(s){const e=On(s),t=aa(s),n=s.ownerDocument.body,i=zt(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),r=zt(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+Nc(s);const a=-t.scrollTop;return fn(n).direction==="rtl"&&(o+=zt(e.clientWidth,n.clientWidth)-i),{width:i,height:r,x:o,y:a}}function j0(s,e){const t=Xt(s),n=On(s),i=t.visualViewport;let r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;const c=Fc();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a,y:l}}const U0=new Set(["absolute","fixed"]);function V0(s,e){const t=Ls(s,!0,e==="fixed"),n=t.top+s.clientTop,i=t.left+s.clientLeft,r=Rn(s)?hi(s):kn(1),o=s.clientWidth*r.x,a=s.clientHeight*r.y,l=i*r.x,c=n*r.y;return{width:o,height:a,x:l,y:c}}function ud(s,e,t){let n;if(e==="viewport")n=j0(s,t);else if(e==="document")n=H0(On(s));else if(hn(e))n=V0(e,t);else{const i=wp(s);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ko(n)}function Ap(s,e){const t=ys(s);return t===e||!hn(t)||vi(t)?!1:fn(t).position==="fixed"||Ap(t,e)}function z0(s,e){const t=e.get(s);if(t)return t;let n=hr(s,[],!1).filter(a=>hn(a)&&Hs(a)!=="body"),i=null;const r=fn(s).position==="fixed";let o=r?ys(s):s;for(;hn(o)&&!vi(o);){const a=fn(o),l=Lc(o);!l&&a.position==="fixed"&&(i=null),(r?!l&&!i:!l&&a.position==="static"&&!!i&&U0.has(i.position)||kr(o)&&!l&&Ap(s,o))?n=n.filter(u=>u!==o):i=a,o=ys(o)}return e.set(s,n),n}function W0(s){let{element:e,boundary:t,rootBoundary:n,strategy:i}=s;const o=[...t==="clippingAncestors"?oa(e)?[]:z0(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((c,u)=>{const d=ud(e,u,i);return c.top=zt(d.top,c.top),c.right=ms(d.right,c.right),c.bottom=ms(d.bottom,c.bottom),c.left=zt(d.left,c.left),c},ud(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function G0(s){const{width:e,height:t}=bp(s);return{width:e,height:t}}function K0(s,e,t){const n=Rn(e),i=On(e),r=t==="fixed",o=Ls(s,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=kn(0);function c(){l.x=Nc(i)}if(n||!n&&!r)if((Hs(e)!=="body"||kr(i))&&(a=aa(e)),n){const f=Ls(e,!0,r,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&c();r&&!n&&i&&c();const u=i&&!n&&!r?_p(i,a):kn(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function ja(s){return fn(s).position==="static"}function dd(s,e){if(!Rn(s)||fn(s).position==="fixed")return null;if(e)return e(s);let t=s.offsetParent;return On(s)===t&&(t=t.ownerDocument.body),t}function xp(s,e){const t=Xt(s);if(oa(s))return t;if(!Rn(s)){let i=ys(s);for(;i&&!vi(i);){if(hn(i)&&!ja(i))return i;i=ys(i)}return t}let n=dd(s,e);for(;n&&M0(n)&&ja(n);)n=dd(n,e);return n&&vi(n)&&ja(n)&&!Lc(n)?t:n||L0(s)||t}const X0=async function(s){const e=this.getOffsetParent||xp,t=this.getDimensions,n=await t(s.floating);return{reference:K0(s.reference,await e(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Y0(s){return fn(s).direction==="rtl"}const J0={convertOffsetParentRelativeRectToViewportRelativeRect:$0,getDocumentElement:On,getClippingRect:W0,getOffsetParent:xp,getElementRects:X0,getClientRects:q0,getDimensions:G0,getScale:hi,isElement:hn,isRTL:Y0};function Sp(s,e){return s.x===e.x&&s.y===e.y&&s.width===e.width&&s.height===e.height}function Z0(s,e){let t=null,n;const i=On(s);function r(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=s.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(a||e(),!h||!f)return;const p=zr(d),g=zr(i.clientWidth-(u+h)),m=zr(i.clientHeight-(d+f)),y=zr(u),w={rootMargin:-p+"px "+-g+"px "+-m+"px "+-y+"px",threshold:zt(0,ms(1,l))||1};let A=!0;function S(b){const x=b[0].intersectionRatio;if(x!==l){if(!A)return o();x?o(!1,x):n=setTimeout(()=>{o(!1,1e-7)},1e3)}x===1&&!Sp(c,s.getBoundingClientRect())&&o(),A=!1}try{t=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,w)}t.observe(s)}return o(!0),r}function Q0(s,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Bc(s),u=i||r?[...c?hr(c):[],...hr(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",t,{passive:!0}),r&&y.addEventListener("resize",t)});const d=c&&a?Z0(c,t):null;let h=-1,f=null;o&&(f=new ResizeObserver(y=>{let[_]=y;_&&_.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let p,g=l?Ls(s):null;l&&m();function m(){const y=Ls(s);g&&!Sp(g,y)&&t(),g=y,p=requestAnimationFrame(m)}return t(),()=>{var y;u.forEach(_=>{i&&_.removeEventListener("scroll",t),r&&_.removeEventListener("resize",t)}),d?.(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const e_=S0,t_=C0,hd=_0,n_=T0,s_=A0,i_=w0,r_=E0,o_=(s,e,t)=>{const n=new Map,i={platform:J0,...t},r={...i.platform,_c:n};return b0(s,e,{...i,platform:r})};function a_(s){return s!=null&&typeof s=="object"&&"$el"in s}function Ll(s){if(a_(s)){const e=s.$el;return Oc(e)&&Hs(e)==="#comment"?null:e}return s}function Qs(s){return typeof s=="function"?s():v(s)}function l_(s){return{name:"arrow",options:s,fn(e){const t=Ll(Qs(s.element));return t==null?{}:i_({element:t,padding:s.padding}).fn(e)}}}function Cp(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function fd(s,e){const t=Cp(s);return Math.round(e*t)/t}function c_(s,e,t){t===void 0&&(t={});const n=t.whileElementsMounted,i=G(()=>{var x;return(x=Qs(t.open))!=null?x:!0}),r=G(()=>Qs(t.middleware)),o=G(()=>{var x;return(x=Qs(t.placement))!=null?x:"bottom"}),a=G(()=>{var x;return(x=Qs(t.strategy))!=null?x:"absolute"}),l=G(()=>{var x;return(x=Qs(t.transform))!=null?x:!0}),c=G(()=>Ll(s.value)),u=G(()=>Ll(e.value)),d=Q(0),h=Q(0),f=Q(a.value),p=Q(o.value),g=cn({}),m=Q(!1),y=G(()=>{const x={position:f.value,left:"0",top:"0"};if(!u.value)return x;const E=fd(u.value,d.value),C=fd(u.value,h.value);return l.value?{...x,transform:"translate("+E+"px, "+C+"px)",...Cp(u.value)>=1.5&&{willChange:"transform"}}:{position:f.value,left:E+"px",top:C+"px"}});let _;function w(){if(c.value==null||u.value==null)return;const x=i.value;o_(c.value,u.value,{middleware:r.value,placement:o.value,strategy:a.value}).then(E=>{d.value=E.x,h.value=E.y,f.value=E.strategy,p.value=E.placement,g.value=E.middlewareData,m.value=x!==!1})}function A(){typeof _=="function"&&(_(),_=void 0)}function S(){if(A(),n===void 0){w();return}if(c.value!=null&&u.value!=null){_=n(c.value,u.value,w);return}}function b(){i.value||(m.value=!1)}return He([r,o,a,i],w,{flush:"sync"}),He([c,u],S,{flush:"sync"}),He(i,b,{flush:"sync"}),Ar()&&Uo(A),{x:Ws(d),y:Ws(h),strategy:Ws(f),placement:Ws(p),middlewareData:Ws(g),isPositioned:Ws(m),floatingStyles:y,update:w}}const Ep={side:"bottom",sideOffset:0,sideFlip:!0,align:"center",alignOffset:0,alignFlip:!0,arrowPadding:0,avoidCollisions:!0,collisionBoundary:()=>[],collisionPadding:0,sticky:"partial",hideWhenDetached:!1,positionStrategy:"fixed",updatePositionStrategy:"optimized",prioritizePosition:!1},[u_,d_]=At("PopperContent");var h_=V({inheritAttrs:!1,__name:"PopperContent",props:vf({side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...Ep}),emits:["placed"],setup(s,{emit:e}){const t=s,n=e,i=fp(),{forwardRef:r,currentElement:o}=Pe(),a=Q(),l=Q(),{width:c,height:u}=hb(l),d=G(()=>t.side+(t.align!=="center"?`-${t.align}`:"")),h=G(()=>typeof t.collisionPadding=="number"?t.collisionPadding:{top:0,right:0,bottom:0,left:0,...t.collisionPadding}),f=G(()=>Array.isArray(t.collisionBoundary)?t.collisionBoundary:[t.collisionBoundary]),p=G(()=>({padding:h.value,boundary:f.value.filter(o0),altBoundary:f.value.length>0})),g=G(()=>({mainAxis:t.sideFlip,crossAxis:t.alignFlip})),m=Ov(()=>[e_({mainAxis:t.sideOffset+u.value,alignmentAxis:t.alignOffset}),t.prioritizePosition&&t.avoidCollisions&&hd({...p.value,...g.value}),t.avoidCollisions&&t_({mainAxis:!0,crossAxis:!!t.prioritizePosition,limiter:t.sticky==="partial"?r_():void 0,...p.value}),!t.prioritizePosition&&t.avoidCollisions&&hd({...p.value,...g.value}),n_({...p.value,apply:({elements:W,rects:se,availableWidth:z,availableHeight:oe})=>{const{width:q,height:$}=se.reference,k=W.floating.style;k.setProperty("--reka-popper-available-width",`${z}px`),k.setProperty("--reka-popper-available-height",`${oe}px`),k.setProperty("--reka-popper-anchor-width",`${q}px`),k.setProperty("--reka-popper-anchor-height",`${$}px`)}}),l.value&&l_({element:l.value,padding:t.arrowPadding}),a0({arrowWidth:c.value,arrowHeight:u.value}),t.hideWhenDetached&&s_({strategy:"referenceHidden",...p.value})]),y=G(()=>t.reference??i.anchor.value),{floatingStyles:_,placement:w,isPositioned:A,middlewareData:S}=c_(y,a,{strategy:t.positionStrategy,placement:d,whileElementsMounted:(...W)=>Q0(...W,{layoutShift:!t.disableUpdateOnLayoutShift,animationFrame:t.updatePositionStrategy==="always"}),middleware:m}),b=G(()=>Rl(w.value)[0]),x=G(()=>Rl(w.value)[1]);Rf(()=>{A.value&&n("placed")});const E=G(()=>S.value.arrow?.centerOffset!==0),C=Q("");Yt(()=>{o.value&&(C.value=window.getComputedStyle(o.value).zIndex)});const M=G(()=>S.value.arrow?.x??0),O=G(()=>S.value.arrow?.y??0);return d_({placedSide:b,onArrowChange:W=>l.value=W,arrowX:M,arrowY:O,shouldHideArrow:E}),(W,se)=>(F(),Fe("div",{ref_key:"floatingRef",ref:a,"data-reka-popper-content-wrapper":"",style:Zn({...v(_),transform:v(A)?v(_).transform:"translate(0, -200%)",minWidth:"max-content",zIndex:C.value,"--reka-popper-transform-origin":[v(S).transformOrigin?.x,v(S).transformOrigin?.y].join(" "),...v(S).hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}})},[B(v(Xe),ye({ref:v(r)},W.$attrs,{"as-child":t.asChild,as:W.as,"data-side":b.value,"data-align":x.value,style:{animation:v(A)?void 0:"none"}}),{default:I(()=>[J(W.$slots,"default")]),_:3},16,["as-child","as","data-side","data-align","style"])],4))}}),Tp=h_;const f_={top:"bottom",right:"left",bottom:"top",left:"right"};var p_=V({inheritAttrs:!1,__name:"PopperArrow",props:{width:{type:Number,required:!1},height:{type:Number,required:!1},rounded:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(s){const{forwardRef:e}=Pe(),t=u_(),n=G(()=>f_[t.placedSide.value]);return(i,r)=>(F(),Fe("span",{ref:o=>{v(t).onArrowChange(o)},style:Zn({position:"absolute",left:v(t).arrowX?.value?`${v(t).arrowX?.value}px`:void 0,top:v(t).arrowY?.value?`${v(t).arrowY?.value}px`:void 0,[n.value]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[v(t).placedSide.value],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[v(t).placedSide.value],visibility:v(t).shouldHideArrow.value?"hidden":void 0})},[B(r0,ye(i.$attrs,{ref:v(e),style:{display:"block"},as:i.as,"as-child":i.asChild,rounded:i.rounded,width:i.width,height:i.height}),{default:I(()=>[J(i.$slots,"default")]),_:3},16,["as","as-child","rounded","width","height"])],4))}}),g_=p_,m_=V({__name:"MenuAnchor",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s;return(t,n)=>(F(),K(v(gp),un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),y_=m_;function v_(){const s=Q(!1);return Ht(()=>{Os("keydown",()=>{s.value=!0},{capture:!0,passive:!0}),Os(["pointerdown","pointermove"],()=>{s.value=!1},{capture:!0,passive:!0})}),s}const b_=Yf(v_),[la,w_]=At(["MenuRoot","MenuSub"],"MenuContext"),[$c,__]=At("MenuRoot");var A_=V({__name:"MenuRoot",props:{open:{type:Boolean,required:!1,default:!1},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(s,{emit:e}){const t=s,n=e,{modal:i,dir:r}=rn(t),o=sa(r),a=_s(t,"open",n),l=Q(),c=b_();return w_({open:a,onOpenChange:u=>{a.value=u},content:l,onContentChange:u=>{l.value=u}}),__({onClose:()=>{a.value=!1},isUsingKeyboardRef:c,dir:o,modal:i}),(u,d)=>(F(),K(v(pp),null,{default:I(()=>[J(u.$slots,"default")]),_:3}))}}),x_=A_;const[Pp,S_]=At("MenuContent");var C_=V({__name:"MenuContentImpl",props:vf({loop:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},disableOutsideScroll:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},{...Ep}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(s,{emit:e}){const t=s,n=e,i=la(),r=$c(),{trapFocus:o,disableOutsidePointerEvents:a,loop:l}=rn(t);Qv(),Qf(a.value);const c=Q(""),u=Q(0),d=Q(0),h=Q(null),f=Q("right"),p=Q(0),g=Q(null),m=Q(),{forwardRef:y,currentElement:_}=Pe(),{handleTypeaheadSearch:w}=pb();He(_,C=>{i.onContentChange(C)}),Ns(()=>{window.clearTimeout(u.value)});function A(C){return f.value===h.value?.side&&dw(C,h.value?.area)}async function S(C){n("openAutoFocus",C),!C.defaultPrevented&&(C.preventDefault(),_.value?.focus({preventScroll:!0}))}function b(C){if(C.defaultPrevented)return;const O=C.target.closest("[data-reka-menu-content]")===C.currentTarget,W=C.ctrlKey||C.altKey||C.metaKey,se=C.key.length===1,z=Gf(C,Nt(),_.value,{loop:l.value,arrowKeyOptions:"vertical",dir:r?.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(z)return z?.focus();if(C.code==="Space")return;const oe=m.value?.getItems()??[];if(O&&(C.key==="Tab"&&C.preventDefault(),!W&&se&&w(C.key,oe)),C.target!==_.value||!lw.includes(C.key))return;C.preventDefault();const q=[...oe.map($=>$.ref)];ap.includes(C.key)&&q.reverse(),cw(q)}function x(C){C?.currentTarget?.contains?.(C.target)||(window.clearTimeout(u.value),c.value="")}function E(C){if(!Ml(C))return;const M=C.target,O=p.value!==C.clientX;if(C?.currentTarget?.contains(M)&&O){const W=C.clientX>p.value?"right":"left";f.value=W,p.value=C.clientX}}return S_({onItemEnter:C=>!!A(C),onItemLeave:C=>{A(C)||(_.value?.focus(),g.value=null)},onTriggerLeave:C=>!!A(C),searchRef:c,pointerGraceTimerRef:d,onPointerGraceIntentChange:C=>{h.value=C}}),(C,M)=>(F(),K(v(op),{"as-child":"",trapped:v(o),onMountAutoFocus:S,onUnmountAutoFocus:M[7]||(M[7]=O=>n("closeAutoFocus",O))},{default:I(()=>[B(v(Pc),{"as-child":"","disable-outside-pointer-events":v(a),onEscapeKeyDown:M[2]||(M[2]=O=>n("escapeKeyDown",O)),onPointerDownOutside:M[3]||(M[3]=O=>n("pointerDownOutside",O)),onFocusOutside:M[4]||(M[4]=O=>n("focusOutside",O)),onInteractOutside:M[5]||(M[5]=O=>n("interactOutside",O)),onDismiss:M[6]||(M[6]=O=>n("dismiss"))},{default:I(()=>[B(v($w),{ref_key:"rovingFocusGroupRef",ref:m,"current-tab-stop-id":g.value,"onUpdate:currentTabStopId":M[0]||(M[0]=O=>g.value=O),"as-child":"",orientation:"vertical",dir:v(r).dir.value,loop:v(l),onEntryFocus:M[1]||(M[1]=O=>{n("entryFocus",O),v(r).isUsingKeyboardRef.value||O.preventDefault()})},{default:I(()=>[B(v(Tp),{ref:v(y),role:"menu",as:C.as,"as-child":C.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":v(lp)(v(i).open.value),dir:v(r).dir.value,side:C.side,"side-offset":C.sideOffset,align:C.align,"align-offset":C.alignOffset,"avoid-collisions":C.avoidCollisions,"collision-boundary":C.collisionBoundary,"collision-padding":C.collisionPadding,"arrow-padding":C.arrowPadding,"prioritize-position":C.prioritizePosition,"position-strategy":C.positionStrategy,"update-position-strategy":C.updatePositionStrategy,sticky:C.sticky,"hide-when-detached":C.hideWhenDetached,reference:C.reference,onKeydown:b,onBlur:x,onPointermove:E},{default:I(()=>[J(C.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),kp=C_,E_=V({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,t=Pp(),{forwardRef:n}=Pe(),{CollectionItem:i}=Mc(),r=Q(!1);async function o(l){l.defaultPrevented||Ml(l)&&(e.disabled?t.onItemLeave(l):t.onItemEnter(l)||l.currentTarget?.focus({preventScroll:!0}))}async function a(l){await st(),!l.defaultPrevented&&Ml(l)&&t.onItemLeave(l)}return(l,c)=>(F(),K(v(i),{value:{textValue:l.textValue}},{default:I(()=>[B(v(Xe),ye({ref:v(n),role:"menuitem",tabindex:"-1"},l.$attrs,{as:l.as,"as-child":l.asChild,"aria-disabled":l.disabled||void 0,"data-disabled":l.disabled?"":void 0,"data-highlighted":r.value?"":void 0,onPointermove:o,onPointerleave:a,onFocus:c[0]||(c[0]=async u=>{await st(),!(u.defaultPrevented||l.disabled)&&(r.value=!0)}),onBlur:c[1]||(c[1]=async u=>{await st(),!u.defaultPrevented&&(r.value=!1)})}),{default:I(()=>[J(l.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),T_=E_,P_=V({__name:"MenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(s,{emit:e}){const t=s,n=e,{forwardRef:i,currentElement:r}=Pe(),o=$c(),a=Pp(),l=Q(!1);async function c(){const u=r.value;if(!t.disabled&&u){const d=new CustomEvent(ow,{bubbles:!0,cancelable:!0});n("select",d),await st(),d.defaultPrevented?l.value=!1:o.onClose()}}return(u,d)=>(F(),K(T_,ye(t,{ref:v(i),onClick:c,onPointerdown:d[0]||(d[0]=()=>{l.value=!0}),onPointerup:d[1]||(d[1]=async h=>{await st(),!h.defaultPrevented&&(l.value||h.currentTarget?.click())}),onKeydown:d[2]||(d[2]=async h=>{const f=v(a).searchRef.value!=="";u.disabled||f&&h.key===" "||v(kl).includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})}),{default:I(()=>[J(u.$slots,"default")]),_:3},16))}}),k_=P_,M_=V({__name:"MenuRootContentModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const t=s,n=e,i=Jt(t,n),r=la(),{forwardRef:o,currentElement:a}=Pe();return np(a),(l,c)=>(F(),K(kp,ye(v(i),{ref:v(o),"trap-focus":v(r).open.value,"disable-outside-pointer-events":v(r).open.value,"disable-outside-scroll":!0,onDismiss:c[0]||(c[0]=u=>v(r).onOpenChange(!1)),onFocusOutside:c[1]||(c[1]=ta(u=>n("focusOutside",u),["prevent"]))}),{default:I(()=>[J(l.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),R_=M_,D_=V({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const i=Jt(s,e),r=la();return(o,a)=>(F(),K(kp,ye(v(i),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=l=>v(r).onOpenChange(!1))}),{default:I(()=>[J(o.$slots,"default")]),_:3},16))}}),I_=D_,O_=V({__name:"MenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const i=Jt(s,e),r=la(),o=$c();return(a,l)=>(F(),K(v(Si),{present:a.forceMount||v(r).open.value},{default:I(()=>[v(o).modal.value?(F(),K(R_,un(ye({key:0},{...a.$attrs,...v(i)})),{default:I(()=>[J(a.$slots,"default")]),_:3},16)):(F(),K(I_,un(ye({key:1},{...a.$attrs,...v(i)})),{default:I(()=>[J(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),L_=O_,F_=V({__name:"MenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=s;return(t,n)=>(F(),K(v(kc),un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),B_=F_;const[Mp,N_]=At("DropdownMenuRoot");var $_=V({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1,default:void 0},dir:{type:String,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(s,{emit:e}){const t=s,n=e;Pe();const i=_s(t,"open",n,{defaultValue:t.defaultOpen,passive:t.open===void 0}),r=Q(),{modal:o,dir:a}=rn(t),l=sa(a);return N_({open:i,onOpenChange:c=>{i.value=c},onOpenToggle:()=>{i.value=!i.value},triggerId:"",triggerElement:r,contentId:"",modal:o,dir:l}),(c,u)=>(F(),K(v(x_),{open:v(i),"onUpdate:open":u[0]||(u[0]=d=>Ue(i)?i.value=d:null),dir:v(l),modal:v(o)},{default:I(()=>[J(c.$slots,"default",{open:v(i)})]),_:3},8,["open","dir","modal"]))}}),q_=$_,H_=V({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean,required:!1},loop:{type:Boolean,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},sideFlip:{type:Boolean,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},alignFlip:{type:Boolean,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1},disableUpdateOnLayoutShift:{type:Boolean,required:!1},prioritizePosition:{type:Boolean,required:!1},reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(s,{emit:e}){const i=Jt(s,e);Pe();const r=Mp(),o=Q(!1);function a(l){l.defaultPrevented||(o.value||setTimeout(()=>{r.triggerElement.value?.focus()},0),o.value=!1,l.preventDefault())}return r.contentId||=gs(void 0,"reka-dropdown-menu-content"),(l,c)=>(F(),K(v(L_),ye(v(i),{id:v(r).contentId,"aria-labelledby":v(r)?.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:c[0]||(c[0]=u=>{if(u.defaultPrevented)return;const d=u.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!v(r).modal.value||f)&&(o.value=!0),v(r).triggerElement.value?.contains(u.target)&&u.preventDefault()})}),{default:I(()=>[J(l.$slots,"default")]),_:3},16,["id","aria-labelledby"]))}}),j_=H_,U_=V({__name:"DropdownMenuItem",props:{disabled:{type:Boolean,required:!1},textValue:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["select"],setup(s,{emit:e}){const t=s,i=Pr(e);return Pe(),(r,o)=>(F(),K(v(k_),un(In({...t,...v(i)})),{default:I(()=>[J(r.$slots,"default")]),_:3},16))}}),V_=U_,z_=V({__name:"DropdownMenuPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=s;return(t,n)=>(F(),K(v(B_),un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),W_=z_,G_=V({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const e=s,t=Mp(),{forwardRef:n,currentElement:i}=Pe();return Ht(()=>{t.triggerElement=i}),t.triggerId||=gs(void 0,"reka-dropdown-menu-trigger"),(r,o)=>(F(),K(v(y_),{"as-child":""},{default:I(()=>[B(v(Xe),{id:v(t).triggerId,ref:v(n),type:r.as==="button"?"button":void 0,"as-child":e.asChild,as:r.as,"aria-haspopup":"menu","aria-expanded":v(t).open.value,"aria-controls":v(t).open.value?v(t).contentId:void 0,"data-disabled":r.disabled?"":void 0,disabled:r.disabled,"data-state":v(t).open.value?"open":"closed",onClick:o[0]||(o[0]=async a=>{!r.disabled&&a.button===0&&a.ctrlKey===!1&&(v(t)?.onOpenToggle(),await st(),v(t).open.value&&a.preventDefault())}),onKeydown:o[1]||(o[1]=Sc(a=>{r.disabled||(["Enter"," "].includes(a.key)&&v(t).onOpenToggle(),a.key==="ArrowDown"&&v(t).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:I(()=>[J(r.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),K_=G_,X_=V({__name:"Label",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"label"}},setup(s){const e=s;return Pe(),(t,n)=>(F(),K(v(Xe),ye(e,{onMousedown:n[0]||(n[0]=i=>{!i.defaultPrevented&&i.detail>1&&i.preventDefault()})}),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),Y_=X_,J_=V({__name:"BaseSeparator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s,t=["horizontal","vertical"];function n(a){return t.includes(a)}const i=G(()=>n(e.orientation)?e.orientation:"horizontal"),r=G(()=>i.value==="vertical"?e.orientation:void 0),o=G(()=>e.decorative?{role:"none"}:{"aria-orientation":r.value,role:"separator"});return(a,l)=>(F(),K(v(Xe),ye({as:a.as,"as-child":a.asChild,"data-orientation":i.value},o.value),{default:I(()=>[J(a.$slots,"default")]),_:3},16,["as","as-child","data-orientation"]))}}),Z_=J_,Q_=V({__name:"Separator",props:{orientation:{type:String,required:!1,default:"horizontal"},decorative:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const e=s;return(t,n)=>(F(),K(Z_,un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),eA=Q_,tA=V({__name:"TooltipArrow",props:{width:{type:Number,required:!1,default:10},height:{type:Number,required:!1,default:5},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"svg"}},setup(s){const e=s;return Pe(),(t,n)=>(F(),K(v(g_),un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),nA=tA;const[qc,sA]=At("TooltipProvider");var iA=V({inheritAttrs:!1,__name:"TooltipProvider",props:{delayDuration:{type:Number,required:!1,default:700},skipDelayDuration:{type:Number,required:!1,default:300},disableHoverableContent:{type:Boolean,required:!1,default:!1},disableClosingTrigger:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:!1}},setup(s){const e=s,{delayDuration:t,skipDelayDuration:n,disableHoverableContent:i,disableClosingTrigger:r,ignoreNonKeyboardFocus:o,disabled:a}=rn(e);Pe();const l=Q(!0),c=Q(!1),{start:u,stop:d}=Zf(()=>{l.value=!0},n,{immediate:!1});return sA({isOpenDelayed:l,delayDuration:t,onOpen(){d(),l.value=!1},onClose(){u()},isPointerInTransitRef:c,disableHoverableContent:i,disableClosingTrigger:r,disabled:a,ignoreNonKeyboardFocus:o}),(h,f)=>J(h.$slots,"default")}}),rA=iA;const Rp="tooltip.open",[ca,oA]=At("TooltipRoot");var aA=V({__name:"TooltipRoot",props:{defaultOpen:{type:Boolean,required:!1,default:!1},open:{type:Boolean,required:!1,default:void 0},delayDuration:{type:Number,required:!1,default:void 0},disableHoverableContent:{type:Boolean,required:!1,default:void 0},disableClosingTrigger:{type:Boolean,required:!1,default:void 0},disabled:{type:Boolean,required:!1,default:void 0},ignoreNonKeyboardFocus:{type:Boolean,required:!1,default:void 0}},emits:["update:open"],setup(s,{emit:e}){const t=s,n=e;Pe();const i=qc(),r=G(()=>t.disableHoverableContent??i.disableHoverableContent.value),o=G(()=>t.disableClosingTrigger??i.disableClosingTrigger.value),a=G(()=>t.disabled??i.disabled.value),l=G(()=>t.delayDuration??i.delayDuration.value),c=G(()=>t.ignoreNonKeyboardFocus??i.ignoreNonKeyboardFocus.value),u=_s(t,"open",n,{defaultValue:t.defaultOpen,passive:t.open===void 0});He(u,w=>{i.onClose&&(w?(i.onOpen(),document.dispatchEvent(new CustomEvent(Rp))):i.onClose())});const d=Q(!1),h=Q(),f=G(()=>u.value?d.value?"delayed-open":"instant-open":"closed"),{start:p,stop:g}=Zf(()=>{d.value=!0,u.value=!0},l,{immediate:!1});function m(){g(),d.value=!1,u.value=!0}function y(){g(),u.value=!1}function _(){p()}return oA({contentId:"",open:u,stateAttribute:f,trigger:h,onTriggerChange(w){h.value=w},onTriggerEnter(){i.isOpenDelayed.value?_():m()},onTriggerLeave(){r.value?y():g()},onOpen:m,onClose:y,disableHoverableContent:r,disableClosingTrigger:o,disabled:a,ignoreNonKeyboardFocus:c}),(w,A)=>(F(),K(v(pp),null,{default:I(()=>[J(w.$slots,"default",{open:v(u)})]),_:3}))}}),lA=aA,cA=V({__name:"TooltipContentImpl",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1,default:0},align:{type:null,required:!1,default:"center"},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1,default:!0},collisionBoundary:{type:null,required:!1,default:()=>[]},collisionPadding:{type:[Number,Object],required:!1,default:0},arrowPadding:{type:Number,required:!1,default:0},sticky:{type:String,required:!1,default:"partial"},hideWhenDetached:{type:Boolean,required:!1,default:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(s,{emit:e}){const t=s,n=e,i=ca(),{forwardRef:r}=Pe(),o=hy(),a=G(()=>o.default?.({})),l=G(()=>{if(t.ariaLabel)return t.ariaLabel;let u="";function d(h){typeof h.children=="string"&&h.type!==dn?u+=h.children:Array.isArray(h.children)&&h.children.forEach(f=>d(f))}return a.value?.forEach(h=>d(h)),u}),c=G(()=>{const{ariaLabel:u,...d}=t;return d});return Ht(()=>{Os(window,"scroll",u=>{u.target?.contains(i.trigger.value)&&i.onClose()}),Os(window,Rp,i.onClose)}),(u,d)=>(F(),K(v(Pc),{"as-child":"","disable-outside-pointer-events":!1,onEscapeKeyDown:d[0]||(d[0]=h=>n("escapeKeyDown",h)),onPointerDownOutside:d[1]||(d[1]=h=>{v(i).disableClosingTrigger.value&&v(i).trigger.value?.contains(h.target)&&h.preventDefault(),n("pointerDownOutside",h)}),onFocusOutside:d[2]||(d[2]=ta(()=>{},["prevent"])),onDismiss:d[3]||(d[3]=h=>v(i).onClose())},{default:I(()=>[B(v(Tp),ye({ref:v(r),"data-state":v(i).stateAttribute.value},{...u.$attrs,...c.value},{style:{"--reka-tooltip-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-tooltip-content-available-width":"var(--reka-popper-available-width)","--reka-tooltip-content-available-height":"var(--reka-popper-available-height)","--reka-tooltip-trigger-width":"var(--reka-popper-anchor-width)","--reka-tooltip-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:I(()=>[J(u.$slots,"default"),B(v(dp),{id:v(i).contentId,role:"tooltip"},{default:I(()=>[qe(nn(l.value),1)]),_:1},8,["id"])]),_:3},16,["data-state"])]),_:3}))}}),Dp=cA,uA=V({__name:"TooltipContentHoverable",props:{ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},setup(s){const t=qs(s),{forwardRef:n,currentElement:i}=Pe(),{trigger:r,onClose:o}=ca(),a=qc(),{isPointerInTransit:l,onPointerExit:c}=tb(r,i);return a.isPointerInTransitRef=l,c(()=>{o()}),(u,d)=>(F(),K(Dp,ye({ref:v(n)},v(t)),{default:I(()=>[J(u.$slots,"default")]),_:3},16))}}),dA=uA,hA=V({__name:"TooltipContent",props:{forceMount:{type:Boolean,required:!1},ariaLabel:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},side:{type:null,required:!1,default:"top"},sideOffset:{type:Number,required:!1},align:{type:null,required:!1},alignOffset:{type:Number,required:!1},avoidCollisions:{type:Boolean,required:!1},collisionBoundary:{type:null,required:!1},collisionPadding:{type:[Number,Object],required:!1},arrowPadding:{type:Number,required:!1},sticky:{type:String,required:!1},hideWhenDetached:{type:Boolean,required:!1},positionStrategy:{type:String,required:!1},updatePositionStrategy:{type:String,required:!1}},emits:["escapeKeyDown","pointerDownOutside"],setup(s,{emit:e}){const t=s,n=e,i=ca(),r=Jt(t,n),{forwardRef:o}=Pe();return(a,l)=>(F(),K(v(Si),{present:a.forceMount||v(i).open.value},{default:I(()=>[(F(),K(vc(v(i).disableHoverableContent.value?Dp:dA),ye({ref:v(o)},v(r)),{default:I(()=>[J(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),fA=hA,pA=V({__name:"TooltipPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(s){const e=s;return(t,n)=>(F(),K(v(kc),un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),gA=pA,mA=V({__name:"TooltipTrigger",props:{reference:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const e=s,t=ca(),n=qc();t.contentId||=gs(void 0,"reka-tooltip-content");const{forwardRef:i,currentElement:r}=Pe(),o=Q(!1),a=Q(!1),l=G(()=>t.disabled.value?{}:{click:g,focus:f,pointermove:d,pointerleave:h,pointerdown:u,blur:p});Ht(()=>{t.onTriggerChange(r.value)});function c(){setTimeout(()=>{o.value=!1},1)}function u(){t.open&&!t.disableClosingTrigger.value&&t.onClose(),o.value=!0,document.addEventListener("pointerup",c,{once:!0})}function d(m){m.pointerType!=="touch"&&!a.value&&!n.isPointerInTransitRef.value&&(t.onTriggerEnter(),a.value=!0)}function h(){t.onTriggerLeave(),a.value=!1}function f(m){o.value||t.ignoreNonKeyboardFocus.value&&!m.target.matches?.(":focus-visible")||t.onOpen()}function p(){t.onClose()}function g(){t.disableClosingTrigger.value||t.onClose()}return(m,y)=>(F(),K(v(gp),{"as-child":"",reference:m.reference},{default:I(()=>[B(v(Xe),ye({ref:v(i),"aria-describedby":v(t).open.value?v(t).contentId:void 0,"data-state":v(t).stateAttribute.value,as:m.as,"as-child":e.asChild,"data-grace-area-trigger":""},uy(l.value)),{default:I(()=>[J(m.$slots,"default")]),_:3},16,["aria-describedby","data-state","as","as-child"])]),_:3},8,["reference"]))}}),yA=mA;const vA=V({__name:"Tooltip",props:{defaultOpen:{type:Boolean},open:{type:Boolean},delayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},emits:["update:open"],setup(s,{emit:e}){const i=Jt(s,e);return(r,o)=>(F(),K(v(lA),ye({"data-slot":"tooltip"},v(i)),{default:I(()=>[J(r.$slots,"default")]),_:3},16))}});function bA(s){return Ar()?(Uo(s),!0):!1}const Ua=new WeakMap,wA=(...s)=>{var e;const t=s[0],n=(e=Mt())==null?void 0:e.proxy;if(n==null&&!bc())throw new Error("injectLocal must be called in setup");return n&&Ua.has(n)&&t in Ua.get(n)?Ua.get(n)[t]:Gt(...s)};function _A(s){if(!Ue(s))return dt(s);const e=new Proxy({},{get(t,n,i){return v(Reflect.get(s.value,n,i))},set(t,n,i){return Ue(s.value[n])&&!Ue(i)?s.value[n].value=i:s.value[n]=i,!0},deleteProperty(t,n){return Reflect.deleteProperty(s.value,n)},has(t,n){return Reflect.has(s.value,n)},ownKeys(){return Object.keys(s.value)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}});return dt(e)}function AA(s){return _A(G(s))}function Zt(s,...e){const t=e.flat(),n=t[0];return AA(()=>Object.fromEntries(typeof n=="function"?Object.entries(rn(s)).filter(([i,r])=>!n(Ze(r),i)):Object.entries(rn(s)).filter(i=>!t.includes(i[0]))))}const xA=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const SA=s=>typeof s<"u",CA=Object.prototype.toString,EA=s=>CA.call(s)==="[object Object]",TA=()=>{};function Ip(...s){if(s.length!==1)return gc(...s);const e=s[0];return typeof e=="function"?xi(nf(()=>({get:e,set:TA}))):Q(e)}function PA(s,e){function t(...n){return new Promise((i,r)=>{Promise.resolve(s(()=>e.apply(this,n),{fn:e,thisArg:this,args:n})).then(i).catch(r)})}return t}const Op=s=>s();function kA(s=Op,e={}){const{initialState:t="active"}=e,n=Ip(t==="active");function i(){n.value=!1}function r(){n.value=!0}const o=(...a)=>{n.value&&s(...a)};return{isActive:xi(n),pause:i,resume:r,eventFilter:o}}function pd(s){return s.endsWith("rem")?Number.parseFloat(s)*16:Number.parseFloat(s)}function Va(s){return Array.isArray(s)?s:[s]}function MA(s){return Mt()}function RA(s,e,t={}){const{eventFilter:n=Op,...i}=t;return He(s,PA(n,e),i)}function DA(s,e,t={}){const{eventFilter:n,initialState:i="active",...r}=t,{eventFilter:o,pause:a,resume:l,isActive:c}=kA(n,{initialState:i});return{stop:RA(s,e,{...r,eventFilter:o}),pause:a,resume:l,isActive:c}}function Lp(s,e=!0,t){MA()?Ht(s,t):e?s():st(s)}function IA(s,e,t){return He(s,e,{...t,immediate:!0})}const fr=xA?window:void 0;function Fp(s){var e;const t=Ze(s);return(e=t?.$el)!=null?e:t}function Fl(...s){const e=[],t=()=>{e.forEach(a=>a()),e.length=0},n=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),i=G(()=>{const a=Va(Ze(s[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),r=IA(()=>{var a,l;return[(l=(a=i.value)==null?void 0:a.map(c=>Fp(c)))!=null?l:[fr].filter(c=>c!=null),Va(Ze(i.value?s[1]:s[0])),Va(v(i.value?s[2]:s[1])),Ze(i.value?s[3]:s[2])]},([a,l,c,u])=>{if(t(),!a?.length||!l?.length||!c?.length)return;const d=EA(u)?{...u}:u;e.push(...a.flatMap(h=>l.flatMap(f=>c.map(p=>n(h,f,p,d)))))},{flush:"post"}),o=()=>{r(),t()};return bA(t),o}function OA(){const s=cn(!1),e=Mt();return e&&Ht(()=>{s.value=!0},e),s}function LA(s){const e=OA();return G(()=>(e.value,!!s()))}const FA=Symbol("vueuse-ssr-width");function BA(){const s=bc()?wA(FA,null):null;return typeof s=="number"?s:void 0}function NA(s,e={}){const{window:t=fr,ssrWidth:n=BA()}=e,i=LA(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function"),r=cn(typeof n=="number"),o=cn(),a=cn(!1),l=c=>{a.value=c.matches};return Yt(()=>{if(r.value){r.value=!i.value;const c=Ze(s).split(",");a.value=c.some(u=>{const d=u.includes("not all"),h=u.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),f=u.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let p=!!(h||f);return h&&p&&(p=n>=pd(h[1])),f&&p&&(p=n<=pd(f[1])),d?!p:p});return}i.value&&(o.value=t.matchMedia(Ze(s)),a.value=o.value.matches)}),Fl(o,"change",l,{passive:!0}),G(()=>a.value)}function $A(s){return JSON.parse(JSON.stringify(s))}const Wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gr="__vueuse_ssr_handlers__",qA=HA();function HA(){return Gr in Wr||(Wr[Gr]=Wr[Gr]||{}),Wr[Gr]}function Bp(s,e){return qA[s]||e}function jA(s){return NA("(prefers-color-scheme: dark)",s)}function UA(s){return s==null?"any":s instanceof Set?"set":s instanceof Map?"map":s instanceof Date?"date":typeof s=="boolean"?"boolean":typeof s=="string"?"string":typeof s=="object"?"object":Number.isNaN(s)?"any":"number"}const VA={boolean:{read:s=>s==="true",write:s=>String(s)},object:{read:s=>JSON.parse(s),write:s=>JSON.stringify(s)},number:{read:s=>Number.parseFloat(s),write:s=>String(s)},any:{read:s=>s,write:s=>String(s)},string:{read:s=>s,write:s=>String(s)},map:{read:s=>new Map(JSON.parse(s)),write:s=>JSON.stringify(Array.from(s.entries()))},set:{read:s=>new Set(JSON.parse(s)),write:s=>JSON.stringify(Array.from(s))},date:{read:s=>new Date(s),write:s=>s.toISOString()}},gd="vueuse-storage";function zA(s,e,t,n={}){var i;const{flush:r="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:c=!1,shallow:u,window:d=fr,eventFilter:h,onError:f=z=>{console.error(z)},initOnMounted:p}=n,g=(u?cn:Q)(typeof e=="function"?e():e),m=G(()=>Ze(s));if(!t)try{t=Bp("getDefaultStorage",()=>{var z;return(z=fr)==null?void 0:z.localStorage})()}catch(z){f(z)}if(!t)return g;const y=Ze(e),_=UA(y),w=(i=n.serializer)!=null?i:VA[_],{pause:A,resume:S}=DA(g,z=>M(z),{flush:r,deep:o,eventFilter:h});He(m,()=>W(),{flush:r});let b=!1;const x=z=>{p&&!b||W(z)},E=z=>{p&&!b||se(z)};d&&a&&(t instanceof Storage?Fl(d,"storage",x,{passive:!0}):Fl(d,gd,E)),p?Lp(()=>{b=!0,W()}):W();function C(z,oe){if(d){const q={key:m.value,oldValue:z,newValue:oe,storageArea:t};d.dispatchEvent(t instanceof Storage?new StorageEvent("storage",q):new CustomEvent(gd,{detail:q}))}}function M(z){try{const oe=t.getItem(m.value);if(z==null)C(oe,null),t.removeItem(m.value);else{const q=w.write(z);oe!==q&&(t.setItem(m.value,q),C(oe,q))}}catch(oe){f(oe)}}function O(z){const oe=z?z.newValue:t.getItem(m.value);if(oe==null)return l&&y!=null&&t.setItem(m.value,w.write(y)),y;if(!z&&c){const q=w.read(oe);return typeof c=="function"?c(q,y):_==="object"&&!Array.isArray(q)?{...y,...q}:q}else return typeof oe!="string"?oe:w.read(oe)}function W(z){if(!(z&&z.storageArea!==t)){if(z&&z.key==null){g.value=y;return}if(!(z&&z.key!==m.value)){A();try{const oe=w.write(g.value);(z===void 0||z?.newValue!==oe)&&(g.value=O(z))}catch(oe){f(oe)}finally{z?st(S):S()}}}}function se(z){W(z.detail)}return g}const WA="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function GA(s={}){const{selector:e="html",attribute:t="class",initialValue:n="auto",window:i=fr,storage:r,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:c,disableTransition:u=!0}=s,d={auto:"",light:"light",dark:"dark",...s.modes||{}},h=jA({window:i}),f=G(()=>h.value?"dark":"light"),p=l||(o==null?Ip(n):zA(o,n,r,{window:i,listenToStorageChanges:a})),g=G(()=>p.value==="auto"?f.value:p.value),m=Bp("updateHTMLAttrs",(A,S,b)=>{const x=typeof A=="string"?i?.document.querySelector(A):Fp(A);if(!x)return;const E=new Set,C=new Set;let M=null;if(S==="class"){const W=b.split(/\s/g);Object.values(d).flatMap(se=>(se||"").split(/\s/g)).filter(Boolean).forEach(se=>{W.includes(se)?E.add(se):C.add(se)})}else M={key:S,value:b};if(E.size===0&&C.size===0&&M===null)return;let O;u&&(O=i.document.createElement("style"),O.appendChild(document.createTextNode(WA)),i.document.head.appendChild(O));for(const W of E)x.classList.add(W);for(const W of C)x.classList.remove(W);M&&x.setAttribute(M.key,M.value),u&&(i.getComputedStyle(O).opacity,document.head.removeChild(O))});function y(A){var S;m(e,t,(S=d[A])!=null?S:A)}function _(A){s.onChanged?s.onChanged(A,y):y(A)}He(g,_,{flush:"post",immediate:!0}),Lp(()=>_(g.value));const w=G({get(){return c?p.value:g.value},set(A){p.value=A}});return Object.assign(w,{store:p,system:f,state:g})}function KA(s,e,t,n={}){var i,r,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d,shouldEmit:h}=n,f=Mt(),p=t||f?.emit||((i=f?.$emit)==null?void 0:i.bind(f))||((o=(r=f?.proxy)==null?void 0:r.$emit)==null?void 0:o.bind(f?.proxy));let g=c;g=g||`update:${e.toString()}`;const m=w=>a?typeof a=="function"?a(w):$A(w):w,y=()=>SA(s[e])?m(s[e]):d,_=w=>{h?h(w)&&p(g,w):p(g,w)};if(l){const w=y(),A=Q(w);let S=!1;return He(()=>s[e],b=>{S||(S=!0,A.value=m(b),st(()=>S=!1))}),He(A,b=>{!S&&(b!==s[e]||u)&&_(b)},{deep:u}),A}else return G({get(){return y()},set(w){_(w)}})}function Np(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(e=0;e<i;e++)s[e]&&(t=Np(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function $p(){for(var s,e,t=0,n="",i=arguments.length;t<i;t++)(s=arguments[t])&&(e=Np(s))&&(n&&(n+=" "),n+=e);return n}const Hc="-",XA=s=>{const e=JA(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:o=>{const a=o.split(Hc);return a[0]===""&&a.length!==1&&a.shift(),qp(a,e)||YA(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},qp=(s,e)=>{if(s.length===0)return e.classGroupId;const t=s[0],n=e.nextPart.get(t),i=n?qp(s.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const r=s.join(Hc);return e.validators.find(({validator:o})=>o(r))?.classGroupId},md=/^\[(.+)\]$/,YA=s=>{if(md.test(s)){const e=md.exec(s)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},JA=s=>{const{theme:e,classGroups:t}=s,n={nextPart:new Map,validators:[]};for(const i in t)Bl(t[i],n,i,e);return n},Bl=(s,e,t,n)=>{s.forEach(i=>{if(typeof i=="string"){const r=i===""?e:yd(e,i);r.classGroupId=t;return}if(typeof i=="function"){if(ZA(i)){Bl(i(n),e,t,n);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([r,o])=>{Bl(o,yd(e,r),t,n)})})},yd=(s,e)=>{let t=s;return e.split(Hc).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},ZA=s=>s.isThemeGetter,QA=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const i=(r,o)=>{t.set(r,o),e++,e>s&&(e=0,n=t,t=new Map)};return{get(r){let o=t.get(r);if(o!==void 0)return o;if((o=n.get(r))!==void 0)return i(r,o),o},set(r,o){t.has(r)?t.set(r,o):i(r,o)}}},Nl="!",$l=":",ex=$l.length,tx=s=>{const{prefix:e,experimentalParseClassName:t}=s;let n=i=>{const r=[];let o=0,a=0,l=0,c;for(let p=0;p<i.length;p++){let g=i[p];if(o===0&&a===0){if(g===$l){r.push(i.slice(l,p)),l=p+ex;continue}if(g==="/"){c=p;continue}}g==="["?o++:g==="]"?o--:g==="("?a++:g===")"&&a--}const u=r.length===0?i:i.substring(l),d=nx(u),h=d!==u,f=c&&c>l?c-l:void 0;return{modifiers:r,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:f}};if(e){const i=e+$l,r=n;n=o=>o.startsWith(i)?r(o.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const i=n;n=r=>t({className:r,parseClassName:i})}return n},nx=s=>s.endsWith(Nl)?s.substring(0,s.length-1):s.startsWith(Nl)?s.substring(1):s,sx=s=>{const e=Object.fromEntries(s.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const i=[];let r=[];return n.forEach(o=>{o[0]==="["||e[o]?(i.push(...r.sort(),o),r=[]):r.push(o)}),i.push(...r.sort()),i}},ix=s=>({cache:QA(s.cacheSize),parseClassName:tx(s),sortModifiers:sx(s),...XA(s)}),rx=/\s+/,ox=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:r}=e,o=[],a=s.trim().split(rx);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=t(u);if(d){l=u+(l.length>0?" "+l:l);continue}let m=!!g,y=n(m?p.substring(0,g):p);if(!y){if(!m){l=u+(l.length>0?" "+l:l);continue}if(y=n(p),!y){l=u+(l.length>0?" "+l:l);continue}m=!1}const _=r(h).join(":"),w=f?_+Nl:_,A=w+y;if(o.includes(A))continue;o.push(A);const S=i(y,m);for(let b=0;b<S.length;++b){const x=S[b];o.push(w+x)}l=u+(l.length>0?" "+l:l)}return l};function ax(){let s=0,e,t,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Hp(e))&&(n&&(n+=" "),n+=t);return n}const Hp=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=Hp(s[n]))&&(t&&(t+=" "),t+=e);return t};function lx(s,...e){let t,n,i,r=o;function o(l){const c=e.reduce((u,d)=>d(u),s());return t=ix(c),n=t.cache.get,i=t.cache.set,r=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=ox(l,t);return i(l,u),u}return function(){return r(ax.apply(null,arguments))}}const ct=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},jp=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Up=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cx=/^\d+\/\d+$/,ux=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,fx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,px=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xs=s=>cx.test(s),ke=s=>!!s&&!Number.isNaN(Number(s)),ns=s=>!!s&&Number.isInteger(Number(s)),za=s=>s.endsWith("%")&&ke(s.slice(0,-1)),Bn=s=>ux.test(s),gx=()=>!0,mx=s=>dx.test(s)&&!hx.test(s),Vp=()=>!1,yx=s=>fx.test(s),vx=s=>px.test(s),bx=s=>!he(s)&&!fe(s),wx=s=>Ei(s,Gp,Vp),he=s=>jp.test(s),Cs=s=>Ei(s,Kp,mx),Wa=s=>Ei(s,Cx,ke),vd=s=>Ei(s,zp,Vp),_x=s=>Ei(s,Wp,vx),Kr=s=>Ei(s,Xp,yx),fe=s=>Up.test(s),Di=s=>Ti(s,Kp),Ax=s=>Ti(s,Ex),bd=s=>Ti(s,zp),xx=s=>Ti(s,Gp),Sx=s=>Ti(s,Wp),Xr=s=>Ti(s,Xp,!0),Ei=(s,e,t)=>{const n=jp.exec(s);return n?n[1]?e(n[1]):t(n[2]):!1},Ti=(s,e,t=!1)=>{const n=Up.exec(s);return n?n[1]?e(n[1]):t:!1},zp=s=>s==="position"||s==="percentage",Wp=s=>s==="image"||s==="url",Gp=s=>s==="length"||s==="size"||s==="bg-size",Kp=s=>s==="length",Cx=s=>s==="number",Ex=s=>s==="family-name",Xp=s=>s==="shadow",Tx=()=>{const s=ct("color"),e=ct("font"),t=ct("text"),n=ct("font-weight"),i=ct("tracking"),r=ct("leading"),o=ct("breakpoint"),a=ct("container"),l=ct("spacing"),c=ct("radius"),u=ct("shadow"),d=ct("inset-shadow"),h=ct("text-shadow"),f=ct("drop-shadow"),p=ct("blur"),g=ct("perspective"),m=ct("aspect"),y=ct("ease"),_=ct("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],A=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...A(),fe,he],b=()=>["auto","hidden","clip","visible","scroll"],x=()=>["auto","contain","none"],E=()=>[fe,he,l],C=()=>[Xs,"full","auto",...E()],M=()=>[ns,"none","subgrid",fe,he],O=()=>["auto",{span:["full",ns,fe,he]},ns,fe,he],W=()=>[ns,"auto",fe,he],se=()=>["auto","min","max","fr",fe,he],z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...E()],$=()=>[Xs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],k=()=>[s,fe,he],L=()=>[...A(),bd,vd,{position:[fe,he]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ee=()=>["auto","cover","contain",xx,wx,{size:[fe,he]}],N=()=>[za,Di,Cs],ie=()=>["","none","full",c,fe,he],we=()=>["",ke,Di,Cs],Ce=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>[ke,za,bd,vd],te=()=>["","none",p,fe,he],Z=()=>["none",ke,fe,he],ce=()=>["none",ke,fe,he],Re=()=>[ke,fe,he],T=()=>[Xs,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Bn],breakpoint:[Bn],color:[gx],container:[Bn],"drop-shadow":[Bn],ease:["in","out","in-out"],font:[bx],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Bn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Bn],shadow:[Bn],spacing:["px",ke],text:[Bn],"text-shadow":[Bn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xs,he,fe,m]}],container:["container"],columns:[{columns:[ke,he,fe,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:x()}],"overscroll-x":[{"overscroll-x":x()}],"overscroll-y":[{"overscroll-y":x()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[ns,"auto",fe,he]}],basis:[{basis:[Xs,"full","auto",a,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ke,Xs,"auto","initial","none",he]}],grow:[{grow:["",ke,fe,he]}],shrink:[{shrink:["",ke,fe,he]}],order:[{order:[ns,"first","last","none",fe,he]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:O()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:O()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":se()}],"auto-rows":[{"auto-rows":se()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...z(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...z()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":z()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:$()}],w:[{w:[a,"screen",...$()]}],"min-w":[{"min-w":[a,"screen","none",...$()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...$()]}],h:[{h:["screen","lh",...$()]}],"min-h":[{"min-h":["screen","lh","none",...$()]}],"max-h":[{"max-h":["screen","lh",...$()]}],"font-size":[{text:["base",t,Di,Cs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,fe,Wa]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",za,he]}],"font-family":[{font:[Ax,he,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,fe,he]}],"line-clamp":[{"line-clamp":[ke,"none",fe,Wa]}],leading:[{leading:[r,...E()]}],"list-image":[{"list-image":["none",fe,he]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",fe,he]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:k()}],"text-color":[{text:k()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ce(),"wavy"]}],"text-decoration-thickness":[{decoration:[ke,"from-font","auto",fe,Cs]}],"text-decoration-color":[{decoration:k()}],"underline-offset":[{"underline-offset":[ke,"auto",fe,he]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe,he]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe,he]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:L()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:ee()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ns,fe,he],radial:["",fe,he],conic:[ns,fe,he]},Sx,_x]}],"bg-color":[{bg:k()}],"gradient-from-pos":[{from:N()}],"gradient-via-pos":[{via:N()}],"gradient-to-pos":[{to:N()}],"gradient-from":[{from:k()}],"gradient-via":[{via:k()}],"gradient-to":[{to:k()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ce(),"hidden","none"]}],"divide-style":[{divide:[...Ce(),"hidden","none"]}],"border-color":[{border:k()}],"border-color-x":[{"border-x":k()}],"border-color-y":[{"border-y":k()}],"border-color-s":[{"border-s":k()}],"border-color-e":[{"border-e":k()}],"border-color-t":[{"border-t":k()}],"border-color-r":[{"border-r":k()}],"border-color-b":[{"border-b":k()}],"border-color-l":[{"border-l":k()}],"divide-color":[{divide:k()}],"outline-style":[{outline:[...Ce(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ke,fe,he]}],"outline-w":[{outline:["",ke,Di,Cs]}],"outline-color":[{outline:k()}],shadow:[{shadow:["","none",u,Xr,Kr]}],"shadow-color":[{shadow:k()}],"inset-shadow":[{"inset-shadow":["none",d,Xr,Kr]}],"inset-shadow-color":[{"inset-shadow":k()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:k()}],"ring-offset-w":[{"ring-offset":[ke,Cs]}],"ring-offset-color":[{"ring-offset":k()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":k()}],"text-shadow":[{"text-shadow":["none",h,Xr,Kr]}],"text-shadow-color":[{"text-shadow":k()}],opacity:[{opacity:[ke,fe,he]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ke]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":k()}],"mask-image-linear-to-color":[{"mask-linear-to":k()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":k()}],"mask-image-t-to-color":[{"mask-t-to":k()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":k()}],"mask-image-r-to-color":[{"mask-r-to":k()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":k()}],"mask-image-b-to-color":[{"mask-b-to":k()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":k()}],"mask-image-l-to-color":[{"mask-l-to":k()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":k()}],"mask-image-x-to-color":[{"mask-x-to":k()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":k()}],"mask-image-y-to-color":[{"mask-y-to":k()}],"mask-image-radial":[{"mask-radial":[fe,he]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":k()}],"mask-image-radial-to-color":[{"mask-radial-to":k()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":A()}],"mask-image-conic-pos":[{"mask-conic":[ke]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":k()}],"mask-image-conic-to-color":[{"mask-conic-to":k()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:L()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:ee()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",fe,he]}],filter:[{filter:["","none",fe,he]}],blur:[{blur:te()}],brightness:[{brightness:[ke,fe,he]}],contrast:[{contrast:[ke,fe,he]}],"drop-shadow":[{"drop-shadow":["","none",f,Xr,Kr]}],"drop-shadow-color":[{"drop-shadow":k()}],grayscale:[{grayscale:["",ke,fe,he]}],"hue-rotate":[{"hue-rotate":[ke,fe,he]}],invert:[{invert:["",ke,fe,he]}],saturate:[{saturate:[ke,fe,he]}],sepia:[{sepia:["",ke,fe,he]}],"backdrop-filter":[{"backdrop-filter":["","none",fe,he]}],"backdrop-blur":[{"backdrop-blur":te()}],"backdrop-brightness":[{"backdrop-brightness":[ke,fe,he]}],"backdrop-contrast":[{"backdrop-contrast":[ke,fe,he]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ke,fe,he]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ke,fe,he]}],"backdrop-invert":[{"backdrop-invert":["",ke,fe,he]}],"backdrop-opacity":[{"backdrop-opacity":[ke,fe,he]}],"backdrop-saturate":[{"backdrop-saturate":[ke,fe,he]}],"backdrop-sepia":[{"backdrop-sepia":["",ke,fe,he]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",fe,he]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ke,"initial",fe,he]}],ease:[{ease:["linear","initial",y,fe,he]}],delay:[{delay:[ke,fe,he]}],animate:[{animate:["none",_,fe,he]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,fe,he]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:Z()}],"rotate-x":[{"rotate-x":Z()}],"rotate-y":[{"rotate-y":Z()}],"rotate-z":[{"rotate-z":Z()}],scale:[{scale:ce()}],"scale-x":[{"scale-x":ce()}],"scale-y":[{"scale-y":ce()}],"scale-z":[{"scale-z":ce()}],"scale-3d":["scale-3d"],skew:[{skew:Re()}],"skew-x":[{"skew-x":Re()}],"skew-y":[{"skew-y":Re()}],transform:[{transform:[fe,he,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:T()}],"translate-x":[{"translate-x":T()}],"translate-y":[{"translate-y":T()}],"translate-z":[{"translate-z":T()}],"translate-none":["translate-none"],accent:[{accent:k()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:k()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe,he]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe,he]}],fill:[{fill:["none",...k()]}],"stroke-w":[{stroke:[ke,Di,Cs,Wa]}],stroke:[{stroke:["none",...k()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Px=lx(Tx);function rt(...s){return Px($p(s))}const kx=V({inheritAttrs:!1,__name:"TooltipContent",props:{forceMount:{type:Boolean},ariaLabel:{},asChild:{type:Boolean},as:{},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},class:{}},emits:["escapeKeyDown","pointerDownOutside"],setup(s,{emit:e}){const t=s,n=e,i=Zt(t,"class"),r=Jt(i,n);return(o,a)=>(F(),K(v(gA),null,{default:I(()=>[B(v(fA),ye({"data-slot":"tooltip-content"},{...v(r),...o.$attrs},{class:v(rt)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit rounded-md px-3 py-1.5 text-xs text-balance",t.class)}),{default:I(()=>[J(o.$slots,"default"),B(v(nA),{class:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]),_:3},16,["class"])]),_:3}))}}),Mx=V({__name:"TooltipProvider",props:{delayDuration:{default:0},skipDelayDuration:{},disableHoverableContent:{type:Boolean},disableClosingTrigger:{type:Boolean},disabled:{type:Boolean},ignoreNonKeyboardFocus:{type:Boolean}},setup(s){const e=s;return(t,n)=>(F(),K(v(rA),un(In(e)),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),Rx=V({__name:"TooltipTrigger",props:{reference:{},asChild:{type:Boolean},as:{}},setup(s){const e=s;return(t,n)=>(F(),K(v(yA),ye({"data-slot":"tooltip-trigger"},e),{default:I(()=>[J(t.$slots,"default")]),_:3},16))}}),Dx="/jrtech-infra-annotator/jrtech-on-logo.png",wd=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,_d=$p,Ix=(s,e)=>t=>{var n;if(e?.variants==null)return _d(s,t?.class,t?.className);const{variants:i,defaultVariants:r}=e,o=Object.keys(i).map(c=>{const u=t?.[c],d=r?.[c];if(u===null)return null;const h=wd(u)||wd(d);return i[c][h]}),a=t&&Object.entries(t).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(p=>{let[g,m]=p;return Array.isArray(m)?m.includes({...r,...a}[g]):{...r,...a}[g]===m})?[...c,d,h]:c},[]);return _d(s,o,l,t?.class,t?.className)},Bt=V({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(s){const e=s;return(t,n)=>(F(),K(v(Xe),{"data-slot":"button",as:t.as,"as-child":t.asChild,class:qt(v(rt)(v(Ox)({variant:t.variant,size:t.size}),e.class))},{default:I(()=>[J(t.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),Ox=Ix("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),cs=V({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class");return(n,i)=>(F(),K(v(Y_),ye({"data-slot":"label"},v(t),{class:v(rt)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e.class)}),{default:I(()=>[J(n.$slots,"default")]),_:3},16,["class"]))}}),Mo=V({__name:"Separator",props:{orientation:{default:"horizontal"},decorative:{type:Boolean,default:!0},asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class");return(n,i)=>(F(),K(v(eA),ye({"data-slot":"separator-root"},v(t),{class:v(rt)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e.class)}),null,16,["class"]))}}),Lx=V({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:e}){const i=Jt(s,e);return(r,o)=>(F(),K(v(q_),ye({"data-slot":"dropdown-menu"},v(i)),{default:I(()=>[J(r.$slots,"default")]),_:3},16))}});/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Fx=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Bx=s=>{const e=Fx(s);return e.charAt(0).toUpperCase()+e.slice(1)},Nx=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),xd=s=>s==="";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ii={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=({name:s,iconNode:e,absoluteStrokeWidth:t,"absolute-stroke-width":n,strokeWidth:i,"stroke-width":r,size:o=Ii.width,color:a=Ii.stroke,...l},{slots:c})=>Kt("svg",{...Ii,...l,width:o,height:o,stroke:a,"stroke-width":xd(t)||xd(n)||t===!0||n===!0?Number(i||r||Ii["stroke-width"])*24/Number(o):i||r||Ii["stroke-width"],class:Nx("lucide",l.class,...s?[`lucide-${Ad(Bx(s))}-icon`,`lucide-${Ad(s)}`]:["lucide-icon"])},[...e.map(u=>Kt(...u)),...c.default?[c.default()]:[]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(s,e)=>(t,{slots:n,attrs:i})=>Kt($x,{...i,...t,iconNode:e,name:s},n);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=Rt("antenna",[["path",{d:"M2 12 7 2",key:"117k30"}],["path",{d:"m7 12 5-10",key:"1tvx22"}],["path",{d:"m12 12 5-10",key:"ev1o1a"}],["path",{d:"m17 12 5-10",key:"1e4ti3"}],["path",{d:"M4.5 7h15",key:"vlsxkz"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=Rt("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=Rt("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Rt("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Rt("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Rt("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=Rt("image-plus",[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Rt("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=Rt("mouse-pointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=Rt("ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=Rt("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=Rt("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Rt("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Rt("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Rt("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Yx=V({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},sideFlip:{type:Boolean},align:{},alignOffset:{},alignFlip:{type:Boolean},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(s,{emit:e}){const t=s,n=e,i=Zt(t,"class"),r=Jt(i,n);return(o,a)=>(F(),K(v(W_),null,{default:I(()=>[B(v(j_),ye({"data-slot":"dropdown-menu-content"},v(r),{class:v(rt)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--reka-dropdown-menu-content-available-height) min-w-[8rem] origin-(--reka-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t.class)}),{default:I(()=>[J(o.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Ga=V({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean},variant:{default:"default"}},setup(s){const e=s,t=Zt(e,"inset","variant","class"),n=qs(t);return(i,r)=>(F(),K(v(V_),ye({"data-slot":"dropdown-menu-item","data-inset":i.inset?"":void 0,"data-variant":i.variant},v(n),{class:v(rt)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive-foreground data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/40 data-[variant=destructive]:focus:text-destructive-foreground data-[variant=destructive]:*:[svg]:!text-destructive-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e.class)}),{default:I(()=>[J(i.$slots,"default")]),_:3},16,["data-inset","data-variant","class"]))}}),Jx=V({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(s){const t=qs(s);return(n,i)=>(F(),K(v(K_),ye({"data-slot":"dropdown-menu-trigger"},v(t)),{default:I(()=>[J(n.$slots,"default")]),_:3},16))}}),Jp=/^[a-z0-9]+(-[a-z0-9]+)*$/,ua=(s,e,t,n="")=>{const i=s.split(":");if(s.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),l=i.pop(),c={provider:i.length>0?i[0]:n,prefix:l,name:a};return e&&!uo(c)?null:c}const r=i[0],o=r.split("-");if(o.length>1){const a={provider:n,prefix:o.shift(),name:o.join("-")};return e&&!uo(a)?null:a}if(t&&n===""){const a={provider:n,prefix:"",name:r};return e&&!uo(a,t)?null:a}return null},uo=(s,e)=>s?!!((e&&s.prefix===""||s.prefix)&&s.name):!1,Zp=Object.freeze({left:0,top:0,width:16,height:16}),Do=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),da=Object.freeze({...Zp,...Do}),Hl=Object.freeze({...da,body:"",hidden:!1});function Zx(s,e){const t={};!s.hFlip!=!e.hFlip&&(t.hFlip=!0),!s.vFlip!=!e.vFlip&&(t.vFlip=!0);const n=((s.rotate||0)+(e.rotate||0))%4;return n&&(t.rotate=n),t}function Cd(s,e){const t=Zx(s,e);for(const n in Hl)n in Do?n in s&&!(n in t)&&(t[n]=Do[n]):n in e?t[n]=e[n]:n in s&&(t[n]=s[n]);return t}function Qx(s,e){const t=s.icons,n=s.aliases||Object.create(null),i=Object.create(null);function r(o){if(t[o])return i[o]=[];if(!(o in i)){i[o]=null;const a=n[o]&&n[o].parent,l=a&&r(a);l&&(i[o]=[a].concat(l))}return i[o]}return Object.keys(t).concat(Object.keys(n)).forEach(r),i}function eS(s,e,t){const n=s.icons,i=s.aliases||Object.create(null);let r={};function o(a){r=Cd(n[a]||i[a],r)}return o(e),t.forEach(o),Cd(s,r)}function Qp(s,e){const t=[];if(typeof s!="object"||typeof s.icons!="object")return t;s.not_found instanceof Array&&s.not_found.forEach(i=>{e(i,null),t.push(i)});const n=Qx(s);for(const i in n){const r=n[i];r&&(e(i,eS(s,i,r)),t.push(i))}return t}const tS={provider:"",aliases:{},not_found:{},...Zp};function Ka(s,e){for(const t in e)if(t in s&&typeof s[t]!=typeof e[t])return!1;return!0}function eg(s){if(typeof s!="object"||s===null)return null;const e=s;if(typeof e.prefix!="string"||!s.icons||typeof s.icons!="object"||!Ka(s,tS))return null;const t=e.icons;for(const i in t){const r=t[i];if(!i||typeof r.body!="string"||!Ka(r,Hl))return null}const n=e.aliases||Object.create(null);for(const i in n){const r=n[i],o=r.parent;if(!i||typeof o!="string"||!t[o]&&!n[o]||!Ka(r,Hl))return null}return e}const Ed=Object.create(null);function nS(s,e){return{provider:s,prefix:e,icons:Object.create(null),missing:new Set}}function bi(s,e){const t=Ed[s]||(Ed[s]=Object.create(null));return t[e]||(t[e]=nS(s,e))}function tg(s,e){return eg(e)?Qp(e,(t,n)=>{n?s.icons[t]=n:s.missing.add(t)}):[]}function sS(s,e,t){try{if(typeof t.body=="string")return s.icons[e]={...t},!0}catch{}return!1}let pr=!1;function ng(s){return typeof s=="boolean"&&(pr=s),pr}function iS(s){const e=typeof s=="string"?ua(s,!0,pr):s;if(e){const t=bi(e.provider,e.prefix),n=e.name;return t.icons[n]||(t.missing.has(n)?null:void 0)}}function rS(s,e){const t=ua(s,!0,pr);if(!t)return!1;const n=bi(t.provider,t.prefix);return e?sS(n,t.name,e):(n.missing.add(t.name),!0)}function oS(s,e){if(typeof s!="object")return!1;if(typeof e!="string"&&(e=s.provider||""),pr&&!e&&!s.prefix){let i=!1;return eg(s)&&(s.prefix="",Qp(s,(r,o)=>{rS(r,o)&&(i=!0)})),i}const t=s.prefix;if(!uo({prefix:t,name:"a"}))return!1;const n=bi(e,t);return!!tg(n,s)}const sg=Object.freeze({width:null,height:null}),ig=Object.freeze({...sg,...Do}),aS=/(-?[0-9.]*[0-9]+[0-9.]*)/g,lS=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Td(s,e,t){if(e===1)return s;if(t=t||100,typeof s=="number")return Math.ceil(s*e*t)/t;if(typeof s!="string")return s;const n=s.split(aS);if(n===null||!n.length)return s;const i=[];let r=n.shift(),o=lS.test(r);for(;;){if(o){const a=parseFloat(r);isNaN(a)?i.push(r):i.push(Math.ceil(a*e*t)/t)}else i.push(r);if(r=n.shift(),r===void 0)return i.join("");o=!o}}function cS(s,e="defs"){let t="";const n=s.indexOf("<"+e);for(;n>=0;){const i=s.indexOf(">",n),r=s.indexOf("</"+e);if(i===-1||r===-1)break;const o=s.indexOf(">",r);if(o===-1)break;t+=s.slice(i+1,r).trim(),s=s.slice(0,n).trim()+s.slice(o+1)}return{defs:t,content:s}}function uS(s,e){return s?"<defs>"+s+"</defs>"+e:e}function dS(s,e,t){const n=cS(s);return uS(n.defs,e+n.content+t)}const hS=s=>s==="unset"||s==="undefined"||s==="none";function fS(s,e){const t={...da,...s},n={...ig,...e},i={left:t.left,top:t.top,width:t.width,height:t.height};let r=t.body;[t,n].forEach(g=>{const m=[],y=g.hFlip,_=g.vFlip;let w=g.rotate;y?_?w+=2:(m.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),m.push("scale(-1 1)"),i.top=i.left=0):_&&(m.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),m.push("scale(1 -1)"),i.top=i.left=0);let A;switch(w<0&&(w-=Math.floor(w/4)*4),w=w%4,w){case 1:A=i.height/2+i.top,m.unshift("rotate(90 "+A.toString()+" "+A.toString()+")");break;case 2:m.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:A=i.width/2+i.left,m.unshift("rotate(-90 "+A.toString()+" "+A.toString()+")");break}w%2===1&&(i.left!==i.top&&(A=i.left,i.left=i.top,i.top=A),i.width!==i.height&&(A=i.width,i.width=i.height,i.height=A)),m.length&&(r=dS(r,'<g transform="'+m.join(" ")+'">',"</g>"))});const o=n.width,a=n.height,l=i.width,c=i.height;let u,d;o===null?(d=a===null?"1em":a==="auto"?c:a,u=Td(d,l/c)):(u=o==="auto"?l:o,d=a===null?Td(u,c/l):a==="auto"?c:a);const h={},f=(g,m)=>{hS(m)||(h[g]=m.toString())};f("width",u),f("height",d);const p=[i.left,i.top,l,c];return h.viewBox=p.join(" "),{attributes:h,viewBox:p,body:r}}const pS=/\sid="(\S+)"/g,gS="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let mS=0;function yS(s,e=gS){const t=[];let n;for(;n=pS.exec(s);)t.push(n[1]);if(!t.length)return s;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(r=>{const o=typeof e=="function"?e(r):e+(mS++).toString(),a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");s=s.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+i+"$3")}),s=s.replace(new RegExp(i,"g"),""),s}const jl=Object.create(null);function vS(s,e){jl[s]=e}function Ul(s){return jl[s]||jl[""]}function Uc(s){let e;if(typeof s.resources=="string")e=[s.resources];else if(e=s.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:s.path||"/",maxURL:s.maxURL||500,rotate:s.rotate||750,timeout:s.timeout||5e3,random:s.random===!0,index:s.index||0,dataAfterTimeout:s.dataAfterTimeout!==!1}}const Vc=Object.create(null),Oi=["https://api.simplesvg.com","https://api.unisvg.com"],ho=[];for(;Oi.length>0;)Oi.length===1||Math.random()>.5?ho.push(Oi.shift()):ho.push(Oi.pop());Vc[""]=Uc({resources:["https://api.iconify.design"].concat(ho)});function bS(s,e){const t=Uc(e);return t===null?!1:(Vc[s]=t,!0)}function zc(s){return Vc[s]}const wS=()=>{let s;try{if(s=fetch,typeof s=="function")return s}catch{}};let Pd=wS();function _S(s,e){const t=zc(s);if(!t)return 0;let n;if(!t.maxURL)n=0;else{let i=0;t.resources.forEach(o=>{i=Math.max(i,o.length)});const r=e+".json?icons=";n=t.maxURL-i-t.path.length-r.length}return n}function AS(s){return s===404}const xS=(s,e,t)=>{const n=[],i=_S(s,e),r="icons";let o={type:r,provider:s,prefix:e,icons:[]},a=0;return t.forEach((l,c)=>{a+=l.length+1,a>=i&&c>0&&(n.push(o),o={type:r,provider:s,prefix:e,icons:[]},a=l.length),o.icons.push(l)}),n.push(o),n};function SS(s){if(typeof s=="string"){const e=zc(s);if(e)return e.path}return"/"}const CS=(s,e,t)=>{if(!Pd){t("abort",424);return}let n=SS(e.provider);switch(e.type){case"icons":{const r=e.prefix,a=e.icons.join(","),l=new URLSearchParams({icons:a});n+=r+".json?"+l.toString();break}case"custom":{const r=e.uri;n+=r.slice(0,1)==="/"?r.slice(1):r;break}default:t("abort",400);return}let i=503;Pd(s+n).then(r=>{const o=r.status;if(o!==200){setTimeout(()=>{t(AS(o)?"abort":"next",o)});return}return i=501,r.json()}).then(r=>{if(typeof r!="object"||r===null){setTimeout(()=>{r===404?t("abort",r):t("next",i)});return}setTimeout(()=>{t("success",r)})}).catch(()=>{t("next",i)})},ES={prepare:xS,send:CS};function TS(s){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);s.sort((i,r)=>i.provider!==r.provider?i.provider.localeCompare(r.provider):i.prefix!==r.prefix?i.prefix.localeCompare(r.prefix):i.name.localeCompare(r.name));let n={provider:"",prefix:"",name:""};return s.forEach(i=>{if(n.name===i.name&&n.prefix===i.prefix&&n.provider===i.provider)return;n=i;const r=i.provider,o=i.prefix,a=i.name,l=t[r]||(t[r]=Object.create(null)),c=l[o]||(l[o]=bi(r,o));let u;a in c.icons?u=e.loaded:o===""||c.missing.has(a)?u=e.missing:u=e.pending;const d={provider:r,prefix:o,name:a};u.push(d)}),e}function rg(s,e){s.forEach(t=>{const n=t.loaderCallbacks;n&&(t.loaderCallbacks=n.filter(i=>i.id!==e))})}function PS(s){s.pendingCallbacksFlag||(s.pendingCallbacksFlag=!0,setTimeout(()=>{s.pendingCallbacksFlag=!1;const e=s.loaderCallbacks?s.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const n=s.provider,i=s.prefix;e.forEach(r=>{const o=r.icons,a=o.pending.length;o.pending=o.pending.filter(l=>{if(l.prefix!==i)return!0;const c=l.name;if(s.icons[c])o.loaded.push({provider:n,prefix:i,name:c});else if(s.missing.has(c))o.missing.push({provider:n,prefix:i,name:c});else return t=!0,!0;return!1}),o.pending.length!==a&&(t||rg([s],r.id),r.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),r.abort))})}))}let kS=0;function MS(s,e,t){const n=kS++,i=rg.bind(null,t,n);if(!e.pending.length)return i;const r={id:n,icons:e,callback:s,abort:i};return t.forEach(o=>{(o.loaderCallbacks||(o.loaderCallbacks=[])).push(r)}),i}function RS(s,e=!0,t=!1){const n=[];return s.forEach(i=>{const r=typeof i=="string"?ua(i,e,t):i;r&&n.push(r)}),n}var DS={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function IS(s,e,t,n){const i=s.resources.length,r=s.random?Math.floor(Math.random()*i):s.index;let o;if(s.random){let b=s.resources.slice(0);for(o=[];b.length>1;){const x=Math.floor(Math.random()*b.length);o.push(b[x]),b=b.slice(0,x).concat(b.slice(x+1))}o=o.concat(b)}else o=s.resources.slice(r).concat(s.resources.slice(0,r));const a=Date.now();let l="pending",c=0,u,d=null,h=[],f=[];typeof n=="function"&&f.push(n);function p(){d&&(clearTimeout(d),d=null)}function g(){l==="pending"&&(l="aborted"),p(),h.forEach(b=>{b.status==="pending"&&(b.status="aborted")}),h=[]}function m(b,x){x&&(f=[]),typeof b=="function"&&f.push(b)}function y(){return{startTime:a,payload:e,status:l,queriesSent:c,queriesPending:h.length,subscribe:m,abort:g}}function _(){l="failed",f.forEach(b=>{b(void 0,u)})}function w(){h.forEach(b=>{b.status==="pending"&&(b.status="aborted")}),h=[]}function A(b,x,E){const C=x!=="success";switch(h=h.filter(M=>M!==b),l){case"pending":break;case"failed":if(C||!s.dataAfterTimeout)return;break;default:return}if(x==="abort"){u=E,_();return}if(C){u=E,h.length||(o.length?S():_());return}if(p(),w(),!s.random){const M=s.resources.indexOf(b.resource);M!==-1&&M!==s.index&&(s.index=M)}l="completed",f.forEach(M=>{M(E)})}function S(){if(l!=="pending")return;p();const b=o.shift();if(b===void 0){if(h.length){d=setTimeout(()=>{p(),l==="pending"&&(w(),_())},s.timeout);return}_();return}const x={status:"pending",resource:b,callback:(E,C)=>{A(x,E,C)}};h.push(x),c++,d=setTimeout(S,s.rotate),t(b,e,x.callback)}return setTimeout(S),y}function og(s){const e={...DS,...s};let t=[];function n(){t=t.filter(a=>a().status==="pending")}function i(a,l,c){const u=IS(e,a,l,(d,h)=>{n(),c&&c(d,h)});return t.push(u),u}function r(a){return t.find(l=>a(l))||null}return{query:i,find:r,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:n}}function kd(){}const Xa=Object.create(null);function OS(s){if(!Xa[s]){const e=zc(s);if(!e)return;const t=og(e),n={config:e,redundancy:t};Xa[s]=n}return Xa[s]}function LS(s,e,t){let n,i;if(typeof s=="string"){const r=Ul(s);if(!r)return t(void 0,424),kd;i=r.send;const o=OS(s);o&&(n=o.redundancy)}else{const r=Uc(s);if(r){n=og(r);const o=s.resources?s.resources[0]:"",a=Ul(o);a&&(i=a.send)}}return!n||!i?(t(void 0,424),kd):n.query(e,i,t)().abort}function Md(){}function FS(s){s.iconsLoaderFlag||(s.iconsLoaderFlag=!0,setTimeout(()=>{s.iconsLoaderFlag=!1,PS(s)}))}function BS(s){const e=[],t=[];return s.forEach(n=>{(n.match(Jp)?e:t).push(n)}),{valid:e,invalid:t}}function Li(s,e,t){function n(){const i=s.pendingIcons;e.forEach(r=>{i&&i.delete(r),s.icons[r]||s.missing.add(r)})}if(t&&typeof t=="object")try{if(!tg(s,t).length){n();return}}catch(i){console.error(i)}n(),FS(s)}function Rd(s,e){s instanceof Promise?s.then(t=>{e(t)}).catch(()=>{e(null)}):e(s)}function NS(s,e){s.iconsToLoad?s.iconsToLoad=s.iconsToLoad.concat(e).sort():s.iconsToLoad=e,s.iconsQueueFlag||(s.iconsQueueFlag=!0,setTimeout(()=>{s.iconsQueueFlag=!1;const{provider:t,prefix:n}=s,i=s.iconsToLoad;if(delete s.iconsToLoad,!i||!i.length)return;const r=s.loadIcon;if(s.loadIcons&&(i.length>1||!r)){Rd(s.loadIcons(i,n,t),u=>{Li(s,i,u)});return}if(r){i.forEach(u=>{const d=r(u,n,t);Rd(d,h=>{const f=h?{prefix:n,icons:{[u]:h}}:null;Li(s,[u],f)})});return}const{valid:o,invalid:a}=BS(i);if(a.length&&Li(s,a,null),!o.length)return;const l=n.match(Jp)?Ul(t):null;if(!l){Li(s,o,null);return}l.prepare(t,n,o).forEach(u=>{LS(t,u,d=>{Li(s,u.icons,d)})})}))}const $S=(s,e)=>{const t=RS(s,!0,ng()),n=TS(t);if(!n.pending.length){let l=!0;return e&&setTimeout(()=>{l&&e(n.loaded,n.missing,n.pending,Md)}),()=>{l=!1}}const i=Object.create(null),r=[];let o,a;return n.pending.forEach(l=>{const{provider:c,prefix:u}=l;if(u===a&&c===o)return;o=c,a=u,r.push(bi(c,u));const d=i[c]||(i[c]=Object.create(null));d[u]||(d[u]=[])}),n.pending.forEach(l=>{const{provider:c,prefix:u,name:d}=l,h=bi(c,u),f=h.pendingIcons||(h.pendingIcons=new Set);f.has(d)||(f.add(d),i[c][u].push(d))}),r.forEach(l=>{const c=i[l.provider][l.prefix];c.length&&NS(l,c)}),e?MS(e,n,r):Md};function qS(s,e){const t={...s};for(const n in e){const i=e[n],r=typeof i;n in sg?(i===null||i&&(r==="string"||r==="number"))&&(t[n]=i):r===typeof t[n]&&(t[n]=n==="rotate"?i%4:i)}return t}const HS=/[\s,]+/;function jS(s,e){e.split(HS).forEach(t=>{switch(t.trim()){case"horizontal":s.hFlip=!0;break;case"vertical":s.vFlip=!0;break}})}function US(s,e=0){const t=s.replace(/^-?[0-9.]*/,"");function n(i){for(;i<0;)i+=4;return i%4}if(t===""){const i=parseInt(s);return isNaN(i)?0:n(i)}else if(t!==s){let i=0;switch(t){case"%":i=25;break;case"deg":i=90}if(i){let r=parseFloat(s.slice(0,s.length-t.length));return isNaN(r)?0:(r=r/i,r%1===0?n(r):0)}}return e}function VS(s,e){let t=s.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const n in e)t+=" "+n+'="'+e[n]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+s+"</svg>"}function zS(s){return s.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function WS(s){return"data:image/svg+xml,"+zS(s)}function GS(s){return'url("'+WS(s)+'")'}const Dd={...ig,inline:!1},KS={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},XS={display:"inline-block"},Vl={backgroundColor:"currentColor"},ag={backgroundColor:"transparent"},Id={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Od={webkitMask:Vl,mask:Vl,background:ag};for(const s in Od){const e=Od[s];for(const t in Id)e[s+t]=Id[t]}const fo={};["horizontal","vertical"].forEach(s=>{const e=s.slice(0,1)+"Flip";fo[s+"-flip"]=e,fo[s.slice(0,1)+"-flip"]=e,fo[s+"Flip"]=e});function Ld(s){return s+(s.match(/^[-0-9.]+$/)?"px":"")}const Fd=(s,e)=>{const t=qS(Dd,e),n={...KS},i=e.mode||"svg",r={},o=e.style,a=typeof o=="object"&&!(o instanceof Array)?o:{};for(let g in e){const m=e[g];if(m!==void 0)switch(g){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":t[g]=m===!0||m==="true"||m===1;break;case"flip":typeof m=="string"&&jS(t,m);break;case"color":r.color=m;break;case"rotate":typeof m=="string"?t[g]=US(m):typeof m=="number"&&(t[g]=m);break;case"ariaHidden":case"aria-hidden":m!==!0&&m!=="true"&&delete n["aria-hidden"];break;default:{const y=fo[g];y?(m===!0||m==="true"||m===1)&&(t[y]=!0):Dd[g]===void 0&&(n[g]=m)}}}const l=fS(s,t),c=l.attributes;if(t.inline&&(r.verticalAlign="-0.125em"),i==="svg"){n.style={...r,...a},Object.assign(n,c);let g=0,m=e.id;return typeof m=="string"&&(m=m.replace(/-/g,"_")),n.innerHTML=yS(l.body,m?()=>m+"ID"+g++:"iconifyVue"),Kt("svg",n)}const{body:u,width:d,height:h}=s,f=i==="mask"||(i==="bg"?!1:u.indexOf("currentColor")!==-1),p=VS(u,{...c,width:d+"",height:h+""});return n.style={...r,"--svg":GS(p),width:Ld(c.width),height:Ld(c.height),...XS,...f?Vl:ag,...a},Kt("span",n)};ng(!0);vS("",ES);if(typeof document<"u"&&typeof window<"u"){const s=window;if(s.IconifyPreload!==void 0){const e=s.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!oS(n))&&console.error(t)}catch{console.error(t)}})}if(s.IconifyProviders!==void 0){const e=s.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const n="IconifyProviders["+t+"] is invalid.";try{const i=e[t];if(typeof i!="object"||!i||i.resources===void 0)continue;bS(t,i)||console.error(n)}catch{console.error(n)}}}}const YS={...da,body:""},Bd=V((s,{emit:e})=>{const t=Q(null);function n(){t.value&&(t.value.abort?.(),t.value=null)}const i=Q(!!s.ssr),r=Q(""),o=cn(null);function a(){const c=s.icon;if(typeof c=="object"&&c!==null&&typeof c.body=="string")return r.value="",{data:c};let u;if(typeof c!="string"||(u=ua(c,!1,!0))===null)return null;let d=iS(u);if(!d){const p=t.value;return(!p||p.name!==c)&&(d===null?t.value={name:c}:t.value={name:c,abort:$S([u],l)}),null}n(),r.value!==c&&(r.value=c,st(()=>{e("load",c)}));const h=s.customise;if(h){d=Object.assign({},d);const p=h(d.body,u.name,u.prefix,u.provider);typeof p=="string"&&(d.body=p)}const f=["iconify"];return u.prefix!==""&&f.push("iconify--"+u.prefix),u.provider!==""&&f.push("iconify--"+u.provider),{data:d,classes:f}}function l(){const c=a();c?c.data!==o.value?.data&&(o.value=c):o.value=null}return i.value?l():Ht(()=>{i.value=!0,l()}),He(()=>s.icon,l),Ns(n),()=>{const c=o.value;if(!c)return Fd(YS,s);let u=s;return c.classes&&(u={...s,class:c.classes.join(" ")}),Fd({...da,...c.data},u)}},{props:["icon","mode","ssr","width","height","style","color","inline","rotate","hFlip","horizontalFlip","vFlip","verticalFlip","flip","id","ariaHidden","customise","title"],emits:["load"]}),Et=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),zl=[.001,0,0,.001,0,0],Ya=1.35,Ut={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},us={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},gr="pdfjs_internal_editor_",Ee={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},De={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},JS={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ht={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},po={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},at={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ei={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ha={ERRORS:0,WARNINGS:1,INFOS:5},mr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Yr={moveTo:0,lineTo:1,curveTo:2,closePath:3},ZS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let fa=ha.WARNINGS;function QS(s){Number.isInteger(s)&&(fa=s)}function eC(){return fa}function pa(s){fa>=ha.INFOS&&console.info(`Info: ${s}`)}function Se(s){fa>=ha.WARNINGS&&console.warn(`Warning: ${s}`)}function ze(s){throw new Error(s)}function Ie(s,e){s||ze(e)}function tC(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function lg(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"&&(t.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),t.tryConvertEncoding))try{s=oC(s)}catch{}const n=e?URL.parse(s,e):URL.parse(s);return tC(n)?n:null}function cg(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&lg(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Te(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const js=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class Nd extends js{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Ja extends js{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Wl extends js{constructor(e){super(e,"InvalidPDFException")}}class Io extends js{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class nC extends js{constructor(e){super(e,"FormatError")}}class vs extends js{constructor(e){super(e,"AbortException")}}function ug(s){(typeof s!="object"||s?.length===void 0)&&ze("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=s.subarray(i,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Mr(s){typeof s!="string"&&ze("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function sC(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function iC(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function rC(){try{return new Function(""),!0}catch{return!1}}class yt{static get isLittleEndian(){return Te(this,"isLittleEndian",iC())}static get isEvalSupported(){return Te(this,"isEvalSupported",rC())}static get isOffscreenCanvasSupported(){return Te(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Te(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Te(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Te(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Za=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class de{static makeHexColor(e,t,n){return`#${Za[e]}${Za[t]}${Za[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],r=e[n+1];e[n]=i*t[0]+r*t[2]+t[4],e[n+1]=i*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<6;u+=2){const d=e[n+u],h=e[n+u+1];e[n+u]=d*i+h*o+l,e[n+u+1]=d*r+h*a+c}}static applyInverseTransform(e,t){const n=e[0],i=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,n){const i=t[0],r=t[1],o=t[2],a=t[3],l=t[4],c=t[5],u=e[0],d=e[1],h=e[2],f=e[3];let p=i*u+l,g=p,m=i*h+l,y=m,_=a*d+c,w=_,A=a*f+c,S=A;if(r!==0||o!==0){const b=r*u,x=r*h,E=o*d,C=o*f;p+=E,y+=E,m+=C,g+=C,_+=b,S+=b,A+=x,w+=x}n[0]=Math.min(n[0],p,m,g,y),n[1]=Math.min(n[1],_,A,w,S),n[2]=Math.max(n[2],p,m,g,y),n[3]=Math.max(n[3],_,A,w,S)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],r=e[2],o=e[3],a=n**2+i**2,l=n*r+i*o,c=r**2+o**2,u=(a+c)/2,d=Math.sqrt(u**2-(a*c-l**2));t[0]=Math.sqrt(u+d||1),t[1]=Math.sqrt(u-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[n,r,i,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,r){r[0]=Math.min(r[0],e,n),r[1]=Math.min(r[1],t,i),r[2]=Math.max(r[2],e,n),r[3]=Math.max(r[3],t,i)}static#e(e,t,n,i,r,o,a,l,c,u){if(c<=0||c>=1)return;const d=1-c,h=c*c,f=h*c,p=d*(d*(d*e+3*c*t)+3*h*n)+f*i,g=d*(d*(d*r+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)}static#t(e,t,n,i,r,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#e(e,t,n,i,r,o,a,l,-d/u,h);return}const f=u**2-4*d*c;if(f<0)return;const p=Math.sqrt(f),g=2*c;this.#e(e,t,n,i,r,o,a,l,(-u+p)/g,h),this.#e(e,t,n,i,r,o,a,l,(-u-p)/g,h)}static bezierBoundingBox(e,t,n,i,r,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),this.#t(e,n,r,a,t,i,o,l,3*(-e+3*(n-r)+a),6*(e-2*n+r),3*(n-e),c),this.#t(e,n,r,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),c)}}function oC(s){return decodeURIComponent(escape(s))}let Qa=null,$d=null;function aC(s){return Qa||(Qa=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$d=new Map([["","t"]])),s.replaceAll(Qa,(e,t,n)=>t?t.normalize("NFKC"):$d.get(n))}function dg(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),ug(s)}const Wc="pdfjs_internal_id_";function lC(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...r]=t;if(!s(n)&&!Number.isInteger(n)||!e(i))return!1;const o=r.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Tt(s,e,t){return Math.min(Math.max(s,e),t)}function hg(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(ug(s))}function cC(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):Mr(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class yr{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(r){if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(yr.shouldBuildText(a))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const l of r.children)i(l)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class fg{static setupStorage(e,t,n,i,r){const o=i.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of n.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&r.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:n});const a=r!=="richText",l=e.div;if(l.append(o),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const d=document.createTextNode(i.value);o.append(d),a&&yr.shouldBuildText(i.name)&&c.push(d)}return{textDivs:c}}const u=[[i,-1,o]];for(;u.length>0;){const[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}const p=d.children[++u.at(-1)[1]];if(p===null)continue;const{name:g}=p;if(g==="#text"){const y=document.createTextNode(p.value);c.push(y),f.append(y);continue}const m=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,g):document.createElement(g);if(f.append(m),p.attributes&&this.setAttributes({html:m,element:p,storage:t,intent:r,linkService:n}),p.children?.length>0)u.push([p,-1,m]);else if(p.value){const y=document.createTextNode(p.value);a&&yr.shouldBuildText(g)&&c.push(y),m.append(y)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const $n="http://www.w3.org/2000/svg";class wi{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Rr(s,e="text"){if(ji(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class Dr{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=o,n*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let u,d,h,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,h=0,f=1;break;case 90:u=0,d=1,h=1,f=0;break;case 270:u=0,d=-1,h=-1,f=0;break;case 0:u=1,d=0,h=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,f=-f);let p,g,m,y;u===0?(p=Math.abs(c-e[1])*n+r,g=Math.abs(l-e[0])*n+o,m=(e[3]-e[1])*n,y=(e[2]-e[0])*n):(p=Math.abs(l-e[0])*n+r,g=Math.abs(c-e[1])*n+o,m=(e[2]-e[0])*n,y=(e[3]-e[1])*n),this.transform=[u*n,d*n,h*n,f*n,p-u*n*l-h*n*c,g-d*n*l-f*n*c],this.width=m,this.height=y}get rawDims(){const e=this.viewBox;return Te(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Dr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){const n=[e,t];return de.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];de.applyTransform(t,this.transform);const n=[e[2],e[3]];return de.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return de.applyInverseTransform(n,this.transform),n}}class Gc extends js{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ga(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function Kc(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function uC(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function dC(s,e="document.pdf"){if(typeof s!="string")return e;if(ga(s))return Se('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(r.test(o))return i(o);if(n.searchParams.size>0){const a=Array.from(n.searchParams.values()).reverse();for(const c of a)if(r.test(c))return i(c);const l=Array.from(n.searchParams.keys()).reverse();for(const c of l)if(r.test(c))return i(c)}if(n.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(l)return i(l[0])}return e}class qd{started=Object.create(null);times=[];time(e){e in this.started&&Se(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Se(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:r}of this.times)e.push(`${n.padEnd(t)} ${r-i}ms
`);return e.join("")}}function ji(s,e){const t=e?URL.parse(s,e):URL.parse(s);return t?.protocol==="http:"||t?.protocol==="https:"}function on(s){s.preventDefault()}function nt(s){s.preventDefault(),s.stopPropagation()}function hC(s){console.log("Deprecated API usage: "+s)}class Gl{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(n,i,r,o,a,l))}}function fC(s,{scale:e=1,rotation:t=0}){const{width:n,height:i}=s.attributes.style,r=[0,0,parseInt(n),parseInt(i)];return new Dr({viewBox:r,userUnit:1,scale:e,rotation:t})}function Ir(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Se(`Not a valid color format: "${s}"`),[0,0,0])}function pC(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,Ir(n))}e.remove()}function Qe(s){const{a:e,b:t,c:n,d:i,e:r,f:o}=s.getTransform();return[e,t,n,i,r,o]}function _n(s){const{a:e,b:t,c:n,d:i,e:r,f:o}=s.getTransform().invertSelf();return[e,t,n,i,r,o]}function Fs(s,e,t=!1,n=!0){if(e instanceof Dr){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=s,a=yt.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}n&&s.setAttribute("data-main-rotation",e.rotation)}class Dn{constructor(){const{pixelRatio:e}=Dn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,r=-1){let o=1/0,a=1/0,l=1/0;n=Dn.capPixels(n,r),n>0&&(o=Math.sqrt(n/(e*t))),i!==-1&&(a=i/e,l=i/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Kl=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class gC{static get isDarkMode(){return Te(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class mC{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),Te(this,"commentForegroundColor",Ir(n))}}function yC(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return s=Math.round(s*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[s,e,t]}function Hd(s,e){const t=s[0]/255,n=s[1]/255,i=s[2]/255,r=Math.max(t,n,i),o=Math.min(t,n,i),a=(r+o)/2;if(r===o)e[0]=e[1]=0;else{const l=r-o;switch(e[1]=a<.5?l/(r+o):l/(2-r-o),r){case t:e[0]=((n-i)/l+(n<i?6:0))*60;break;case n:e[0]=((i-t)/l+2)*60;break;case i:e[0]=((t-n)/l+4)*60;break}}e[2]=a}function Xl(s,e){const t=s[0],n=s[1],i=s[2],r=(1-Math.abs(2*i-1))*n,o=r*(1-Math.abs(t/60%2-1)),a=i-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=r+a,e[2]=a;break;case 2:e[0]=a,e[1]=r+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=r+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=r+a;break;case 5:case 6:e[0]=r+a,e[1]=a,e[2]=o+a;break}}function jd(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function Ud(s,e,t){Xl(s,t),t.map(jd);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];Xl(e,t),t.map(jd);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const Vd=new Map;function vC(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=Vd.get(t);if(n)return n;const i=new Float32Array(9),r=i.subarray(0,3),o=i.subarray(3,6);Hd(s,o);const a=i.subarray(6,9);Hd(e,a);const l=a[2]<.5,c=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Ud(o,a,r)<c){let u,d;l?(u=o[2],d=1):(u=0,d=o[2]);const h=.005;for(;d-u>h;){const f=o[2]=(u+d)/2;l===Ud(o,a,r)<c?u=f:d=f}o[2]=l?d:u}return Xl(o,r),n=de.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),Vd.set(t,n),n}function pg({html:s,dir:e,className:t},n){const i=document.createDocumentFragment();if(typeof s=="string"){const r=document.createElement("p");r.dir=e||"auto";const o=s.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const c=o[a];r.append(document.createTextNode(c)),a<l-1&&r.append(document.createElement("br"))}i.append(r)}else fg.render({xfaHtml:s,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),n.append(i)}class er{#e=null;#t=null;#s;#n=null;#o=null;#i=null;#r=null;#a=null;static#c=null;constructor(e){this.#s=e,er.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",on,{signal:t}),e.addEventListener("pointerdown",er.#l,{signal:t}));const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const i=this.#s.toolbarPosition;if(i){const{style:r}=e,o=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,nt(e)}#d(e){this.#s._focusEventsAllowed=!0,nt(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",on,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#o?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",er.#c[e]),this.#f(n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#m(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#m),this.#o=e}addComment(e,t=null){if(this.#i)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const i=this.#r=this.#m;t?(this.#n.insertBefore(n,t),this.#n.insertBefore(i,t)):this.#n.append(n,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#m)}async addEditSignatureButton(e){const t=this.#a=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#m)}removeButton(e){switch(e){case"comment":this.#i?.removeToolbarCommentButton(),this.#i=null,this.#r?.remove(),this.#r=null;break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const i=this.#n.querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#a&&(this.#a.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class bC{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",on,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#o(e,t){let n=0,i=0;for(const r of e){const o=r.y+r.height;if(o<n)continue;const a=r.x+(t?r.width:0);if(o>n){i=a,n=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,n]}show(e,t,n){const[i,r]=this.#o(t,n),{style:o}=this.#t||=this.#n();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,n,i){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const a=this.#s._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",on,{signal:a}),r.addEventListener("click",i,{signal:a})),this.#e.append(r)}}function gg(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}class wC{#e=0;get id(){return`${gr}${this.#e++}`}}class Xc{#e=dg();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Te(this,"_isSVGFittingCanvas",r)}async#n(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(n.url=t,i=await Rr(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=Xc._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,c()},o.onload=async()=>{const d=n.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=u});o.readAsDataURL(i),await l}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Se(i),n=null}return this.#s.set(e,n),n&&this.#s.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:i,type:r}=e;return this.#n(`${t}_${n}_${i}_${r}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,n),this.#s.set(n.id,n),n}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class _C{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:n,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),this.#t)return;const l={cmd:e,undo:t,post:n,type:r};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(l);return}if(o&&this.#e[this.#n].type===r){a&&(l.undo=this.#e[this.#n].undo),this.#e[this.#n]=l;return}const c=this.#n+1;c===this.#s?this.#e.splice(0,1):(this.#n=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Or{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=yt.platform;for(const[n,i,r={}]of e)for(const o of n){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...o,t)(),r||nt(t))}}class Yc{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return pC(e),Te(this,"_colors",e)}convert(e){const t=Ir(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((r,o)=>r===t[o]))return Yc._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?de.makeHexColor(...t):e}}class bs{#e=new AbortController;#t=null;#s=null;#n=new Map;#o=new Map;#i=null;#r=null;#a=null;#c=new _C;#l=null;#h=null;#d=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#C=null;#x=null;#w=null;#T=null;#A=!1;#S=null;#M=new wC;#P=!1;#k=!1;#B=!1;#D=null;#O=null;#N=null;#L=null;#V=null;#E=Ee.NONE;#_=new Set;#I=null;#$=null;#H=null;#G=null;#W=null;#K={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#j=[0,0];#F=null;#z=null;#Z=null;#Q=null;#q=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=bs.prototype,t=o=>o.#z.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Te(this,"_keyboardManager",new Or([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#z.contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#z.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,i,r,o,a,l,c,u,d,h,f,p,g,m){const y=this._signal=this.#e.signal;this.#z=e,this.#Z=t,this.#Q=n,this.#i=i,this.#l=r,this.#$=o,this.#W=l,this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:y}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),a._on("setpreference",this.onSetPreference.bind(this),{signal:y}),a._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:y}),window.addEventListener("pointerdown",()=>{this.#k=!0},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{this.#k=!1},{capture:!0,signal:y}),this.#le(),this.#he(),this.#te(),this.#r=l.annotationStorage,this.#C=l.filterFactory,this.#H=c,this.#T=u||null,this.#y=d,this.#b=h,this.#v=f,this.#V=p||null,this.viewParameters={realScale:wi.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=m!==!1,r?.setSidebarUiManager(this)}destroy(){this.#q?.resolve(),this.#q=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#o.values())e.destroy();this.#o.clear(),this.#n.clear(),this.#g.clear(),this.#L?.clear(),this.#t=null,this.#_.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#$?.destroy(),this.#S?.hide(),this.#S=null,this.#N?.destroy(),this.#N=null,this.#s=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#F&&(clearTimeout(this.#F),this.#F=null),this._editorUndoBar?.destroy(),this.#W=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Te(this,"hcmFilter",this.#H?this.#C.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return Te(this,"direction",getComputedStyle(this.#z).direction)}get _highlightColors(){return Te(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Te(this,"highlightColors",null);const t=new Map,n=!!this.#H;for(const[i,r]of e){const o=i.endsWith("_HCM");if(n&&o){t.set(i.replace("_HCM",""),r);continue}!n&&!o&&t.set(i,r)}return Te(this,"highlightColors",t)}get highlightColorNames(){return Te(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#N=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,i){this.#l?.showDialog(this,e,t,n,i)}selectComment(e,t){this.#o.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#o.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){this.#$?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#$}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#v=t;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#z.focus()}findParent(e,t){for(const n of this.#o.values()){const{x:i,y:r,width:o,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+a)return n}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#g.add(e)}removeShouldRescale(e){this.#g.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*wi.PDF_TO_CSS_UNITS;for(const t of this.#g)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#J({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#o.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a}=n,l=n.toString(),u=this.#J(n).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;n.empty();const h=this.#ee(u),f=this.#E===Ee.NONE,p=()=>{const g=h?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:a,text:l});f&&this.showAllEditors("highlight",!0,!0),t&&g?.editComment()};if(f){this.switchToMode(Ee.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}#oe(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#J(e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#S||=new bC(this),this.#S.show(n,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#r)return null;const t=`${gr}${e}`,n=this.#r.getRawValue(t);return n&&this.#r.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#Q;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#I&&(this.#S?.hide(),this.#I=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#I)return;const i=this.#J(e).closest(".textLayer");if(!i){this.#I&&(this.#S?.hide(),this.#I=null,this.#R({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#I=t,this.#R({hasSelectedText:!0}),!(this.#E!==Ee.HIGHLIGHT&&this.#E!==Ee.NONE)&&(this.#E===Ee.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#E===Ee.HIGHLIGHT?this.#ee(i):null;if(r?.toggleDrawing(),this.#k){const o=new AbortController,a=this.combinedSignal(o),l=c=>{c.type==="pointerup"&&c.button!==0||(o.abort(),r?.toggleDrawing(!0),c.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}else r?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#E===Ee.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#oe()}#le(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#ce(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#_)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#D?.abort(),this.#D=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#_){const i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){Se(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const l of n){const c=await i.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)this.#ie(l);this.#re(r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){Se(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==Ee.NONE&&!this.isEditorHandlingKeyboard&&bs._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(e){Object.entries(e).some(([n,i])=>this.#K[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#K,e)}),this.#E===Ee.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#U([[De.HIGHLIGHT_FREE,!0]]))}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#R({isEditing:this.#E!==Ee.NONE,isEmpty:this.#Y(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#se(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#U(t.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#o.get(this.#f)}getLayer(e){return this.#o.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#o.set(e.pageIndex,e),this.#P?e.enable():e.disable()}removeLayer(e){this.#o.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,r=!1){if(this.#E!==e&&!(this.#q&&(await this.#q.promise,!this.#q))){if(this.#q=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#E===Ee.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#E=e,e===Ee.NONE){this.setEditingState(!1),this.#pe();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#q.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();e===Ee.SIGNATURE&&await this.#$?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const o of this.#o.values())o.updateMode(e);if(e===Ee.POPUP){this.#s||=await this.#W.getAnnotationsByType(new Set(this.#u.map(l=>l._editorType)));const o=new Set,a=[];for(const l of this.#n.values()){const{annotationElementId:c,hasComment:u,deleted:d}=l;c&&o.add(c),u&&!d&&a.push(l.getData())}for(const l of this.#s){const{id:c,popupRef:u,contentsObj:d}=l;u&&d?.str&&!o.has(c)&&!this.#m.has(c)&&a.push(l)}this.#l?.showSidebar(a)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#q.resolve();return}for(const o of this.#n.values())o.uid===t?(this.setSelected(o),r?o.editComment():i?o.enterInEditMode():o.focus()):o.unselect();this.#q.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case De.CREATE:this.currentLayer.addNewEditor(t);return;case De.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#_)n.updateParams(e,t);else for(const n of this.#u)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const r of this.#n.values())r.editorType===e&&r.show(t);(this.#G?.get(De.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#U([[De.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#B!==e){this.#B=e;for(const t of this.#o.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#P){this.#P=!0;const e=[];for(const t of this.#o.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#P){this.#P=!1;for(const e of this.#o.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#L?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#m.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#m.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#m.has(e)}removeDeletedAnnotationElement(e){this.#m.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#o.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}get#ge(){let e=null;for(e of this.#_);return e}updateUI(e){this.#ge===e&&this.#U(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#U(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#_.has(e)){this.#_.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#_.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#_)t!==e&&t.unselect();this.#_.clear(),this.#_.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#_.has(e)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(e){e.unselect(),this.#_.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Y()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Y()})}addCommands(e){this.#c.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Y()})}cleanUndoStack(e){this.#c.cleanType(e)}#Y(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#_],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const r of t)r.remove()},i=()=>{for(const r of t)this.#ie(r)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const t of this.#_)t.unselect();this.#_.clear();for(const t of e)t.isEmpty()||(this.#_.add(t),t.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#_)e.commit();this.#re(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#E!==Ee.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#_)e.unselect();this.#_.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#j[0]+=e,this.#j[1]+=t;const[i,r]=this.#j,o=[...this.#_],a=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#j[0]=this.#j[1]=0,this.addCommands({cmd:()=>{for(const l of o)this.#n.has(l.id)&&(l.translateInPage(i,r),l.translationDone())},undo:()=>{for(const l of o)this.#n.has(l.id)&&(l.translateInPage(-i,-r),l.translationDone())},mustExec:!1})},a);for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#_)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:i,y:r,pageIndex:o},a]of e)a.newX=i,a.newY=r,a.newPageIndex=o,t||=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex;if(!t)return!1;const n=(i,r,o,a)=>{if(this.#n.has(i.id)){const l=this.#o.get(a);l?i._setParentAndPosition(l,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of e)n(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of e)n(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const n of this.#p.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#E}isEditingMode(){return this.#E!==Ee.NONE}get imageManager(){return Te(this,"imageManager",new Xc)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,u=t.rangeCount;c<u;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,u,d,h)=>({x:(u-i)/o,y:1-(c+d-n)/r,width:h/o,height:d/r});break;case"180":a=(c,u,d,h)=>({x:1-(c+d-n)/r,y:1-(u+h-i)/o,width:d/r,height:h/o});break;case"270":a=(c,u,d,h)=>({x:1-(u+h-i)/o,y:(c-n)/r,width:h/o,height:d/r});break;default:a=(c,u,d,h)=>({x:(c-n)/r,y:(u-i)/o,width:d/r,height:h/o});break}const l=[];for(let c=0,u=t.rangeCount;c<u;c++){const d=t.getRangeAt(c);if(!d.collapsed)for(const{x:h,y:f,width:p,height:g}of d.getClientRects())p===0||g===0||l.push(a(h,f,p,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#a||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#a?.delete(e)}renderAnnotationElement(e){const t=this.#a?.get(e.data.id);if(!t)return;const n=this.#r.getRawValue(t);n&&(this.#E===Ee.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const i=this.#L?.get(e);i&&(i.setCanvas(t,n),this.#L.delete(e))}addMissingCanvas(e,t){(this.#L||=new Map).set(e,t)}}class Cn{#e=null;#t=!1;#s=null;#n=null;#o=null;#i=null;#r=!1;#a=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,Cn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Cn._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Cn.#f.missing),t.setAttribute("data-l10n-id",Cn.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;e.addEventListener("contextmenu",on,{signal:n}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#r=!0,i(r))},{signal:n}),await this.#p(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await Cn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){const t=this.#a=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#a.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:r=!1}){n&&(this.#l=n,this.#h=i),!(this.#e===e&&this.#t===t)&&(r||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#s&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#o=null,this.#a?.remove(),this.#a=null}async#p(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Cn.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Cn.#f[`${this.#m}-label`]),!this.#e){this.#o?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#o?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#o;if(!t){this.#o=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,r=this.#c._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#o.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:r}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#o?.classList.remove("show")},{signal:r})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Jr{#e=null;#t=null;#s=!1;#n=null;#o=null;#i=null;#r=null;#a=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(n.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:i,y:r,width:o,height:a}=this.#n.parent.boundingClientRect;return[(e-i)/o,(t+n-r)/a]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",on,{signal:n}),t&&(e.addEventListener("focusin",r=>{this.#n._focusEventsAllowed=!1,nt(r)},{capture:!0,signal:n}),e.addEventListener("focusout",r=>{this.#n._focusEventsAllowed=!0,nt(r)},{capture:!0,signal:n})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const i=r=>{r.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#s=!0,i(r))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=this.#n.commentButtonPosition;const{width:u,height:d,x:h,y:f}=this.#n;n=h+n*u,i=f+i*d}const r=this.#n.parent.boundingClientRect,{x:o,y:a,width:l,height:c}=r;this.#n._uiManager.editComment(this.#n,o+n*l,a+i*c,{...e,parentDimensions:r})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#o}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#i,date:this.#a,deleted:this.isDeleted()}}set data(e){if(e!==this.#r&&(this.#i=null),e===null){this.#r="",this.#c=!0;return}this.#r=e,this.#a=new Date,this.#c=!1}setInitialText(e,t=null){this.#o=e,this.data=e,this.#a=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#r="",this.#i=null,this.#a=null,this.#n=null,this.#s=!1,this.#c=!1}}class ma{#e;#t=!1;#s=null;#n;#o;#i;#r;#a=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){this.#e=e,this.#s=n,this.#n=t,this.#o=i,this.#i=r,this.#r=o,this.#h=new AbortController,this.#c=AbortSignal.any([a,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Dn.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#a)return;const i=this.#a=new AbortController,r=AbortSignal.any([this.#c,i.signal]),o=this.#e,a={capture:!0,signal:r,passive:!1},l=c=>{c.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};o.addEventListener("pointerdown",c=>{c.pointerType==="touch"&&(nt(c),l(c))},a),o.addEventListener("pointerup",l,a),o.addEventListener("pointercancel",l,a);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),r=this.#e,o={signal:i,capture:!1,passive:!1};r.addEventListener("touchmove",this.#m.bind(this),o);const a=this.#p.bind(this);r.addEventListener("touchend",a,o),r.addEventListener("touchcancel",a,o),o.capture=!0,r.addEventListener("pointerdown",nt,o),r.addEventListener("pointermove",nt,o),r.addEventListener("pointercancel",nt,o),r.addEventListener("pointerup",nt,o),this.#o?.()}if(nt(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(e){if(!this.#l||e.touches.length!==2)return;nt(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:a}=n,l=this.#l,{touch0X:c,touch0Y:u,touch1X:d,touch1Y:h}=l,f=d-c,p=h-u,g=o-i,m=a-r,y=Math.hypot(g,m)||1,_=Math.hypot(f,p)||1;if(!this.#t&&Math.abs(_-y)<=ma.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!this.#t){this.#t=!0;return}const w=[(i+o)/2,(r+a)/2];this.#i?.(w,_,y)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#r?.()),this.#l&&(nt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}}class pe{#e=null;#t=null;#s=null;#n=null;#o=null;#i=!1;#r=null;#a="";#c=null;#l=null;#h=null;#d=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#b=!1;#v=null;#C=0;#x=0;#w=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#S=pe._zIndex++;static _borderLineWidth=-1;static _colorManager=new Yc;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=pe.prototype._resizeWithKeyboard,t=bs.TRANSLATE_SMALL,n=bs.TRANSLATE_BIG;return Te(this,"_resizerKeyboardManager",new Or([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],pe.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Te(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new AC({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(pe._l10n??=e,pe._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),pe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);pe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#F(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/r,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}#M([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#M(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:u}=n;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=pe,i=n/e,r=n/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=n,l*=i,r*=n,o*=i,this._mustFixPosition)switch(e){case 0:r=Tt(r,0,n-a),o=Tt(o,0,i-l);break;case 90:r=Tt(r,0,n-l),o=Tt(o,a,i);break;case 180:r=Tt(r,a,n),o=Tt(o,l,i);break;case 270:r=Tt(r,l,n),o=Tt(o,0,i-a);break}this.x=r/=n,this.y=o/=i;const[c,u]=this.getBaseTranslation();r+=c,o+=u,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#P(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return pe.#P(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return pe.#P(e,t,360-this.parentRotation)}#k(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#D.bind(this,n),{signal:t}),i.addEventListener("contextmenu",on,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:n}=yt.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",nt,{passive:!1,signal:o}),window.addEventListener("contextmenu",on,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#N()};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}#O(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#N(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=this.#h;this.#h=null;const r=this.x,o=this.y,a=this.width,l=this.height;r===e&&o===t&&a===n&&l===i||this.addCommands({cmd:this.#O.bind(this,r,o,a,l),undo:this.#O.bind(this,e,t,n,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#L(e,t){const[n,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=pe.MIN_SIZE/n,u=pe.MIN_SIZE/i,d=this.#k(this.rotation),h=(q,$)=>[d[0]*q+d[2]*$,d[1]*q+d[3]*$],f=this.#k(360-this.rotation),p=(q,$)=>[f[0]*q+f[2]*$,f[1]*q+f[3]*$];let g,m,y=!1,_=!1;switch(e){case"topLeft":y=!0,g=(q,$)=>[0,0],m=(q,$)=>[q,$];break;case"topMiddle":g=(q,$)=>[q/2,0],m=(q,$)=>[q/2,$];break;case"topRight":y=!0,g=(q,$)=>[q,0],m=(q,$)=>[0,$];break;case"middleRight":_=!0,g=(q,$)=>[q,$/2],m=(q,$)=>[0,$/2];break;case"bottomRight":y=!0,g=(q,$)=>[q,$],m=(q,$)=>[0,0];break;case"bottomMiddle":g=(q,$)=>[q/2,$],m=(q,$)=>[q/2,0];break;case"bottomLeft":y=!0,g=(q,$)=>[0,$],m=(q,$)=>[q,0];break;case"middleLeft":_=!0,g=(q,$)=>[0,$/2],m=(q,$)=>[q,$/2];break}const w=g(a,l),A=m(a,l);let S=h(...A);const b=pe._round(r+S[0]),x=pe._round(o+S[1]);let E=1,C=1,M,O;if(t.fromKeyboard)({deltaX:M,deltaY:O}=t);else{const{screenX:q,screenY:$}=t,[k,L]=this.#l;[M,O]=this.screenToPageTranslation(q-k,$-L),this.#l[0]=q,this.#l[1]=$}if([M,O]=p(M/n,O/i),y){const q=Math.hypot(a,l);E=C=Math.max(Math.min(Math.hypot(A[0]-w[0]-M,A[1]-w[1]-O)/q,1/a,1/l),c/a,u/l)}else _?E=Tt(Math.abs(A[0]-w[0]-M),c,1)/a:C=Tt(Math.abs(A[1]-w[1]-O),u,1)/l;const W=pe._round(a*E),se=pe._round(l*C);S=h(...m(W,se));const z=b-S[0],oe=x-S[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=W,this.height=se,this.x=z,this.y=oe,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new er(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(Cn.initialize(pe._l10n),this.#s=new Cn(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Jr(this)}addStandaloneCommentButton(){if(this.#o){this._uiManager.isEditingMode()&&this.#o.classList.remove("hidden");return}this.hasComment&&(this.#o=this.#n.renderForStandalone(),this.div.append(this.#o))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#o=null}hideStandaloneCommentButton(){this.#o?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:i}}=this.#n;return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Jr(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#n||=new Jr(this),this.#n.setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Jr(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,a=o+r+1,l=i-100,c=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),gg(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new ma({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#E.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#V(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#E(e,t,n){let r=.7*(n/t)+1-.7;if(r===1)return;const o=this.#k(this.rotation),a=(b,x)=>[o[0]*b+o[2]*x,o[1]*b+o[3]*x],[l,c]=this.parentDimensions,u=this.x,d=this.y,h=this.width,f=this.height,p=pe.MIN_SIZE/l,g=pe.MIN_SIZE/c;r=Math.max(Math.min(r,1/h,1/f),p/h,g/f);const m=pe._round(h*r),y=pe._round(f*r);if(m===h&&y===f)return;this.#u||=[u,d,h,f];const _=a(h/2,f/2),w=pe._round(u+_[0]),A=pe._round(d+_[1]),S=a(m/2,y/2);this.x=w-S[0],this.y=A-S[1],this.width=m,this.height=y,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#N()}pointerdown(e){const{isMac:t}=yt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#$(e);return}this.#I(e)}#I(e){const{isMac:t}=yt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#$(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=c=>{i.abort(),this.#r=null,this.#p=!1,this._uiManager.endDragSession()||this.#I(c),n&&this._onStopDragging()};t&&(this.#C=e.clientX,this.#x=e.clientY,this.#r=e.pointerId,this.#a=e.pointerType,window.addEventListener("pointermove",c=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:u,clientY:d,pointerId:h}=c;if(h!==this.#r){nt(c);return}const[f,p]=this.screenToPageTranslation(u-this.#C,d-this.#x);this.#C=u,this.#x=d,this._uiManager.dragSelectedEditors(f,p)},o),window.addEventListener("touchmove",nt,o),window.addEventListener("pointerdown",c=>{c.pointerType===this.#a&&(this.#T||c.isPrimary)&&a(c),nt(c)},o));const l=c=>{if(!this.#r||this.#r===c.pointerId){a(c);return}nt(c)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,u=t/i,d=this.x*r,h=this.y*o,f=this.width*r,p=this.height*o;switch(n){case 0:return[d+c+a,o-h-u-p+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+p+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+p+l];case 270:return[d-u-p+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,r,o]=e,a=r-n,l=o-i;switch(this.rotation){case 0:return[n,t-o,a,l];case 90:return[n,t-i,l,a];case 180:return[r,t-i,a,l];case 270:return[r,t-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&pe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:r,richText:o},uid:a,pageIndex:l,creationDate:c,modificationDate:u}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:c,modificationDate:n||u,popupRef:!r,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&n>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[r,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/r,i.y=l/o,i.width=c/r,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#F(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,r,o]=this.getPDFRect();return[pe._round(n+(r-n)*e),pe._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const o=this.#G.bind(this),a=this.#W.bind(this),l=this._uiManager._signal;for(const c of this.#t){const u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#K.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",pe._l10nResizer[u])}}const n=this.#t[0];let i=0;for(const o of t){if(o===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)this.#c.append(this.#c.firstChild);else if(r>i)for(let a=0;a<r-i;a++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const a of t){const c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",pe._l10nResizer[c])}}this.#j(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#G(e){pe._resizerKeyboardManager.exec(this,e)}#W(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#F()}#K(e){this.#m=this.#b?e:""}#j(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#L(this.#m,{deltaX:e,deltaY:t,fromKeyboard:!0})}#F(){this.#b=!1,this.#j(-1),this.#N()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(e){this.#g=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:n}=e;let i=this.#w.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(n),this.#w.size===0&&(this.#w=null)},pe._telemetryTimeout),this.#w.set(n,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class AC extends pe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const zd=3285377520,Qt=4294901760,An=65535;class mg{constructor(e){this.h1=e?e&4294967295:zd,this.h2=e?e&4294967295:zd}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let g=0,m=e.length;g<m;g++){const y=e.charCodeAt(g);y<=255?t[n++]=y:(t[n++]=y>>>8,t[n++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,r=n-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,c=this.h1,u=this.h2;const d=3432918353,h=461845907,f=d&An,p=h&An;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&Qt|a*f&An,a=a<<15|a>>>17,a=a*h&Qt|a*p&An,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*d&Qt|l*f&An,l=l<<15|l>>>17,l=l*h&Qt|l*p&An,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*d&Qt|a*f&An,a=a<<15|a>>>17,a=a*h&Qt|a*p&An,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Qt|e*36045&An,t=t*4283543511&Qt|((t<<16|e>>>16)*2950163797&Qt)>>>16,e^=t>>>1,e=e*444984403&Qt|e*60499&An,t=t*3301882366&Qt|((t<<16|e>>>16)*3120437893&Qt)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Yl=Object.freeze({map:null,hash:"",transfer:void 0});class Jc{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof pe&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof pe)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let i=!1;if(n!==void 0)for(const[r,o]of Object.entries(t))n[r]!==o&&(i=!0,n[r]=o);else i=!0,this.#n.set(e,t);i&&this.#o(),t instanceof pe&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#o(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new yg(this)}get serializable(){if(this.#n.size===0)return Yl;const e=new Map,t=new mg,n=[],i=Object.create(null);let r=!1;for(const[o,a]of this.#n){const l=a instanceof pe?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),r||=!!l.bitmap)}if(r)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Yl}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const r of this.#n.values()){if(!(r instanceof pe)){r.popup&&(r.popup.deleted?i+=1:n+=1);continue}r.isCommentDeleted?i+=1:r.hasEditedComment&&(n+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(r).constructor),e||=Object.create(null);const l=e[a]||=new Map;for(const[c,u]of Object.entries(o)){if(c==="type")continue;let d=l.get(c);d||(d=new Map,l.set(c,d));const h=d.get(u)??0;d.set(u,h+1)}}if((i>0||n>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:n}),!e)return null;for(const[r,o]of t)e[r]=o.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#s?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class yg extends Jc{#e;constructor(e){super();const{map:t,hash:n,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);this.#e={map:r,hash:n,transfer:i}}get print(){ze("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Te(this,"modifiedIds",{ids:new Set,hash:""})}}class xC{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(Ie(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,a=new FontFace(i,r,o);this.addNativeFontFace(a);try{await a.load(),this.#e.add(i),n?.(e)}catch{Se(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Se(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Te(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Te(this,"isSyncFontLoadingSupported",Et||yt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ie(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Te(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(A,S){return A.charCodeAt(S)<<24|A.charCodeAt(S+1)<<16|A.charCodeAt(S+2)<<8|A.charCodeAt(S+3)&255}function i(A,S,b,x){const E=A.substring(0,S),C=A.substring(S+b);return E+x+C}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function u(A,S){if(++c>30){Se("Load test font never loaded."),S();return}if(l.font="30px "+A,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(u.bind(null,A,S))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let h=this._loadTestFont;h=i(h,976,d.length,d);const p=16,g=1482184792;let m=n(h,p);for(r=0,o=d.length-3;r<o;r+=4)m=m-g+n(d,r)|0;r<d.length&&(m=m-g+n(d+"XXX",r)|0),h=i(h,p,4,sC(m));const y=`url(data:font/opentype;base64,${btoa(h)});`,_=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(_);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const A of[e.loadedName,d]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=A,w.append(S)}this._document.body.append(w),u(d,()=>{w.remove(),t.complete()})}}class SC{#e;constructor(e,t=null,n,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${hg(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(o){Se(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=r}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function CC(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Et)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function EC(s){if(Et&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Mr(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Zr(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Jl=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,TC=s=>typeof s=="object"&&typeof s?.name=="string",PC=lC.bind(null,Jl,TC);class kC{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:r}=n;if(r.aborted){Se("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Qr={DATA:1,ERROR:2},ot={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Wd(){}function Lt(s){if(s instanceof vs||s instanceof Wl||s instanceof Nd||s instanceof Io||s instanceof Ja)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new vs(s.message);case"InvalidPDFException":return new Wl(s.message);case"PasswordException":return new Nd(s.message,s.code);case"ResponseException":return new Io(s.message,s.status,s.missing);case"UnknownErrorException":return new Ja(s.message,s.details)}return new Ja(s.message,s.toString())}class Ui{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Qr.DATA)i.resolve(e.data);else if(e.callback===Qr.ERROR)i.reject(Lt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:n,targetName:i,callback:Qr.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:i,callback:Qr.ERROR,callbackId:e.callbackId,reason:Lt(o)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,n,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:c.desiredSize},i),u.promise},pull:c=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:ot.PULL,streamId:r,desiredSize:c.desiredSize}),u.promise},cancel:c=>{Ie(c instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:ot.CANCEL,streamId:r,reason:Lt(c)}),u.promise}},n)}#s(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:ot.ENQUEUE,streamId:t,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:ot.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){Ie(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:ot.ERROR,streamId:t,reason:Lt(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){r.postMessage({sourceName:n,targetName:i,stream:ot.START_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:ot.START_COMPLETE,streamId:t,reason:Lt(c)})})}#n(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case ot.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Lt(e.reason));break;case ot.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Lt(e.reason));break;case ot.PULL:if(!a){r.postMessage({sourceName:n,targetName:i,stream:ot.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||Wd).then(function(){r.postMessage({sourceName:n,targetName:i,stream:ot.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:ot.PULL_COMPLETE,streamId:t,reason:Lt(c)})});break;case ot.ENQUEUE:if(Ie(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case ot.CLOSE:if(Ie(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#o(o,t);break;case ot.ERROR:Ie(o,"error should have stream controller"),o.controller.error(Lt(e.reason)),this.#o(o,t);break;case ot.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Lt(e.reason)),this.#o(o,t);break;case ot.CANCEL:if(!a)break;const l=Lt(e.reason);Promise.try(a.onCancel||Wd,l).then(function(){r.postMessage({sourceName:n,targetName:i,stream:ot.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:n,targetName:i,stream:ot.CANCEL_COMPLETE,streamId:t,reason:Lt(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#o(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class vg{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ze("Abstract method `_createCanvas` called.")}}class MC extends vg{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class bg{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class Gd extends bg{async _fetch(e){const t=await Rr(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Mr(t)}}class wg{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,r){return"none"}destroy(e=!1){}}class RC extends wg{#e;#t;#s;#n;#o;#i;#r=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#o=t}get#a(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const e=this.#o.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#o.createElementNS($n,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#o.createElementNS($n,"defs"),e.append(n),n.append(this.#s),this.#o.body.append(e)}return this.#s}#h(e){if(e.length===1){const l=e[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;const u=c.join(",");return[u,u,u]}const[t,n,i]=e,r=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)r[l]=t[l]/255,o[l]=n[l]/255,a[l]=i[l]/255;return[r.join(","),o.join(","),a.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#o.URL;t!==this.#o.baseURI&&(ga(t)?Se('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=cg(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#a.get(e);if(t)return t;const[n,i,r]=this.#h(e),o=e.length===1?n:`${n}${i}${r}`;if(t=this.#a.get(o),t)return this.#a.set(e,t),t;const a=`g_${this.#n}_transfer_map_${this.#r++}`,l=this.#d(a);this.#a.set(e,l),this.#a.set(o,l);const c=this.#p(a);return this.#g(n,i,r,c),l}addHCMFilter(e,t){const n=`${e}-${t}`,i="base";let r=this.#c.get(i);if(r?.key===n||(r?(r.filter?.remove(),r.key=n,r.url="none",r.filter=null):(r={key:n,url:"none",filter:null},this.#c.set(i,r)),!e||!t))return r.url;const o=this.#b(e);e=de.makeHexColor(...o);const a=this.#b(t);if(t=de.makeHexColor(...a),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return r.url;const l=new Array(256);for(let f=0;f<=255;f++){const p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}const c=l.join(","),u=`g_${this.#n}_hcm_filter`,d=r.filter=this.#p(u);this.#g(c,c,c,d),this.#m(d);const h=(f,p)=>{const g=o[f]/255,m=a[f]/255,y=new Array(p+1);for(let _=0;_<=p;_++)y[_]=g+_/p*(m-g);return y.join(",")};return this.#g(h(0,5),h(1,5),h(2,5),d),r.url=this.#d(u),r.url}addAlphaFilter(e){let t=this.#a.get(e);if(t)return t;const[n]=this.#h([e]),i=`alpha_${n}`;if(t=this.#a.get(i),t)return this.#a.set(e,t),t;const r=`g_${this.#n}_alpha_map_${this.#r++}`,o=this.#d(r);this.#a.set(e,o),this.#a.set(i,o);const a=this.#p(r);return this.#y(n,a),o}addLuminosityFilter(e){let t=this.#a.get(e||"luminosity");if(t)return t;let n,i;if(e?([n]=this.#h([e]),i=`luminosity_${n}`):i="luminosity",t=this.#a.get(i),t)return this.#a.set(e,t),t;const r=`g_${this.#n}_luminosity_map_${this.#r++}`,o=this.#d(r);this.#a.set(e,o),this.#a.set(i,o);const a=this.#p(r);return this.#f(a),e&&this.#y(n,a),o}addHighlightHCMFilter(e,t,n,i,r){const o=`${t}-${n}-${i}-${r}`;let a=this.#c.get(e);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#c.set(e,a)),!t||!n))return a.url;const[l,c]=[t,n].map(this.#b.bind(this));let u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[i,r].map(this.#b.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#l.style.color="";const p=(y,_,w)=>{const A=new Array(256),S=(d-u)/w,b=y/255,x=(_-y)/(255*w);let E=0;for(let C=0;C<=w;C++){const M=Math.round(u+C*S),O=b+C*x;for(let W=E;W<=M;W++)A[W]=O;E=M+1}for(let C=E;C<256;C++)A[C]=A[E-1];return A.join(",")},g=`g_${this.#n}_hcm_${e}_filter`,m=a.filter=this.#p(g);return this.#m(m),this.#g(p(h[0],f[0],5),p(h[1],f[1],5),p(h[2],f[2],5),m),a.url=this.#d(g),a.url}destroy(e=!1){e&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#r=0)}#f(e){const t=this.#o.createElementNS($n,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#m(e){const t=this.#o.createElementNS($n,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#o.createElementNS($n,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,n){const i=this.#o.createElementNS($n,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}#g(e,t,n,i){const r=this.#o.createElementNS($n,"feComponentTransfer");i.append(r),this.#u(r,"feFuncR",e),this.#u(r,"feFuncG",t),this.#u(r,"feFuncB",n)}#y(e,t){const n=this.#o.createElementNS($n,"feComponentTransfer");t.append(n),this.#u(n,"feFuncA",e)}#b(e){return this.#l.style.color=e,Ir(getComputedStyle(this.#l).getPropertyValue("color"))}}class _g{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class Kd extends _g{async _fetch(e){const t=await Rr(e,"arraybuffer");return new Uint8Array(t)}}class Ag{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class Xd extends Ag{async _fetch(e){const t=await Rr(e,"arraybuffer");return new Uint8Array(t)}}Et&&Se("Please use the `legacy` build in Node.js environments.");async function Zc(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class DC extends wg{}class IC extends vg{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class OC extends bg{async _fetch(e){return Zc(e)}}class LC extends _g{async _fetch(e){return Zc(e)}}class FC extends Ag{async _fetch(e){return Zc(e)}}const Ys="__forcedDependency",{floor:Yd,ceil:Jd}=Math;function eo(s,e,t,n,i,r){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],i),s[e*4+3]=Math.max(s[e*4+3],r)}const Zl=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class BC{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Zl}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const to=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};class NC{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ys]:[]};#s=new Map;#n=[];#o=[];#i=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#m;#p;#u;#g;constructor(e,t,n=!1){this.#f=e.width,this.#m=e.height,this.#y(t),n&&(this.#g=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const n=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),t&&t.length>0?(this.#u.set(t),this.#u.fill(Zl,t.length)):this.#u.fill(Zl)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Ys]:{__proto__:this.#t[Ys]}},this.#r={__proto__:this.#r},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#r=Object.getPrototypeOf(this.#r);const n=this.#n.pop();return n!==void 0&&(to(this.#g,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(to(this.#g,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#o.push(e),this}endMarkedContent(e){const t=this.#o.pop();return t!==void 0&&(to(this.#g,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#i.push(de.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#s.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Ys,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(Ys,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0),this}recordClipBox(e,t,n,i,r,o){const a=de.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];de.axialAlignedBoundingBox([n,r,i,o],a,l);const c=de.intersect(this.#r,l);return c?(this.#r[0]=c[0],this.#r[1]=c[1],this.#r[2]=c[2],this.#r[3]=c[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(e,t,n,i,r,o){const a=this.#r;if(a[0]===1/0)return this;const l=de.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(a[0]===-1/0)return de.axialAlignedBoundingBox([n,r,i,o],l,this.#a),this;const c=[1/0,1/0,-1/0,-1/0];return de.axialAlignedBoundingBox([n,r,i,o],l,c),this.#a[0]=Math.min(this.#a[0],Math.max(c[0],a[0])),this.#a[1]=Math.min(this.#a[1],Math.max(c[1],a[1])),this.#a[2]=Math.max(this.#a[2],Math.min(c[2],a[2])),this.#a[3]=Math.max(this.#a[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,t,n,i=1,r=0,o=0,a){const l=n.bbox;let c,u;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&this.#d.get(n),c!==!1&&(u=[0,0,0,0],de.axialAlignedBoundingBox(l,n.fontMatrix,u),(i!==1||r!==0||o!==0)&&de.scaleMinMax([i,0,0,-i,r,o],u),c)))return this.recordBBox(e,t,u[0],u[2],u[1],u[3]);if(!a)return this.recordFullPageBBox(e);const d=a();return l&&u&&c===void 0&&(c=u[0]<=r-d.actualBoundingBoxLeft&&u[2]>=r+d.actualBoundingBoxRight&&u[1]<=o-d.actualBoundingBoxAscent&&u[3]>=o+d.actualBoundingBoxDescent,this.#d.set(n,c),c)?this.recordBBox(e,t,u[0],u[2],u[1],u[3]):this.recordBBox(e,t,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#a[0]=Math.max(0,this.#r[0]),this.#a[1]=Math.max(0,this.#r[1]),this.#a[2]=Math.min(this.#f,this.#r[2]),this.#a[3]=Math.min(this.#m,this.#r[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,i=this.#e,r=this.#t;for(const o of t)o in this.#e?n.add(i[o]):o in r&&r[o].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Ys]),this.#g){const n=to(this.#g,e),{dependencies:i}=n;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#o.forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(this.#c===e){const n=Yd(this.#a[0]*256/this.#f),i=Yd(this.#a[1]*256/this.#m),r=Jd(this.#a[2]*256/this.#f),o=Jd(this.#a[3]*256/this.#m);eo(this.#p,e,n,i,r,o);for(const a of this.#l)a!==e&&eo(this.#p,a,n,i,r,o);for(const a of this.#n)a!==e&&eo(this.#p,a,n,i,r,o);for(const a of this.#o)a!==e&&eo(this.#p,a,n,i,r,o);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#a[0]),this.#r[1]=Math.max(this.#r[1],this.#a[1]),this.#r[2]=Math.min(this.#r[2],this.#a[2]),this.#r[3]=Math.min(this.#r[3],this.#a[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new BC(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class Oo{#e;#t;#s;#n=0;#o=0;constructor(e,t,n){if(e instanceof Oo&&e.#s===!!n)return e;this.#e=e,this.#t=t,this.#s=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#o++,this.#e.save(this.#t),this}restore(e){return this.#o>0&&(this.#e.restore(this.#t),this.#o--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,i,r,o){return this.#s||this.#e.recordClipBox(this.#t,t,n,i,r,o),this}recordBBox(e,t,n,i,r,o){return this.#s||this.#e.recordBBox(this.#t,t,n,i,r,o),this}recordCharacterBBox(e,t,n,i,r,o,a){return this.#s||this.#e.recordCharacterBBox(this.#t,t,n,i,r,o,a),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const en={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},pt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ql(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),s.clip(i)}class Qc{isModifyingCurrentTransform(){return!1}getPattern(){ze("Abstract method `getPattern` called.")}}class $C extends Qc{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let r;if(i===pt.STROKE||i===pt.FILL){const o=t.current.getClippedPathBoundingBox(i,Qe(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),n=de.transform(n,[1,0,0,1,o[0],o[1]]),u.transform(...t.baseTransform),this.matrix&&u.transform(...this.matrix),Ql(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=e.createPattern(c.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else Ql(e,this._bbox),r=this._createGradient(e);return r}}function el(s,e,t,n,i,r,o,a){const l=e.coords,c=e.colors,u=s.data,d=s.width*4;let h;l[t+1]>l[n+1]&&(h=t,t=n,n=h,h=r,r=o,o=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=o,o=a,a=h),l[t+1]>l[n+1]&&(h=t,t=n,n=h,h=r,r=o,o=h);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,g=(l[n]+e.offsetX)*e.scaleX,m=(l[n+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,_=(l[i+1]+e.offsetY)*e.scaleY;if(p>=_)return;const w=c[r],A=c[r+1],S=c[r+2],b=c[o],x=c[o+1],E=c[o+2],C=c[a],M=c[a+1],O=c[a+2],W=Math.round(p),se=Math.round(_);let z,oe,q,$,k,L,Y,ee;for(let N=W;N<=se;N++){if(N<m){const D=N<p?0:(p-N)/(p-m);z=f-(f-g)*D,oe=w-(w-b)*D,q=A-(A-x)*D,$=S-(S-E)*D}else{let D;N>_?D=1:m===_?D=0:D=(m-N)/(m-_),z=g-(g-y)*D,oe=b-(b-C)*D,q=x-(x-M)*D,$=E-(E-O)*D}let ie;N<p?ie=0:N>_?ie=1:ie=(p-N)/(p-_),k=f-(f-y)*ie,L=w-(w-C)*ie,Y=A-(A-M)*ie,ee=S-(S-O)*ie;const we=Math.round(Math.min(z,k)),Ce=Math.round(Math.max(z,k));let Me=d*N+we*4;for(let D=we;D<=Ce;D++)ie=(z-D)/(z-k),ie<0?ie=0:ie>1&&(ie=1),u[Me++]=oe-(oe-L)*ie|0,u[Me++]=q-(q-Y)*ie|0,u[Me++]=$-($-ee)*ie|0,u[Me++]=255}}function qC(s,e,t){const n=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(n.length/a)-1,c=a-1;for(r=0;r<l;r++){let u=r*a;for(let d=0;d<c;d++,u++)el(s,t,n[u],n[u+1],n[u+a],i[u],i[u+1],i[u+a]),el(s,t,n[u+a+1],n[u+1],n[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)el(s,t,n[r],n[r+1],n[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class HC extends Qc{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*e[1]*1.1)),3e3),f=c/d,p=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},m=d+4,y=h+4,_=n.getCanvas("mesh",m,y),w=_.context,A=w.createImageData(d,h);if(t){const b=A.data;for(let x=0,E=b.length;x<E;x+=4)b[x]=t[0],b[x+1]=t[1],b[x+2]=t[2],b[x+3]=255}for(const b of this._figures)qC(A,b,g);return w.putImageData(A,2,2),{canvas:_.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Ql(e,this._bbox);const r=new Float32Array(2);if(i===pt.SHADING)de.singularValueDecompose2dScale(Qe(e),r);else if(this.matrix){de.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;de.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=a,r[1]*=l}else de.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,i===pt.SHADING?null:this._background,t.cachedCanvases);return i!==pt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class jC extends Qc{getPattern(){return"hotpink"}}function UC(s){switch(s[0]){case"RadialAxial":return new $C(s);case"Mesh":return new HC(s);case"Dummy":return new jC}throw new Error(`Unknown IR type: ${s[0]}`)}const Zd={COLORED:1,UNCOLORED:2};class eu{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:n,operatorList:i,paintType:r,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),pa("TilingType: "+o);const d=n[0],h=n[1],f=n[2],p=n[3],g=f-d,m=p-h,y=new Float32Array(2);de.singularValueDecompose2dScale(this.matrix,y);const[_,w]=y;de.singularValueDecompose2dScale(this.baseTransform,y);const A=_*y[0],S=w*y[1];let b=g,x=m,E=!1,C=!1;const M=Math.ceil(c*A),O=Math.ceil(u*S),W=Math.ceil(g*A),se=Math.ceil(m*S);M>=W?b=c:E=!0,O>=se?x=u:C=!0;const z=this.getSizeAndScale(b,this.ctx.canvas.width,A),oe=this.getSizeAndScale(x,this.ctx.canvas.height,S),q=e.cachedCanvases.getCanvas("pattern",z.size,oe.size),$=q.context,k=l.createCanvasGraphics($,t);if(k.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(k,r,a),$.translate(-z.scale*d,-oe.scale*h),k.transform(0,z.scale,0,0,oe.scale,0,0),$.save(),k.dependencyTracker?.save(),this.clipBbox(k,d,h,f,p),k.baseTransform=Qe(k.ctx),k.executeOperatorList(i),k.endDrawing(),k.dependencyTracker?.restore(),$.restore(),E||C){const L=q.canvas;E&&(b=c),C&&(x=u);const Y=this.getSizeAndScale(b,this.ctx.canvas.width,A),ee=this.getSizeAndScale(x,this.ctx.canvas.height,S),N=Y.size,ie=ee.size,we=e.cachedCanvases.getCanvas("pattern-workaround",N,ie),Ce=we.context,Me=E?Math.floor(g/c):0,D=C?Math.floor(m/u):0;for(let te=0;te<=Me;te++)for(let Z=0;Z<=D;Z++)Ce.drawImage(L,N*te,ie*Z,N,ie,0,0,N,ie);return{canvas:we.canvas,scaleX:Y.scale,scaleY:ee.scale,offsetX:d,offsetY:h}}return{canvas:q.canvas,scaleX:z.scale,scaleY:oe.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,t,n){const i=Math.max(eu.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=i?r=i:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,i,r){const o=i-t,a=r-n;e.ctx.rect(t,n,o,a),de.axialAlignedBoundingBox([t,n,i,r],Qe(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case Zd.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=r.fillColor=o,i.strokeStyle=r.strokeColor=a;break;case Zd.UNCOLORED:i.fillStyle=i.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new nC(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,r){let o=n;i!==pt.SHADING&&(o=de.transform(o,t.baseTransform),this.matrix&&(o=de.transform(o,this.matrix)));const a=this.createPatternCanvas(t,r);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}function VC({src:s,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=yt.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],u=n>>3,d=n&7,h=s.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<i;p++){for(const m=e+u;e<m;e++){const y=e<h?s[e]:255;t[f++]=y&128?c:l,t[f++]=y&64?c:l,t[f++]=y&32?c:l,t[f++]=y&16?c:l,t[f++]=y&8?c:l,t[f++]=y&4?c:l,t[f++]=y&2?c:l,t[f++]=y&1?c:l}if(d===0)continue;const g=e<h?s[e++]:255;for(let m=0;m<d;m++)t[f++]=g&1<<7-m?c:l}return{srcPos:e,destPos:f}}const Qd=16,eh=100,zC=15,th=10,Ft=16,tl=new DOMMatrix,Vt=new Float32Array(2),ri=new Float32Array([1/0,1/0,-1/0,-1/0]);function WC(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,i,r,o,a){e.transform(t,n,i,r,o,a),this.__originalTransform(t,n,i,r,o,a)},s.setTransform=function(t,n,i,r,o,a){e.setTransform(t,n,i,r,o,a),this.__originalSetTransform(t,n,i,r,o,a)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,i,r,o,a){e.bezierCurveTo(t,n,i,r,o,a),this.__originalBezierCurveTo(t,n,i,r,o,a)},s.rect=function(t,n,i,r){e.rect(t,n,i,r),this.__originalRect(t,n,i,r)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class GC{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function no(s,e,t,n,i,r,o,a,l,c){const[u,d,h,f,p,g]=Qe(s);if(d===0&&h===0){const _=o*u+p,w=Math.round(_),A=a*f+g,S=Math.round(A),b=(o+l)*u+p,x=Math.abs(Math.round(b)-w)||1,E=(a+c)*f+g,C=Math.abs(Math.round(E)-S)||1;return s.setTransform(Math.sign(u),0,0,Math.sign(f),w,S),s.drawImage(e,t,n,i,r,0,0,x,C),s.setTransform(u,d,h,f,p,g),[x,C]}if(u===0&&f===0){const _=a*h+p,w=Math.round(_),A=o*d+g,S=Math.round(A),b=(a+c)*h+p,x=Math.abs(Math.round(b)-w)||1,E=(o+l)*d+g,C=Math.abs(Math.round(E)-S)||1;return s.setTransform(0,Math.sign(d),Math.sign(h),0,w,S),s.drawImage(e,t,n,i,r,0,0,C,x),s.setTransform(u,d,h,f,p,g),[C,x]}s.drawImage(e,t,n,i,r,o,a,l,c);const m=Math.hypot(u,d),y=Math.hypot(h,f);return[m*l,y*c]}class nh{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=zl;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ht.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=ri.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=pt.FILL,t=null){const n=this.minMax.slice();if(e===pt.STROKE){t||ze("Stroke bounding box must include transform."),de.singularValueDecompose2dScale(t,Vt);const i=Vt[0]*this.lineWidth/2,r=Vt[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}updateClipFromPath(){const e=de.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(ri,0)}getClippedPathBoundingBox(e=pt.FILL,t=null){return de.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function sh(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%Ft,r=(t-i)/Ft,o=i===0?r:r+1,a=s.createImageData(n,Ft);let l=0,c;const u=e.data,d=a.data;let h,f,p,g;if(e.kind===po.GRAYSCALE_1BPP){const m=u.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),_=y.length,w=n+7>>3,A=4294967295,S=yt.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(p=h<r?Ft:i,c=0,f=0;f<p;f++){const b=m-l;let x=0;const E=b>w?n:b*8-7,C=E&-8;let M=0,O=0;for(;x<C;x+=8)O=u[l++],y[c++]=O&128?A:S,y[c++]=O&64?A:S,y[c++]=O&32?A:S,y[c++]=O&16?A:S,y[c++]=O&8?A:S,y[c++]=O&4?A:S,y[c++]=O&2?A:S,y[c++]=O&1?A:S;for(;x<E;x++)M===0&&(O=u[l++],M=128),y[c++]=O&M?A:S,M>>=1}for(;c<_;)y[c++]=0;s.putImageData(a,0,h*Ft)}}else if(e.kind===po.RGBA_32BPP){for(f=0,g=n*Ft*4,h=0;h<r;h++)d.set(u.subarray(l,l+g)),l+=g,s.putImageData(a,0,f),f+=Ft;h<o&&(g=n*i*4,d.set(u.subarray(l,l+g)),s.putImageData(a,0,f))}else if(e.kind===po.RGB_24BPP)for(p=Ft,g=n*p,h=0;h<o;h++){for(h>=r&&(p=i,g=n*p),c=0,f=g;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;s.putImageData(a,0,h*Ft)}else throw new Error(`bad image kind: ${e.kind}`)}function ih(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%Ft,r=(t-i)/Ft,o=i===0?r:r+1,a=s.createImageData(n,Ft);let l=0;const c=e.data,u=a.data;for(let d=0;d<o;d++){const h=d<r?Ft:i;({srcPos:l}=VC({src:c,srcPos:l,dest:u,width:n,height:h,nonBlackColor:0})),s.putImageData(a,0,d*Ft)}}function Fi(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function so(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function rh(s,e){if(e)return!0;de.singularValueDecompose2dScale(s,Vt);const t=Math.fround(Dn.pixelRatio*wi.PDF_TO_CSS_UNITS);return Vt[0]<=t&&Vt[1]<=t}const KC=["butt","round","square"],XC=["miter","round","bevel"],YC={},oh={};class fi{constructor(e,t,n,i,r,{optionalContentConfig:o,markedContentStack:a=null},l,c,u){this.ctx=e,this.current=new nh(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new GC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,n){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Qe(this.compositeCtx))}this.ctx.save(),so(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Qe(this.ctx)}executeOperatorList(e,t,n,i,r){const o=e.argsArray,a=e.fnArray;let l=t||0;const c=o.length;if(c===l)return l;const u=c-l>th&&typeof n=="function",d=u?Date.now()+zC:0;let h=0;const f=this.commonObjs,p=this.objs;let g,m;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,n),l;if(!r||r(l))if(g=a[l],m=o[l]??null,g!==mr.dependency)m===null?this[g](l):this[g](l,...m);else for(const y of m){this.dependencyTracker?.recordNamedData(y,l);const _=y.startsWith("g_")?f:p;if(!_.has(y))return _.get(y,n),l}if(l++,l===c)return l;if(u&&++h>th){if(Date.now()>d)return n(),l;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=n,l=i,c="prescale1",u,d;for(;r>2&&a>1||o>2&&l>1;){let h=a,f=l;r>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(e,0,0,a,l,0,0,h,f),e=u.canvas,a=h,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e,t){const n=this.ctx,{width:i,height:r}=t,o=this.current.fillColor,a=this.current.patternFill,l=Qe(n);let c,u,d,h;if((t.bitmap||t.data)&&t.count>1){const M=t.bitmap||t.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(M),c||(c=new Map,this._cachedBitmapsMap.set(M,c));const O=c.get(u);if(O&&!a){const W=Math.round(Math.min(l[0],l[2])+l[4]),se=Math.round(Math.min(l[1],l[3])+l[5]);return this.dependencyTracker?.recordDependencies(e,en.transformAndFill),{canvas:O,offsetX:W,offsetY:se}}d=O}d||(h=this.cachedCanvases.getCanvas("maskCanvas",i,r),ih(h.context,t));let f=de.transform(l,[1/i,0,0,-1/r,0,0]);f=de.transform(f,[1,0,0,1,0,-r]);const p=ri.slice();de.axialAlignedBoundingBox([0,0,i,r],f,p);const[g,m,y,_]=p,w=Math.round(y-g)||1,A=Math.round(_-m)||1,S=this.cachedCanvases.getCanvas("fillCanvas",w,A),b=S.context,x=g,E=m;b.translate(-x,-E),b.transform(...f),d||(d=this._scaleImage(h.canvas,_n(b)),d=d.img,c&&a&&c.set(u,d)),b.imageSmoothingEnabled=rh(Qe(b),t.interpolate),no(b,d,0,0,d.width,d.height,0,0,i,r),b.globalCompositeOperation="source-in";const C=de.transform(_n(b),[1,0,0,1,-x,-E]);return b.fillStyle=a?o.getPattern(n,this,C,pt.FILL,e):o,b.fillRect(0,0,i,r),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,S.canvas)),this.dependencyTracker?.recordDependencies(e,en.transformAndFill),{canvas:S.canvas,offsetX:Math.round(x),offsetY:Math.round(E)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=KC[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=XC[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,i]of t)switch(n){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),Fi(this.suspendedCtx,o),WC(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Fi(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const r=i[0],o=i[1],a=i[2]-r,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,n,a,l,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,r,o,a,l,c,u,d){let h=e.canvas,f=l-u,p=c-d;if(o)if(f<0||p<0||f+n>h.width||p+i>h.height){const m=this.cachedCanvases.getCanvas("maskExtension",n,i),y=m.context;y.drawImage(h,-f,-p),y.globalCompositeOperation="destination-atop",y.fillStyle=o,y.fillRect(0,0,n,i),y.globalCompositeOperation="source-over",h=m.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const m=new Path2D;m.rect(f,p,n,i),e.clip(m),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(f,p,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,c,n,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(h,f,p,n,i,l,c,n,i),t.restore()}save(e){this.inSMaskMode&&Fi(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Fi(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,r,o,a){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,r,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[r]=n;if(!i){r||=n[0]=new Path2D,this[t](e,r);return}if(this.dependencyTracker!==null){const o=t===mr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const o=n[0]=new Path2D;for(let a=0,l=r.length;a<l;)switch(r[a++]){case Yr.moveTo:o.moveTo(r[a++],r[a++]);break;case Yr.lineTo:o.lineTo(r[a++],r[a++]);break;case Yr.curveTo:o.bezierCurveTo(r[a++],r[a++],r[a++],r[a++],r[a++],r[a++]);break;case Yr.closePath:o.closePath();break;default:Se(`Unrecognized drawing path operator: ${r[a-1]}`);break}r=o}de.axialAlignedBoundingBox(i,Qe(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const i=this.ctx,r=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=r.getPattern(i,this,_n(i),pt.STROKE,e),o){const a=new Path2D;a.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=a}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,en.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(pt.STROKE,Qe(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const i=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const c=r.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=r.getPattern(i,this,_n(i),pt.FILL,e),c){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=u}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,en.fill),a&&(i.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,en.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=YC}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=oh}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,r=n.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:c,path:u}of t)u&&i.addPath(u,new DOMMatrix(o).preMultiplySelf(r).translate(a,l).scale(c,-c));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||zl,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Se("Invalid font matrix for font "+t),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const o=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let u=n;n<Qd?u=Qd:n>eh&&(u=eh),this.current.fontSizeScale=n/u,this.ctx.font=`${c} ${l} ${u}px ${a}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}paintChar(e,t,n,i,r,o){const a=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,h=u&ht.FILL_STROKE_MASK,f=!!(u&ht.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,g=l.patternStroke&&!c.missingFile;let m;if((c.disableFontFace||f||p||g)&&!c.missingFile&&(m=c.getPathGenerator(this.commonObjs,t)),m&&(c.disableFontFace||p||g)){a.save(),a.translate(n,i),a.scale(d,-d),this.dependencyTracker?.recordCharacterBBox(e,a,c);let y;if(h===ht.FILL||h===ht.FILL_STROKE)if(r){y=a.getTransform(),a.setTransform(...r);const _=this.#s(m,y,r);a.fill(_)}else a.fill(m);if(h===ht.STROKE||h===ht.FILL_STROKE)if(o){y||=a.getTransform(),a.setTransform(...o);const{a:_,b:w,c:A,d:S}=y,b=de.inverseTransform(o),x=de.transform([_,w,A,S,0,0],b);de.singularValueDecompose2dScale(x,Vt),a.lineWidth*=Math.max(Vt[0],Vt[1])/d,a.stroke(this.#s(m,y,o))}else a.lineWidth/=d,a.stroke(m);a.restore()}else(h===ht.FILL||h===ht.FILL_STROKE)&&(a.fillText(t,n,i),this.dependencyTracker?.recordCharacterBBox(e,a,c,d,n,i,()=>a.measureText(t))),(h===ht.STROKE||h===ht.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,a,c,d,n,i,()=>a.measureText(t)).recordDependencies(e,en.stroke),a.strokeText(t,n,i));f&&((this.pendingTextPaths||=[]).push({transform:Qe(a),x:n,y:i,fontSize:d,path:m}),this.dependencyTracker?.recordCharacterBBox(e,a,c,d,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Te(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,en.showText).resetBBox(e),this.current.textRenderingMode&ht.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const r=n.fontSize;if(r===0){this.dependencyTracker?.recordOperation(e);return}const o=this.ctx,a=n.fontSizeScale,l=n.charSpacing,c=n.wordSpacing,u=n.fontDirection,d=n.textHScale*u,h=t.length,f=i.vertical,p=f?1:-1,g=i.defaultVMetrics,m=r*n.fontMatrix[0],y=n.textRenderingMode===ht.FILL&&!i.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),u>0?o.scale(d,-1):o.scale(d,1);let _,w;if(n.patternFill){o.save();const E=n.fillColor.getPattern(o,this,_n(o),pt.FILL,e);_=Qe(o),o.restore(),o.fillStyle=E}if(n.patternStroke){o.save();const E=n.strokeColor.getPattern(o,this,_n(o),pt.STROKE,e);w=Qe(o),o.restore(),o.strokeStyle=E}let A=n.lineWidth;const S=n.textMatrixScale;if(S===0||A===0){const E=n.textRenderingMode&ht.FILL_STROKE_MASK;(E===ht.STROKE||E===ht.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=S;if(a!==1&&(o.scale(a,a),A/=a),o.lineWidth=A,i.isInvalidPDFjsFont){const E=[];let C=0;for(const O of t)E.push(O.unicode),C+=O.width;const M=E.join("");if(o.fillText(M,0,0),this.dependencyTracker!==null){const O=o.measureText(M);this.dependencyTracker.recordBBox(e,this.ctx,-O.actualBoundingBoxLeft,O.actualBoundingBoxRight,-O.actualBoundingBoxAscent,O.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=C*m*d,o.restore(),this.compose();return}let b=0,x;for(x=0;x<h;++x){const E=t[x];if(typeof E=="number"){b+=p*E*r/1e3;continue}let C=!1;const M=(E.isSpace?c:0)+l,O=E.fontChar,W=E.accent;let se,z,oe=E.width;if(f){const k=E.vmetric||g,L=-(E.vmetric?k[1]:oe*.5)*m,Y=k[2]*m;oe=k?-k[0]:oe,se=L/a,z=(b+Y)/a}else se=b/a,z=0;let q;if(i.remeasure&&oe>0){q=o.measureText(O);const k=q.width*1e3/r*a;if(oe<k&&this.isFontSubpixelAAEnabled){const L=oe/k;C=!0,o.save(),o.scale(L,1),se/=L}else oe!==k&&(se+=(oe-k)/2e3*r/a)}if(this.contentVisible&&(E.isInFont||i.missingFile)){if(y&&!W)o.fillText(O,se,z),this.dependencyTracker?.recordCharacterBBox(e,o,q?{bbox:null}:i,r/a,se,z,()=>q??o.measureText(O));else if(this.paintChar(e,O,se,z,_,w),W){const k=se+r*W.offset.x/a,L=z-r*W.offset.y/a;this.paintChar(e,W.fontChar,k,L,_,w)}}const $=f?oe*m-M*u:oe*m+M*u;b+=$,C&&o.restore()}f?n.y-=b:n.x+=b*d,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,r=i.font,o=i.fontSize,a=i.fontDirection,l=r.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||zl,f=t.length,p=i.textRenderingMode===ht.INVISIBLE;let g,m,y,_;if(p||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(d,a);const w=this.dependencyTracker;for(this.dependencyTracker=w?new Oo(w,e):null,g=0;g<f;++g){if(m=t[g],typeof m=="number"){_=l*m*o/1e3,this.ctx.translate(_,0),i.x+=_*d;continue}const A=(m.isSpace?u:0)+c,S=r.charProcOperatorList[m.operatorListId];S?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...h),this.executeOperatorList(S),this.restore()):Se(`Type3 character "${m.operatorListId}" is not available.`);const b=[m.width,0];de.applyTransform(b,h),y=b[0]*o+A,n.translate(y,0),i.x+=y*d}n.restore(),w&&(this.dependencyTracker=w)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,r,o,a){const l=new Path2D;l.rect(i,r,o-i,a-r),this.ctx.clip(l),this.dependencyTracker?.recordBBox(e,this.ctx,i,o,r,a).recordClipBox(e,this.ctx,i,o,r,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||Qe(this.ctx),r={createCanvasGraphics:(o,a)=>new fi(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Oo(this.dependencyTracker,a,!0):null)};n=new eu(t,this.ctx,r,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=UC(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,_n(n),pt.SHADING,e);const r=_n(n);if(r){const{width:o,height:a}=n.canvas,l=ri.slice();de.axialAlignedBoundingBox([0,0,o,a],r,l);const[c,u,d,h]=l;this.ctx.fillRect(c,u,d-c,h-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,en.transform).recordDependencies(e,en.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ze("Should not call beginInlineImage")}beginImageData(){ze("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Qe(this.ctx),n)){de.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,r,o,a]=n,l=new Path2D;l.rect(i,r,o-i,a-r),this.ctx.clip(l),this.dependencyTracker?.recordClipBox(e,this.ctx,i,o,r,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||pa("TODO: Support non-isolated groups."),t.knockout&&Se("Knockout groups not supported.");const i=Qe(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=ri.slice();de.axialAlignedBoundingBox(t.bbox,Qe(n),r);const o=[0,0,n.canvas.width,n.canvas.height];r=de.intersect(r,o)||[0,0,0,0];const a=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-a,1),u=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,c,u),f=h.context;f.translate(-a,-l),f.transform(...i);let p=new Path2D;const[g,m,y,_]=t.bbox;if(p.rect(g,m,y-g,_-m),t.matrix){const w=new Path2D;w.addPath(p,new DOMMatrix(t.matrix)),p=w}f.clip(p),t.smask&&this.smaskStack.push({canvas:h.canvas,context:f,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(a,l),n.save()),Fi(n,f),this.ctx=f,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const r=Qe(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...r);const o=ri.slice();de.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],r,o),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,n,i,r,o){if(this.#e(),so(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const a=n[2]-n[0],l=n[3]-n[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=a,n[3]=l,de.singularValueDecompose2dScale(Qe(this.ctx),Vt);const{viewportScale:c}=this,u=Math.ceil(a*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:h,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(Vt[0],0,0,-Vt[1],0,l*Vt[1]),so(this.ctx)}else{so(this.ctx),this.endPath(e);const c=new Path2D;c.rect(n[0],n[1],a,l),this.ctx.clip(c)}}this.current=new nh(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,r=this._createMaskCanvas(e,t),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,r=0,o,a){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const c=Qe(l);l.transform(n,i,r,o,0,0);const u=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]),this.dependencyTracker?.resetBBox(e);for(let d=0,h=a.length;d<h;d+=2){const f=de.transform(c,[n,i,r,o,a[d],a[d+1]]);l.drawImage(u.canvas,f[4],f[5]),this.dependencyTracker?.recordBBox(e,this.ctx,f[4],f[4]+u.canvas.width,f[5],f[5]+u.canvas.height)}l.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,r=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,en.transformAndFill);for(const o of t){const{data:a,width:l,height:c,transform:u}=o,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=d.context;h.save();const f=this.getObject(e,a,o);ih(h,f),h.globalCompositeOperation="source-in",h.fillStyle=r?i.getPattern(h,this,_n(n),pt.FILL,e):i,h.fillRect(0,0,l,c),h.restore(),n.save(),n.transform(...u),n.scale(1,-1),no(n,d.canvas,0,0,l,c,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,l,0,c),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Se("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,r){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Se("Dependent image isn't ready yet");return}const a=o.width,l=o.height,c=[];for(let u=0,d=r.length;u<d;u+=2)c.push({transform:[n,0,0,i,r[u],r[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(e,o,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,i=t.height,r=this.ctx;this.save(e);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/n,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",n,i).context;sh(u,t),a=this.applyTransferMapsToCanvas(u)}const l=this._scaleImage(a,_n(r));r.imageSmoothingEnabled=rh(Qe(r),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,r,0,n,-i,0).recordDependencies(e,en.imageXObject).recordOperation(e),no(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,a=t.height,c=this.cachedCanvases.getCanvas("inlineImage",o,a).context;sh(c,t),r=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(e);for(const o of n)i.save(),i.transform(...o.transform),i.scale(1,-1),no(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,en.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(i||(this.pendingClip===oh?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Qe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:r}=this.ctx.getTransform();let o,a;if(n===0&&i===0){const l=Math.abs(t),c=Math.abs(r);if(l===c)if(e===0)o=a=1/l;else{const u=l*e;o=a=u<1?1/u:1}else if(e===0)o=1/l,a=1/c;else{const u=l*e,d=c*e;o=u<1?1/u:1,a=d<1?1/d:1}}else{const l=Math.abs(t*r-n*i),c=Math.hypot(t,n),u=Math.hypot(i,r);if(e===0)o=u/l,a=c/l;else{const d=e*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){n.lineWidth=(i||1)*r,n.stroke(e);return}const a=n.getLineDash();t&&n.save(),n.scale(r,o),tl.a=1/r,tl.d=1/o;const l=new Path2D;if(l.addPath(e,tl),a.length>0){const c=Math.max(r,o);n.setLineDash(a.map(u=>u/c)),n.lineDashOffset/=c}n.lineWidth=i||1,n.stroke(l),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const s in mr)fi.prototype[s]!==void 0&&(fi.prototype[mr[s]]=fi.prototype[s]);class pi{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let i=0;for(const c of pi.strings){const u=t.encode(e[c]);n[c]=u,i+=4+u.length}const r=new ArrayBuffer(i),o=new Uint8Array(r),a=new DataView(r);let l=0;for(const c of pi.strings){const u=n[c],d=u.length;a.setUint32(l,d),o.set(u,l+4),l+=4+d}return Ie(l===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){Ie(e<pi.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class gi{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let i=0;for(const h of gi.strings){const f=t.encode(e[h]);n[h]=f,i+=4+f.length}i+=4;let r,o,a=1+i;e.style&&(r=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+r.length+4+o.length);const l=new ArrayBuffer(a),c=new Uint8Array(l),u=new DataView(l);let d=0;u.setUint8(d++,e.guessFallback?1:0),u.setUint32(d,0),d+=4,i=0;for(const h of gi.strings){const f=n[h],p=f.length;i+=4+p,u.setUint32(d,p),c.set(f,d+4),d+=4+p}return u.setUint32(d-i-4,i),e.style&&(u.setUint32(d,r.length),c.set(r,d+4),d+=4+r.length,u.setUint32(d,o.length),c.set(o,d+4),d+=4+o.length),Ie(d<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(d)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Ie(e<gi.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),r=this.#s.decode(new Uint8Array(this.#e,e+4,i));return{style:n,weight:r}}}class je{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#o=this.#n+1+6;#i;#r;#a;constructor({data:e,extra:t}){this.#i=e,this.#r=new TextDecoder,this.#a=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){Ie(e<je.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,i=this.#a.getUint8(t)>>n&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Ie(e<je.numbers.length,"Invalid number index"),this.#a.getFloat64(je.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=je.#t;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=je.#s;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(this.#a.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=je.#n;if(this.#a.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}#h(e){Ie(e<je.strings.length,"Invalid string index");let t=je.#o+4;for(let r=0;r<e;r++)t+=this.#a.getUint32(t)+4;const n=this.#a.getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,t+4,n)),this.#r.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=je.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const i=this.#a.getUint32(e);e+=4+i;const r=this.#a.getUint32(e);if(r!==0)return new Uint8Array(this.#i,e+4,r)}clearData(){let e=je.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const i=this.#a.getUint32(e);e+=4+i;const r=this.#a.getUint32(e);new Uint8Array(this.#i,e+4,r).fill(0),this.#a.setUint32(e,0)}get cssFontInfo(){let e=je.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);e+=4+n;const i=this.#a.getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#i,e+4,i)),new pi(r.buffer)}get systemFontInfo(){let e=je.#o;const t=this.#a.getUint32(e);e+=4+t;const n=this.#a.getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,e+4,n)),new gi(i.buffer)}static write(e){const t=e.systemFontInfo?gi.write(e.systemFontInfo):null,n=e.cssFontInfo?pi.write(e.cssFontInfo):null,i=new TextEncoder,r={};let o=0;for(const g of je.strings)r[g]=i.encode(e[g]),o+=4+r[g].length;const a=je.#o+4+o+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(a),c=new Uint8Array(l),u=new DataView(l);let d=0;const h=je.bools.length;let f=0,p=0;for(let g=0;g<h;g++){const m=e[je.bools[g]];f|=(m===void 0?0:m?2:1)<<p,p+=2,(p===8||g===h-1)&&(u.setUint8(d++,f),f=0,p=0)}Ie(d===je.#e,"FontInfo.write: Boolean properties offset mismatch");for(const g of je.numbers)u.setFloat64(d,e[g]),d+=8;if(Ie(d===je.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){u.setUint8(d++,4);for(const g of e.bbox)u.setInt16(d,g,!0),d+=2}else u.setUint8(d++,0),d+=8;if(Ie(d===je.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){u.setUint8(d++,6);for(const g of e.fontMatrix)u.setFloat64(d,g,!0),d+=8}else u.setUint8(d++,0),d+=48;if(Ie(d===je.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){u.setUint8(d++,1);for(const g of e.defaultVMetrics)u.setInt16(d,g,!0),d+=2}else u.setUint8(d++,0),d+=6;Ie(d===je.#o,"FontInfo.write: DefaultVMetrics properties offset mismatch"),u.setUint32(je.#o,0),d+=4;for(const g of je.strings){const m=r[g],y=m.length;u.setUint32(d,y),c.set(m,d+4),d+=4+y}if(u.setUint32(je.#o,d-je.#o-4),!t)u.setUint32(d,0),d+=4;else{const g=t.byteLength;u.setUint32(d,g),Ie(d+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),d+4),d+=4+g}if(!n)u.setUint32(d,0),d+=4;else{const g=n.byteLength;u.setUint32(d,g),Ie(d+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(n),d+4),d+=4+g}return e.data===void 0?(u.setUint32(d,0),d+=4):(u.setUint32(d,e.data.length),c.set(e.data,d+4),d+=4+e.data.length),Ie(d<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(d)}}class mi{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class JC{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const ti=Symbol("INTERNAL");class ZC{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:n,usage:i,rbGroups:r}){this.#e=!!(e&Ut.DISPLAY),this.#t=!!(e&Ut.PRINT),this.name=t,this.intent=n,this.usage=i,this.rbGroups=r}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==ti&&ze("Internal method `_setVisible` called."),this.#s=n,this.#n=t}}class QC{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=Ut.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new ZC(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(ti,!1);for(const n of e.on)this.#t.get(n)._setVisible(ti,!0);for(const n of e.off)this.#t.get(n)._setVisible(ti,!1);this.#s=this.getHash()}}#o(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=this.#o(r);else if(this.#t.has(r))o=this.#t.get(r).visible;else return Se(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return pa("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Se(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#o(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Se(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Se(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Se(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Se(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Se(`Unknown optional content policy ${e.policy}.`),!0}return Se(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const i=this.#t.get(e);if(!i){Se(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const r of i.rbGroups)for(const o of r)o!==e&&this.#t.get(o)?._setVisible(ti,!1,!0);i._setVisible(ti,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const r=this.#t.get(i);if(r)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new mg;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class e1{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Ie(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,r?.length>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(n),!0)});Ie(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ie(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new t1(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new n1(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class t1{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=Kc(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class n1{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function s1(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let u=a(t);return u=unescape(u),u=l(u),u=c(u),r(u)}if(t=o(s),t){const u=c(t);return r(u)}if(t=n("filename","i").exec(s),t){t=t[1];let u=a(t);return u=c(u),r(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const h=new TextDecoder(u,{fatal:!0}),f=Mr(d);d=h.decode(f),e=!1}catch{}}return d}function r(u){return e&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),e&&(u=i("iso-8859-1",u))),u}function o(u){const d=[];let h;const f=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=f.exec(u))!==null;){let[,g,m,y]=h;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[m,y]}const p=[];for(let g=0;g<d.length&&g in d;++g){let[m,y]=d[g];y=a(y),m&&(y=unescape(y),g===0&&(y=l(y))),p.push(y)}return p.join("")}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){const f=d[h].indexOf('"');f!==-1&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const h=u.slice(0,d),p=u.slice(d+1).replace(/^[^']*'/,"");return i(h,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,m){return String.fromCharCode(parseInt(m,16))}),i(h,p);try{p=atob(p)}catch{}return i(h,p)})}return""}function xg(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function ya(s){return URL.parse(s)?.origin??null}function Sg({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(s.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Cg(s){const e=s.get("Content-Disposition");if(e){let t=s1(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Kc(t))return t}return null}function Lr(s,e){return new Io(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function Eg(s){return s===200||s===206}function Tg(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Pg(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Se(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class i1{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=xg(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ie(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new r1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new o1(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class r1{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,Tg(n,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=ya(r.url),!Eg(r.status))throw Lr(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=Sg({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=Cg(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new vs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Pg(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class o1{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${n-1}`);const o=i.url;fetch(o,Tg(r,this._withCredentials,this._abortController)).then(a=>{const l=ya(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!Eg(a.status))throw Lr(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Pg(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const nl=200,sl=206;function a1(s){const e=s.response;return typeof e!="string"?e:Mr(e).buffer}class l1{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=xg(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=sl):i.expectedStatus=nl,t.responseType="arraybuffer",Ie(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const r=i.status||nl;if(!(r===nl&&n.expectedStatus===sl)&&r!==n.expectedStatus){n.onError(i.status);return}const a=a1(i);if(r===sl){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?n.onDone({begin:parseInt(c[1],10),chunk:a}):(Se('Missing or invalid "Content-Range" header.'),n.onError(0))}else a?n.onDone({begin:0,chunk:a}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class c1{constructor(e){this._source=e,this._manager=new l1(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ie(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new u1(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new d1(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class u1{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ya(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=Sg({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Cg(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Lr(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class d1{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=ya(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Lr(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const h1=/^[a-z][a-z0-9\-+.]+:/i;function f1(s){if(h1.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class p1{constructor(e){this.source=e,this.url=f1(e.url),Ie(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ie(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new g1(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new m1(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class g1{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Lr(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new vs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class m1{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Bi=Symbol("INITIAL_DATA");class kg{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Bi}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const n=this.#e[e];if(!n||n.data===Bi)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==Bi}delete(e){const t=this.#e[e];return!t||t.data===Bi?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Bi&&(yield[e,t])}}}const y1=1e5,ah=30;class Ct{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#o=null;#i=null;#r=0;#a=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#C=new WeakMap;static#x=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=n.scale*Dn.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=n.rawDims;this.#y=[1,0,0,-1,-o,a+r],this.#a=i,this.#r=r,Ct.#k(),Fs(t,n),this.#e.promise.finally(()=>{Ct.#w.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=yt.platform;return Te(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#o??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),Ct.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*Dn.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Fs(this.#l,{rotation:i})),n!==this.#d){t?.(),this.#d=n;const r={div:null,properties:null,ctx:Ct.#M(this.#o)};for(const o of this.#u)r.properties=this.#g.get(o),r.div=o,this.#S(r)}}cancel(){const e=new vs("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#T(e){if(this.#s)return;this.#i.ctx??=Ct.#M(this.#o);const t=this.#u,n=this.#m;for(const i of e){if(t.length>y1){Se("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const r=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),r.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(i.str),this.#A(i)}}#A(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=de.transform(this.#y,e.transform);let r=Math.atan2(i[1],i[0]);const o=this.#f[e.fontName];o.vertical&&(r+=Math.PI/2);let a=this.#n&&o.fontSubstitution||o.fontFamily;a=Ct.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*Ct.#B(a,o,this.#o);let u,d;r===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(r),d=i[5]-c*Math.cos(r));const h="calc(var(--total-scale-factor) *",f=t.style;this.#t===this.#l?(f.left=`${(100*u/this.#a).toFixed(2)}%`,f.top=`${(100*d/this.#r).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${(Ct.#x*l).toFixed(2)}px)`,f.fontFamily=a,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(n.angle=r*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const g=Math.abs(e.transform[0]),m=Math.abs(e.transform[3]);g!==m&&Math.max(g,m)/Math.min(g,m)>1.5&&(p=!0)}if(p&&(n.canvasWidth=o.vertical?e.height:e.width),this.#g.set(t,n),this.#i.div=t,this.#i.properties=n,this.#S(this.#i),n.hasText&&this.#t.append(t),n.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#S(e){const{div:t,properties:n,ctx:i}=e,{style:r}=t;let o="";if(Ct.#x>1&&(o=`scale(${1/Ct.#x})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:a}=r,{canvasWidth:l,fontSize:c}=n;Ct.#P(i,c*this.#d,a);const{width:u}=i.measureText(t.textContent);u>0&&(o=`scaleX(${l*this.#d/u}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#w.size>0)){this.#b.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#M(e=null){let t=this.#v.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#P(e,t,n){const i=this.#C.get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)}static#k(){if(this.#x!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#x=e.getBoundingClientRect().height,e.remove()}static#B(e,t,n){const i=this.#b.get(e);if(i)return i;const r=this.#M(n);r.canvas.width=r.canvas.height=ah,this.#P(r,ah,e);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let c=.8;return a?c=a/(a+l):(yt.platform.isFirefox&&Se("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),this.#b.set(e,c),c}}const v1=100;function Mg(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new tu,{docId:t}=e,n=s.url?CC(s.url):null,i=s.data?EC(s.data):null,r=s.httpHeaders||null,o=s.withCredentials===!0,a=s.password??null,l=s.range instanceof Rg?s.range:null,c=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let u=s.worker instanceof vr?s.worker:null;const d=s.verbosity,h=typeof s.docBaseUrl=="string"&&!ga(s.docBaseUrl)?s.docBaseUrl:null,f=Zr(s.cMapUrl),p=s.cMapPacked!==!1,g=s.CMapReaderFactory||(Et?OC:Gd),m=Zr(s.iccUrl),y=Zr(s.standardFontDataUrl),_=s.StandardFontDataFactory||(Et?LC:Kd),w=Zr(s.wasmUrl),A=s.WasmFactory||(Et?FC:Xd),S=s.stopAtErrors!==!0,b=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,x=s.isEvalSupported!==!1,E=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Et,C=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Et&&(yt.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,O=typeof s.disableFontFace=="boolean"?s.disableFontFace:Et,W=s.fontExtraProperties===!0,se=s.enableXfa===!0,z=s.ownerDocument||globalThis.document,oe=s.disableRange===!0,q=s.disableStream===!0,$=s.disableAutoFetch===!0,k=s.pdfBug===!0,L=s.CanvasFactory||(Et?IC:MC),Y=s.FilterFactory||(Et?DC:RC),ee=s.enableHWA===!0,N=s.useWasm!==!1,ie=l?l.length:s.length??NaN,we=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Et&&!O,Ce=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(g===Gd&&_===Kd&&A===Xd&&f&&y&&w&&ji(f,document.baseURI)&&ji(y,document.baseURI)&&ji(w,document.baseURI)),Me=null;QS(d);const D={canvasFactory:new L({ownerDocument:z,enableHWA:ee}),filterFactory:new Y({docId:t,ownerDocument:z}),cMapReaderFactory:Ce?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:Ce?null:new _({baseUrl:y}),wasmFactory:Ce?null:new A({baseUrl:w})};u||(u=vr.create({verbosity:d,port:mi.workerPort}),e._worker=u);const te={docId:t,apiVersion:"5.4.296",data:i,password:a,disableAutoFetch:$,rangeChunkSize:c,length:ie,docBaseUrl:h,enableXfa:se,evaluatorOptions:{maxImageSize:b,disableFontFace:O,ignoreErrors:S,isEvalSupported:x,isOffscreenCanvasSupported:E,isImageDecoderSupported:C,canvasMaxAreaInBytes:M,fontExtraProperties:W,useSystemFonts:we,useWasm:N,useWorkerFetch:Ce,cMapUrl:f,iccUrl:m,standardFontDataUrl:y,wasmUrl:w}},Z={ownerDocument:z,pdfBug:k,styleElement:Me,loadingParams:{disableAutoFetch:$,enableXfa:se}};return u.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ce=u.messageHandler.sendWithPromise("GetDocRequest",te,i?[i.buffer]:null);let Re;if(l)Re=new e1(l,{disableRange:oe,disableStream:q});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const T=ji(n)?i1:Et?p1:c1;Re=new T({url:n,length:ie,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:oe,disableStream:q})}return ce.then(T=>{if(e.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const P=new Ui(t,T,u.port),R=new _1(P,e,Re,Z,D,ee);e._transport=R,P.send("Ready",null)})}).catch(e._capability.reject),e}class tu{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${tu.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Rg{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#o=[];constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){this.#o.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#o)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class b1{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Te(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class w1{#e=!1;constructor(e,t,n,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new qd:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new kg,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new Dr({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Te(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:r=us.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:h=!1,recordOperations:f=!1,operationsFilter:p=null}){this._stats?.time("Overall");const g=this._transport.getRenderingIntent(i,r,d,h),{renderingIntent:m,cacheKey:y}=g;this.#e=!1,l||=this._transport.getOptionalContentConfig(m);let _=this._intentStates.get(y);_||(_=Object.create(null),this._intentStates.set(y,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const w=!!(m&Ut.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));const A=!!(this._pdfBug&&globalThis.StepperManager?.enabled),S=!this.recordedBBoxes&&(f||A),b=C=>{if(_.renderTasks.delete(x),S){const M=x.gfx?.dependencyTracker.take();M&&(x.stepper&&x.stepper.setOperatorBBoxes(M,x.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=M))}w&&(this.#e=!0),this.#t(),C?(x.capability.reject(C),this._abortOperatorList({intentState:_,reason:C instanceof Error?C:new Error(C)})):x.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},x=new oi({callback:b,params:{canvas:t,canvasContext:e,dependencyTracker:S?new NC(t,_.operatorList.length,A):null,viewport:n,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,operationsFilter:p});(_.renderTasks||=new Set).add(x);const E=x.task;return Promise.all([_.displayReadyCapability.promise,l]).then(([C,M])=>{if(this.destroyed){b();return}if(this._stats?.time("Rendering"),!(M.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");x.initializeGraphics({transparency:C,optionalContentConfig:M}),x.operatorListChanged()}).catch(b),E}getOperatorList({intent:e="display",annotationMode:t=us.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,n,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>yr.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function r(){o.read().then(function({value:l,done:c}){if(c){n(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new qd),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:r,transfer:o}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const u=()=>{l.read().then(({value:d,done:h})=>{if(h){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const h of c.renderTasks)h.operatorListChanged();this.#t()}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof Gc){let i=v1;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new vs(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var ds,an,jn,Ps,Fo,ks,Ms,kt,go,Dg,Ig,Vi,yi,mo;const Je=class Je{constructor({name:e=null,port:t=null,verbosity:n=eC()}={}){vn(this,kt);vn(this,ds,Promise.withResolvers());vn(this,an,null);vn(this,jn,null);vn(this,Ps,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(Ye(Je,Ms).has(t))throw new Error("Cannot use more than one PDFWorker per port.");Ye(Je,Ms).set(t,this),bn(this,kt,Dg).call(this,t)}else bn(this,kt,Ig).call(this)}get promise(){return Ye(this,ds).promise}get port(){return Ye(this,jn)}get messageHandler(){return Ye(this,an)}destroy(){this.destroyed=!0,Ye(this,Ps)?.terminate(),Ot(this,Ps,null),Ye(Je,Ms).delete(Ye(this,jn)),Ot(this,jn,null),Ye(this,an)?.destroy(),Ot(this,an,null)}static create(e){const t=Ye(this,Ms).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Je(e)}static get workerSrc(){if(mi.workerSrc)return mi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Te(this,"_setupFakeWorkerGlobal",(async()=>Ye(this,yi,mo)?Ye(this,yi,mo):(await import(this.workerSrc)).WorkerMessageHandler)())}};ds=new WeakMap,an=new WeakMap,jn=new WeakMap,Ps=new WeakMap,Fo=new WeakMap,ks=new WeakMap,Ms=new WeakMap,kt=new WeakSet,go=function(){Ye(this,ds).resolve(),Ye(this,an).send("configure",{verbosity:this.verbosity})},Dg=function(e){Ot(this,jn,e),Ot(this,an,new Ui("main","worker",e)),Ye(this,an).on("ready",()=>{}),bn(this,kt,go).call(this)},Ig=function(){if(Ye(Je,ks)||Ye(Je,yi,mo)){bn(this,kt,Vi).call(this);return}let{workerSrc:e}=Je;try{Je._isSameOrigin(window.location,e)||(e=Je._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Ui("main","worker",t),i=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?Ye(this,ds).reject(new Error("Worker was destroyed")):bn(this,kt,Vi).call(this)},r=new AbortController;t.addEventListener("error",()=>{Ye(this,Ps)||i()},{signal:r.signal}),n.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}Ot(this,an,n),Ot(this,jn,t),Ot(this,Ps,t),bn(this,kt,go).call(this)}),n.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{bn(this,kt,Vi).call(this)}});const o=()=>{const a=new Uint8Array;n.send("test",a,[a.buffer])};o();return}catch{pa("The worker has been disabled.")}bn(this,kt,Vi).call(this)},Vi=function(){Ye(Je,ks)||(Se("Setting up fake worker."),Ot(Je,ks,!0)),Je._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){Ye(this,ds).reject(new Error("Worker was destroyed"));return}const t=new kC;Ot(this,jn,t);const n=`fake${gu(Je,Fo)._++}`,i=new Ui(n+"_worker",n,t);e.setup(i,t),Ot(this,an,new Ui(n,n+"_worker",t)),bn(this,kt,go).call(this)}).catch(e=>{Ye(this,ds).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},yi=new WeakSet,mo=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},vn(Je,yi),vn(Je,Fo,0),vn(Je,ks,!1),vn(Je,Ms,new WeakMap),Et&&(Ot(Je,ks,!0),mi.workerSrc||="./pdf.worker.mjs"),Je._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},Je._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Je.fromPort=e=>{if(hC("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Je.create(e)};let vr=Je;class _1{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#o=null;constructor(e,t,n,i,r,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new kg,this.fontLoader=new xC({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#i(e,t=null){const n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Te(this,"annotationStorage",new Jc)}getRenderingIntent(e,t=us.ENABLE,n=null,i=!1,r=!1){let o=Ut.DISPLAY,a=Yl;switch(e){case"any":o=Ut.ANY;break;case"display":break;case"print":o=Ut.PRINT;break;default:Se(`getRenderingIntent - invalid intent: ${e}`)}const l=o&Ut.PRINT&&n instanceof yg?n:this.annotationStorage;switch(t){case us.DISABLE:o+=Ut.ANNOTATIONS_DISABLE;break;case us.ENABLE:break;case us.ENABLE_FORMS:o+=Ut.ANNOTATIONS_FORMS;break;case us.ENABLE_STORAGE:o+=Ut.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Se(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Ut.IS_EDITING),r&&(o+=Ut.OPLIST);const{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ct.cleanup(),this._networkStream?.cancelAllRequests(new vs("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Ie(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Ie(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(n,i)=>{Ie(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}Ie(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new b1(n,this))}),e.on("DocException",n=>{t._capability.reject(Lt(n))}),e.on("PasswordRequest",n=>{this.#o=Promise.withResolvers();try{if(!t.onPassword)throw Lt(n);const i=r=>{r instanceof Error?this.#o.reject(r):this.#o.resolve({password:r})};t.onPassword(i,n.code)}catch(i){this.#o.reject(i)}return this.#o.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,r])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in r){const u=r.error;Se(`Error during font loading: ${u}`),this.commonObjs.resolve(n,u);break}const o=new je(r),a=this._params.pdfBug&&globalThis.FontInspector?.enabled?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,l=new SC(o,a,r.extra,r.charProcOperatorList);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l.fontExtraProperties&&l.data&&l.clearData(),this.commonObjs.resolve(n,l)});break;case"CopyLocalImage":const{imageRef:c}=r;Ie(c,"The imageRef must be defined.");for(const u of this.#t.values())for(const[,d]of u.objs)if(d?.ref===c)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,r,o])=>{if(this.destroyed)return;const a=this.#t.get(i);if(!a.objs.has(n)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Se("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#s.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#n.set(r.refStr,e);const o=new w1(t,r,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#s.set(t,i),i}getPageIndex(e){return Jl(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new QC(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new JC(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ct.cleanup()}}cachedPageNumber(e){if(!Jl(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class A1{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class oi{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null,enableHWA:f=!1,operationsFilter:p=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new A1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(oi.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");oi.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:r,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new fi(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),oi.#t.delete(this._canvas),e||=new Gc(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),oi.#t.delete(this._canvas),this.callback())))}}const x1="5.4.296",S1="f56dc8601";class tn{#e=null;#t=null;#s;#n=null;#o=!1;#i=!1;#r=null;#a;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Te(this,"_keyboardManager",new Or([[["Escape","mac+Escape"],tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],tn.prototype._moveToPrevious],[["Home","mac+Home"],tn.prototype._moveToBeginning],[["End","mac+End"],tn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#r=e):this.#i=!0,this.#l=e?._uiManager||t,this.#a=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",tn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#r&&(e.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:t}),e.addEventListener("keydown",this.#m.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#s,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",on,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(e.id=`${this.#r.id}_colorpicker_dropdown`);for(const[n,i]of this.#l.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",tn.#h[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.ariaSelected=i===this.#s,r.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",this.#m.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:De.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#g){this.#p(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#g){this.#p(e);return}this.#n.lastChild?.focus()}#m(e){tn._keyboardManager.exec(this,e)}#p(e){if(this.#g){this.hideDropdown();return}if(this.#o=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#g){this.#r?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class br{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,br.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",br.#n[e]),i.addEventListener("input",()=>{this.#s.updateParams(t,i.value)},{signal:this.#s._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function lh(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Ni(s){return Math.max(0,Math.min(255,255*s))}class ch{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ni(e),[e,e,e]}static G_HTML([e]){const t=lh(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Ni)}static RGB_HTML(e){return`#${e.map(lh).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[Ni(1-Math.min(1,e+i)),Ni(1-Math.min(1,n+i)),Ni(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,r=1-t,o=1-n,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class C1{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ze("Abstract method `_createSVG` called.")}}class Lo extends C1{_createSVG(e){return document.createElementNS($n,e)}}const E1=9,Bs=new WeakSet,T1=new Date().getTimezoneOffset()*60*1e3;class uh{static create(e){switch(e.data.annotationType){case at.LINK:return new nu(e);case at.TEXT:return new k1(e);case at.WIDGET:switch(e.data.fieldType){case"Tx":return new M1(e);case"Btn":return e.data.radioButton?new Og(e):e.data.checkBox?new D1(e):new I1(e);case"Ch":return new O1(e);case"Sig":return new R1(e)}return new Us(e);case at.POPUP:return new ec(e);case at.FREETEXT:return new Lg(e);case at.LINE:return new F1(e);case at.SQUARE:return new B1(e);case at.CIRCLE:return new N1(e);case at.POLYLINE:return new Fg(e);case at.CARET:return new q1(e);case at.INK:return new su(e);case at.POLYGON:return new $1(e);case at.HIGHLIGHT:return new Bg(e);case at.UNDERLINE:return new H1(e);case at.SQUIGGLY:return new j1(e);case at.STRIKEOUT:return new U1(e);case at.STAMP:return new Ng(e);case at.FILEATTACHMENT:return new V1(e);default:return new et(e)}}}class et{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return et._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:i}=this.data;let r=-1/0,o=-1/0;if(t?.length>=8){for(let a=0;a<t.length;a+=8)t[a+1]>o?(o=t[a+1],r=t[a+2]):t[a+1]===o&&(r=Math.max(r,t[a+2]));return[r,o]}if(n?.length>=1){for(const a of n)for(let l=0,c=a.length;l<c;l+=2)a[l+1]>o?(o=a[l+1],r=a[l]):a[l+1]===o&&(r=Math.max(r,a[l]));if(r!==1/0)return[r,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/n,e[1]=100*(e[1]-o)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${gr}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${gr}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let i=this.#s?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#s.popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof Us)&&!(this instanceof nu)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof ec){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,m=t.borderStyle.verticalCornerRadius;if(g>0||m>0){const _=`calc(${g}px * var(--total-scale-factor)) / calc(${m}px * var(--total-scale-factor))`;o.borderRadius=_}else if(this instanceof Og){const _=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=_}switch(t.borderStyle.style){case ei.SOLID:o.borderStyle="solid";break;case ei.DASHED:o.borderStyle="dashed";break;case ei.BEVELED:Se("Unimplemented border style: beveled");break;case ei.INSET:Se("Unimplemented border style: inset");break;case ei.UNDERLINE:o.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(this.#t=!0,o.borderColor=de.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const c=de.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=i.rawDims;o.left=`${100*(c[0]-h)/u}%`,o.top=`${100*(c[1]-f)/d}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(p,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/n}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const r=i.detail[t],o=r[0],a=r.slice(1);i.target.style[n]=ch[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[n]:ch[`${o}_rgb`](a)})};return Te(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,r]of Object.entries(t)){const o=n[i];if(o){const a={detail:{[i]:r},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,r]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,m,y,_]=e.subarray(2,6);if(i===g&&r===m&&t===y&&n===_)return}const{style:o}=this.container;let a;if(this.#t){const{borderColor:g,borderWidth:m}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${m}">`],this.container.classList.add("hasBorder")}const l=i-t,c=r-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const h=u.createElement("defs");d.append(h);const f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let g=2,m=e.length;g<m;g+=8){const y=e[g],_=e[g+1],w=e[g+2],A=e[g+3],S=u.createElement("rect"),b=(w-t)/l,x=(r-_)/c,E=(y-w)/l,C=(_-A)/c;S.setAttribute("x",b),S.setAttribute("y",x),S.setAttribute("width",E),S.setAttribute("height",C),f.append(S),a?.push(`<rect vector-effect="non-scaling-stroke" x="${b}" y="${x}" width="${E}" height="${C}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const r=this.#s=new ec({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Bs.has(c)){Se(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:l,domElement:c})}return n}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&Bs.has(i)&&n.push({id:o,exportValue:r,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class P1 extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class nu extends et{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#s(n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#s(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=n.get(i);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Se('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:i,refs:r,include:o}=t,a=[];if(i.length!==0||r.length!==0){const u=new Set(r);for(const d of i){const h=this._fieldObjects[d]||[];for(const{id:f}of h)u.add(f)}for(const d of Object.values(this._fieldObjects))for(const h of d)u.has(h.id)===o&&a.push(h)}else for(const u of Object.values(this._fieldObjects))a.push(...u);const l=this.annotationStorage,c=[];for(const u of a){const{id:d}=u;switch(c.push(d),u.type){case"text":{const f=u.defaultValue||"";l.setValue(d,{value:f});break}case"checkbox":case"radiobutton":{const f=u.defaultValue===u.exportValues;l.setValue(d,{value:f});break}case"combobox":case"listbox":{const f=u.defaultValue||"";l.setValue(d,{value:f});break}default:continue}const h=document.querySelector(`[data-element-id="${d}"]`);if(h){if(!Bs.has(h)){Se(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;h.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class k1 extends et{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Us extends et{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return yt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,r){n.includes("mouse")?e.addEventListener(n,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}})})}_setEventListeners(e,t,n,i){for(const[r,o]of n)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,r,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":de.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||E1,r=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(Ya*i))||1,d=c/u;o=Math.min(i,l(d/Ya))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/Ya))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=de.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class M1 extends Us{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),r.setValue(o.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let r=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:r,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=a??r,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",a??r),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Bs.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:c,datetimeType:u,timeStep:d}=this.data,h=!!u&&this.enableScripting;c&&(n.title=c),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(n,"value",p.target.value,"value"),l.formattedValue=null}),n.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";n.value=l.userValue=g,l.formattedValue=null});let f=p=>{const{formattedValue:g}=l;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{if(l.focused)return;const{target:m}=g;if(h&&(m.type=u,d&&(m.step=d)),l.userValue){const y=l.userValue;if(h)if(u==="time"){const _=new Date(y),w=[_.getHours(),_.getMinutes(),_.getSeconds()];m.value=w.map(A=>A.toString().padStart(2,"0")).join(":")}else m.value=new Date(y-T1).toISOString().split(u==="date"?"T":".",1)[0];else m.value=y}l.lastCommittedValue=m.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(y){l.userValue=y.detail.value??"",h||e.setValue(t,{value:l.userValue.toString()}),y.target.value=l.userValue},formattedValue(y){const{formattedValue:_}=y.detail;l.formattedValue=_,_!=null&&y.target!==document.activeElement&&(y.target.value=_);const w={formattedValue:_};h&&(w.value=_),e.setValue(t,w)},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{const{charLimit:_}=y.detail,{target:w}=y;if(_===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",_);let A=l.userValue;!A||A.length<=_||(A=A.slice(0,_),w.value=l.userValue=A,e.setValue(t,{value:A}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),n.addEventListener("keydown",g=>{l.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(l.commitKey=3),m===-1)return;const{value:y}=g.target;l.lastCommittedValue!==y&&(l.lastCommittedValue=y,l.userValue=y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,n.addEventListener("blur",g=>{if(!l.focused||!g.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{target:m}=g;let{value:y}=m;if(h){if(y&&u==="time"){const _=y.split(":").map(w=>parseInt(w,10));y=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),m.step=""}else y.includes("T")||(y=`${y}T00:00`),y=new Date(y).valueOf();m.type="text"}l.userValue=y,l.lastCommittedValue!==y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:l.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),p(g)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",g=>{l.lastCommittedValue=null;const{data:m,target:y}=g,{value:_,selectionStart:w,selectionEnd:A}=y;let S=w,b=A;switch(g.inputType){case"deleteWordBackward":{const x=_.substring(0,w).match(/\w*[^\w]*$/);x&&(S-=x[0].length);break}case"deleteWordForward":{const x=_.substring(w).match(/^[^\w]*\w*/);x&&(b+=x[0].length);break}case"deleteContentBackward":w===A&&(S-=1);break;case"deleteContentForward":w===A&&(b+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:m||"",willCommit:!1,selStart:S,selEnd:b}})}),this._setEventListeners(n,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&n.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class R1 extends Us{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class D1 extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Bs.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,n)){const u=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=u),e.setValue(c.id,{value:u})}e.setValue(n,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Og extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Bs.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,n))e.setValue(c.id,{value:!1});e.setValue(n,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const u=o===c.detail.value;for(const d of this._getElementsByName(c.target.name)){const h=u&&d.id===n;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class I1 extends nu{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class O1 extends Us{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Bs.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const h of i.options)h.selected=h.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:h,multiple:f}=i;return f?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]};let l=a(!1);const c=u=>{const d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const d={value(h){o?.();const f=h.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const g of i.options)g.selected=p.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(h){i.multiple=!0},remove(h){const f=i.options,p=h.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,m=>m.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(h){const{index:f,displayValue:p,exportValue:g}=h.detail.insert,m=i.children[f],y=document.createElement("option");y.textContent=p,y.value=g,m?m.before(y):i.append(y),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},items(h){const{items:f}=h.detail;for(;i.length!==0;)i.remove(0);for(const p of f){const{displayValue:g,exportValue:m}=p,y=document.createElement("option");y.textContent=g,y.value=m,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){const f=new Set(h.detail.indices);for(const p of h.target.options)p.selected=f.has(p.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{const d=a(!0),h=a(!1);e.setValue(t,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class ec extends et{constructor(e){const{data:t,elements:n,parent:i}=e,r=!!i._commentManager;if(super(e,{isRenderable:!r&&et._hasPopupData(t)}),this.elements=n,r&&et._hasPopupData(t)){const o=this.popup=this.#e();for(const a of n)a.popup=o}else this.popup=null}#e(){return new L1({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${Wc}${i}`).join(",")),this.container}}class L1{#e=null;#t=this.#V.bind(this);#s=this.#$.bind(this);#n=this.#I.bind(this);#o=this.#_.bind(this);#i=null;#r=null;#a=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#b=null;#v=null;#C=null;#x=null;#w=null;#T=!1;#A=null;#S=null;constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d,commentManager:h=null}){this.#r=e,this.#x=i,this.#a=o,this.#C=a,this.#h=l,this.#i=t,this.#v=c,this.#d=u,this.#l=n,this.#e=h,this.#A=n[0],this.#c=Gl.toDateObject(r),this.trigger=n.flatMap(f=>f.getElementsToTriggerPopup()),h?this.renderCommentButton():(this.#M(),this.#r.hidden=!0,d&&this.#_())}#M(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#o,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#P(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#P(),!this.#y))return;const{signal:e}=this.#p=new AbortController,t=!!this.#A.extraPopupElement,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},r=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#g=this.#A.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=this.#g=document.createElement("button");o.className="annotationCommentButton";const a=this.#A.container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#k(),o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),a.after(o)}}#k(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.renderCommentButton();const[e,t]=this.#y,{style:n}=this.#g;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#B(){this.#A.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#A.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:r}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:r}}get elementBeforePopup(){return this.#g}get comment(){return this.#S||=this.#A.commentText,this.#S}set comment(e){e!==this.comment&&(this.#A.commentText=this.#S=e)}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#g&&(this.#g.classList.toggle("selected",e),this.#g.ariaExpanded=t)}setSelectedCommentButton(e){this.#g.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:n}=this.#g.getBoundingClientRect(),{x:i,y:r,width:o,height:a}=this.#A.layer.getBoundingClientRect();return[(e-i)/o,(t+n-r)/a]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#b||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:r,y:o,width:a,height:l}=i;this.#e.showDialog(null,this,r+t*a,o+n*l,{...e,parentDimensions:i})}render(){if(this.#m)return;const e=this.#m=document.createElement("div");if(e.className="popup",this.#i){const n=e.style.outlineColor=de.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#x?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#x}if(e.append(t),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),t.append(n)}pg({html:this.#D||this.#a.str,dir:this.#a?.dir,className:"popupContent"},e),this.#r.append(e)}get#D(){const e=this.#C,t=this.#a;return e?.str&&(!t?.str||t.str===e.str)&&this.#C.html||null}get#O(){return this.#D?.attributes?.style?.fontSize||0}get#N(){return this.#D?.attributes?.style?.color||null}#L(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#N,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return n}#V(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#S=null):t&&(t.deleted?this.remove():(this.#B(),this.#S=t.text)),e&&(this.#y=null,this.#P(),this.#k());return}if(n||t?.deleted){this.remove();return}this.#M(),this.#w||={contentsObj:this.#a,richText:this.#C},e&&(this.#u=null),t&&t.text&&(this.#C=this.#L(t.text),this.#c=Gl.toDateObject(t.date),this.#a=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#w&&({contentsObj:this.#a,richText:this.#C}=this.#w,this.#w=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#E(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=this.#h;let o=!!this.#d,a=o?this.#d:this.#v;for(const p of this.#l)if(!a||de.intersect(p.data.rect,a)!==null){a=p.data.rect,o=!0;break}const l=de.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,h=l[1];this.#u=[100*(d-i)/t,100*(h-r)/n];const{style:f}=this.#r;f.left=`${this.#u[0]}%`,f.top=`${this.#u[1]}%`}#_(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#I(),this.#r.addEventListener("click",this.#o),this.#r.addEventListener("keydown",this.#t)):(this.#$(),this.#r.removeEventListener("click",this.#o),this.#r.removeEventListener("keydown",this.#t))}#I(){this.#m||this.render(),this.isVisible?this.#f&&this.#r.classList.add("focused"):(this.#E(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#$(){this.#r.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#r.hidden=!0)}maybeShow(){this.#e||(this.#M(),this.#T&&(this.#m||this.#I(),this.#T=!1,this.#r.hidden=!1))}get isVisible(){return this.#e?!1:this.#r.hidden===!1}}class Lg extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ee.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class F1 extends et{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=this.#e=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class B1 extends et{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",t-r),o.setAttribute("height",n-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class N1 extends et{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",n/2),o.setAttribute("rx",t/2-r/2),o.setAttribute("ry",n/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Fg extends et{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:r,height:o}=this;if(!t)return this.container;const a=this.svgFactory.create(r,o,!0);let l=[];for(let u=0,d=t.length;u<d;u+=2){const h=t[u]-e[0],f=e[3]-t[u+1];l.push(`${h},${f}`)}l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",n.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class $1 extends Fg{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class q1 extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class su extends et{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ee.HIGHLIGHT:Ee.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:r}}=this,{transform:o,width:a,height:l}=this.#s(t,e),c=this.svgFactory.create(a,l,!0),u=this.#e=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let d=0,h=n.length;d<h;d++){const f=this.svgFactory.createElement(this.svgElementName);this.#t.push(f),f.setAttribute("points",n[d].join(",")),u.append(f)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,r=this.#e;if(t>=0&&r.setAttribute("stroke-width",t||1),n)for(let o=0,a=this.#t.length;o<a;o++)this.#t[o].setAttribute("points",n[o].join(","));if(i){const{transform:o,width:a,height:l}=this.#s(this.data.rotation,i);r.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Bg extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ee.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class H1 extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class j1 extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class U1 extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class Ng extends et{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ee.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class V1 extends et{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:i}=yt.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(i?r.metaKey:r.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class iu{#e=null;#t=null;#s=null;#n=new Map;#o=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a,commentManager:l,linkService:c,annotationStorage:u}){this.div=e,this.#e=t,this.#t=n,this.#o=a||null,this.#i=c||null,this.#s=u||new Jc,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return this.#n.size>0}async#r(e,t,n){const i=e.firstChild||e,r=i.id=`${Wc}${t}`,o=await this.#o?.getAriaAttributes(r);if(o)for(const[a,l]of o)i.setAttribute(a,l);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,n=this.div;Fs(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Lo,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const a=o.annotationType===at.POPUP;if(a){const u=i.get(o.id);if(!u)continue;r.elements=u}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;r.data=o;const l=uh.create(r);if(!l.isRenderable)continue;if(!a&&o.popupRef){const u=i.get(o.popupRef);u?u.push(l):i.set(o.popupRef,[l])}const c=l.render();o.hidden&&(c.style.visibility="hidden"),await this.#r(c,o.id,r.elements),l.extraPopupElement?.popup?.renderCommentButton(),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#a()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new Lo,parent:this};for(const n of e){n.borderStyle||=iu._defaultBorderStyle,t.data=n;const i=uh.create(t);if(!i.isRenderable)continue;const r=i.render();await this.#r(r,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Fs(t,{rotation:e.rotation}),this.#a(),t.hidden=!1}#a(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n);const o=this.#n.get(t);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),o._hasNoCanvas=!1):o.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,r=new P1({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),o=r.render();return t.append(o),this.#e?.moveElementInDOM(t,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return Te(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ei.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const io=/\r\n?|\n/g;class ut extends pe{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=ut.prototype,t=r=>r.isEmpty(),n=bs.TRANSLATE_SMALL,i=bs.TRANSLATE_BIG;return Te(this,"_keyboardManager",new Or([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Ee.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||ut._defaultColor||pe._defaultLineColor,this.#n=e.fontSize||ut._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){pe.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case De.FREETEXT_SIZE:ut._defaultFontSize=t;break;case De.FREETEXT_COLOR:ut._defaultColor=t;break}}updateParams(e,t){switch(e){case De.FREETEXT_SIZE:this.#o(t);break;case De.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[De.FREETEXT_SIZE,ut._defaultFontSize],[De.FREETEXT_COLOR,ut._defaultColor||pe._defaultLineColor]]}get propertiesToUpdate(){return[[De.FREETEXT_SIZE,this.#n],[De.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new br(this),[["colorPicker",this._colorPicker]]}get colorType(){return De.FREETEXT_COLOR}#o(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#a()},n=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-ut._internalPadding*e,-(ut._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(ut.#c(n)),t=n);return e.join(`
`)}#a(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:r}=this,o=r.style.display,a=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",i.div.append(this.div),n=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#r().trimEnd();if(e===t)return;const n=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#a()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#a()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){ut._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[c,u]=this.pageDimensions,[d,h]=this.pageTranslation;let f,p;switch(this.rotation){case 0:f=e+(o[0]-d)/c,p=t+this.height-(o[1]-h)/u;break;case 90:f=e+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=e-this.width+(o[0]-d)/c,p=t-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=e+(o[0]-d-this.height*u)/c,p=t+(o[1]-h-this.width*c)/u,[a,l]=[-l,a];break}this.setAt(f*i,p*r,a,l)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(io,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const i=ut.#d(t.getData("text")||"").replaceAll(io,`
`);if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){const f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(io,"")),f!==this.editorDiv){let p=c;for(const g of this.editorDiv.childNodes){if(g===f){p=u;continue}p.push(ut.#c(g))}}c.push(a.nodeValue.slice(0,l).replaceAll(io,""))}else if(a===this.editorDiv){let f=c,p=0;for(const g of this.editorDiv.childNodes)p++===l&&(f=u),f.push(ut.#c(g))}this.#e=`${c.join(`
`)}${i}${u.join(`
`)}`,this.#l();const d=new Range;let h=Math.sumPrecise(c.map(f=>f.length));for(const{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){const p=f.nodeValue.length;if(h<=p){d.setStart(f,h),d.setEnd(f,h);break}h-=p}r.removeAllRanges(),r.addRange(d)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=ut._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof Lg){const{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:u,popupRef:d,richText:h,contentsObj:f,creationDate:p,modificationDate:g},textContent:m,textPosition:y,parent:{page:{pageNumber:_}}}=e;if(!m||m.length===0)return null;i=e={annotationType:Ee.FREETEXT,color:Array.from(a),fontSize:o,value:m.join(`
`),position:y,pageIndex:_-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:d,comment:f?.str||null,richText:h,creationDate:p,modificationDate:g}}const r=await super.deserialize(e,t,n);return r.#n=e.fontSize,r.color=de.makeHexColor(...e.color),r.#e=ut.#d(e.value),r._initialData=i,e.comment&&r.setCommentData(e),r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=pe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((o,a)=>o!==i[a])||e.pageIndex!==r}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const r=document.createElement("div");r.append(i?document.createTextNode(i):document.createElement("br")),t.append(r)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ue{static PRECISION=1e-4;toSVGPath(){ze("Abstract method `toSVGPath` must be implemented.")}get box(){ze("Abstract getter `box` must be implemented.")}serialize(e,t){ze("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,r,o){o||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*i,o[a+1]=n+e[a+1]*r;return o}static _rescaleAndSwap(e,t,n,i,r,o){o||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*i,o[a+1]=n+e[a]*r;return o}static _translate(e,t,n,i){i||=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=n+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,r){switch(r){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,r,o){return[(e+5*n)/6,(t+5*i)/6,(5*n+r)/6,(5*i+o)/6,(n+r)/2,(i+o)/2]}}class Ts{#e;#t=[];#s;#n;#o=[];#i=new Float32Array(18);#r;#a;#c;#l;#h;#d;#f=[];static#m=8;static#p=2;static#u=Ts.#m+Ts.#p;constructor({x:e,y:t},n,i,r,o,a=0){this.#e=n,this.#d=r*i,this.#n=o,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=a,this.#l=Ts.#m*i,this.#c=Ts.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#g(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[n,i,r,o]=this.#e;return[(this.#r+(e[0]-t[0])/2-n)/r,(this.#a+(e[1]-t[1])/2-i)/o,(this.#r+(t[0]-e[0])/2-n)/r,(this.#a+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#r=e,this.#a=t;const[n,i,r,o]=this.#e;let[a,l,c,u]=this.#i.subarray(8,12);const d=e-c,h=t-u,f=Math.hypot(d,h);if(f<this.#c)return!1;const p=f-this.#l,g=p/f,m=g*d,y=g*h;let _=a,w=l;a=c,l=u,c+=m,u+=y,this.#f?.push(e,t);const A=-y/p,S=m/p,b=A*this.#d,x=S*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([c+b,u+x],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([c-b,u-x],16),isNaN(this.#i[6])?(this.#o.length===0&&(this.#i.set([a+b,l+x],2),this.#o.push(NaN,NaN,NaN,NaN,(a+b-n)/r,(l+x-i)/o),this.#i.set([a-b,l-x],14),this.#t.push(NaN,NaN,NaN,NaN,(a-b-n)/r,(l-x-i)/o)),this.#i.set([_,w,a,l,c,u],6),!this.isEmpty()):(this.#i.set([_,w,a,l,c,u],6),Math.abs(Math.atan2(w-l,_-a)-Math.atan2(y,m))<Math.PI/2?([a,l,c,u]=this.#i.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((a+c)/2-n)/r,((l+u)/2-i)/o),[a,l,_,w]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((_+a)/2-n)/r,((w+l)/2-i)/o),!0):([_,w,a,l,c,u]=this.#i.subarray(0,6),this.#o.push(((_+5*a)/6-n)/r,((w+5*l)/6-i)/o,((5*a+c)/6-n)/r,((5*l+u)/6-i)/o,((a+c)/2-n)/r,((l+u)/2-i)/o),[c,u,a,l,_,w]=this.#i.subarray(12,18),this.#t.push(((_+5*a)/6-n)/r,((w+5*l)/6-i)/o,((5*a+c)/6-n)/r,((5*l+u)/6-i)/o,((a+c)/2-n)/r,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#o,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#v(n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(n),n.join(" ")}#y(){const[e,t,n,i]=this.#e,[r,o,a,l]=this.#g();return`M${(this.#i[2]-e)/n} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/n} ${(this.#i[5]-t)/i} L${r} ${o} L${a} ${l} L${(this.#i[16]-e)/n} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/n} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,n,i,r]=this.#e,o=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[l,c,u,d]=this.#g();e.push(`L${(o[0]-t)/i} ${(o[1]-n)/r} L${l} ${c} L${u} ${d} L${(a[0]-t)/i} ${(a[1]-n)/r}`)}newFreeDrawOutline(e,t,n,i,r,o){return new $g(e,t,n,i,r,o)}getOutlines(){const e=this.#o,t=this.#t,n=this.#i,[i,r,o,a]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#f[d]-i)/o,l[d+1]=(this.#f[d+1]-r)/a;if(l[l.length-2]=(this.#r-i)/o,l[l.length-1]=(this.#a-r)/a,isNaN(n[6])&&!this.isEmpty())return this.#C(l);const c=new Float32Array(this.#o.length+24+this.#t.length);let u=e.length;for(let d=0;d<u;d+=2){if(isNaN(e[d])){c[d]=c[d+1]=NaN;continue}c[d]=e[d],c[d+1]=e[d+1]}u=this.#w(c,u);for(let d=t.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2){if(isNaN(t[d+h])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=t[d+h],c[u+1]=t[d+h+1],u+=2}return this.#x(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#h,this.#s,this.#n)}#C(e){const t=this.#i,[n,i,r,o]=this.#e,[a,l,c,u]=this.#g(),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,this.#e,this.#h,this.#s,this.#n)}#x(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#w(e,t){const n=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[r,o,a,l]=this.#e,[c,u,d,h]=this.#g();return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l],t),t+=24}}class $g extends ue{#e;#t=new Float32Array(4);#s;#n;#o;#i;#r;constructor(e,t,n,i,r,o){super(),this.#r=e,this.#o=t,this.#e=n,this.#i=i,this.#s=r,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#a(o);const[a,l,c,u]=this.#t;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u}toSVGPath(){const e=[`M${this.#r[4]} ${this.#r[5]}`];for(let t=6,n=this.#r.length;t<n;t+=6){if(isNaN(this.#r[t])){e.push(`L${this.#r[t+4]} ${this.#r[t+5]}`);continue}e.push(`C${this.#r[t]} ${this.#r[t+1]} ${this.#r[t+2]} ${this.#r[t+3]} ${this.#r[t+4]} ${this.#r[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,i],r){const o=n-e,a=i-t;let l,c;switch(r){case 0:l=ue._rescale(this.#r,e,i,o,-a),c=ue._rescale(this.#o,e,i,o,-a);break;case 90:l=ue._rescaleAndSwap(this.#r,e,t,o,a),c=ue._rescaleAndSwap(this.#o,e,t,o,a);break;case 180:l=ue._rescale(this.#r,n,t,-o,a),c=ue._rescale(this.#o,n,t,-o,a);break;case 270:l=ue._rescaleAndSwap(this.#r,n,i,-o,-a),c=ue._rescaleAndSwap(this.#o,n,i,-o,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#a(e){const t=this.#r;let n=t[4],i=t[5];const r=[n,i,n,i];let o=n,a=i,l=n,c=i;const u=e?Math.max:Math.min,d=new Float32Array(4);for(let f=6,p=t.length;f<p;f+=6){const g=t[f+4],m=t[f+5];isNaN(t[f])?(de.pointBoundingBox(g,m,r),a>m?(o=g,a=m):a===m&&(o=u(o,g)),c<m?(l=g,c=m):c===m&&(l=u(l,g))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,de.bezierBoundingBox(n,i,...t.slice(f,f+6),d),de.rectBoundingBox(d[0],d[1],d[2],d[3],r),a>d[1]?(o=d[0],a=d[1]):a===d[1]&&(o=u(o,d[0])),c<d[3]?(l=d[2],c=d[3]):c===d[3]&&(l=u(l,d[2]))),n=g,i=m}const h=this.#t;h[0]=r[0]-this.#s,h[1]=r[1]-this.#s,h[2]=r[2]-r[0]+2*this.#s,h[3]=r[3]-r[1]+2*this.#s,this.firstPoint=[o,a],this.lastPoint=[l,c]}get box(){return this.#t}newOutliner(e,t,n,i,r,o=0){return new Ts(e,t,n,i,r,o)}getNewOutline(e,t){const[n,i,r,o]=this.#t,[a,l,c,u]=this.#e,d=r*c,h=o*u,f=n*c+a,p=i*u+l,g=this.newOutliner({x:this.#o[0]*d+f,y:this.#o[1]*h+p},this.#e,this.#i,e,this.#n,t??this.#s);for(let m=2;m<this.#o.length;m+=2)g.add({x:this.#o[m]*d+f,y:this.#o[m+1]*h+p});return g.getOutlines()}}class tc{#e;#t;#s;#n=[];#o=[];constructor(e,t=0,n=0,i=!0){const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:m,width:y,height:_}of e){const w=Math.floor((g-t)/o)*o,A=Math.ceil((g+y+t)/o)*o,S=Math.floor((m-t)/o)*o,b=Math.ceil((m+_+t)/o)*o,x=[w,S,b,!0],E=[A,S,b,!1];this.#n.push(x,E),de.rectBoundingBox(w,S,A,b,r)}const a=r[2]-r[0]+2*n,l=r[3]-r[1]+2*n,c=r[0]-n,u=r[1]-n;let d=i?-1/0:1/0,h=1/0;const f=this.#n.at(i?-1:-2),p=[f[0],f[2]];for(const g of this.#n){const[m,y,_,w]=g;!w&&i?y<h?(h=y,d=m):y===h&&(d=Math.max(d,m)):w&&!i&&(y<h?(h=y,d=m):y===h&&(d=Math.min(d,m))),g[0]=(m-c)/a,g[1]=(y-u)/l,g[2]=(_-u)/l}this.#e=new Float32Array([c,u,a,l]),this.#t=[d,h],this.#s=p}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#a(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],n=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),n.add(l),n.add(c)}const i=[];let r;for(;n.size>0;){const o=n.values().next().value;let[a,l,c,u,d]=o;n.delete(o);let h=a,f=l;for(r=[a,c],i.push(r);;){let p;if(n.has(u))p=u;else if(n.has(d))p=d;else break;n.delete(p),[a,l,c,u,d]=p,h!==a&&(r.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}r.push(h,f)}return new z1(i,this.#e,this.#t,this.#s)}#r(e){const t=this.#o;let n=0,i=t.length-1;for(;n<=i;){const r=n+i>>1,o=t[r][0];if(o===e)return r;o<e?n=r+1:i=r-1}return i+1}#a([,e,t]){const n=this.#r(e);this.#o.splice(n,0,[e,t])}#c([,e,t]){const n=this.#r(e);for(let i=n;i<this.#o.length;i++){const[r,o]=this.#o[i];if(r!==e)break;if(r===e&&o===t){this.#o.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[r,o]=this.#o[i];if(r!==e)break;if(r===e&&o===t){this.#o.splice(i,1);return}}}#l(e){const[t,n,i]=e,r=[[t,n,i]],o=this.#r(i);for(let a=0;a<o;a++){const[l,c]=this.#o[a];for(let u=0,d=r.length;u<d;u++){const[,h,f]=r[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)r[u][1]=c;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=l,f>c&&r.push([t,c,f])}}}return r}}class z1 extends ue{#e;#t;constructor(e,t,n,i){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[n,i]=t;e.push(`M${n} ${i}`);for(let r=2;r<t.length;r+=2){const o=t[r],a=t[r+1];o===n?(e.push(`V${a}`),i=a):a===i&&(e.push(`H${o}`),n=o)}e.push("Z")}return e.join(" ")}serialize([e,t,n,i],r){const o=[],a=n-e,l=i-t;for(const c of this.#t){const u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=e+c[d]*a,u[d+1]=i-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class nc extends Ts{newFreeDrawOutline(e,t,n,i,r,o){return new W1(e,t,n,i,r,o)}}class W1 extends $g{newOutliner(e,t,n,i,r,o=0){return new nc(e,t,n,i,r,o)}}class it extends pe{#e=null;#t=0;#s;#n=null;#o=null;#i=null;#r=null;#a=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ee.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=it.prototype;return Te(this,"_keyboardManager",new Or([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||it._defaultColor,this.#g=e.thickness||it._defaultThickness,this.opacity=e.opacity||it._defaultOpacity,this.#s=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#A()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#r=e.focusNode,this.#a=e.focusOffset,this.#b(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new tc(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new tc(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#m=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#g/2+i,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:it.#S(this.#l.box,(d-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:it.#S(this.#i.box,d),path:{d:this.#i.toSVGPath()}})}const[r,o,a,l]=e.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=a,this.height=l;break;case 90:{const[d,h]=this.parentDimensions;this.x=o,this.y=1-r,this.width=a*h/d,this.height=l*d/h;break}case 180:this.x=1-r,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[d,h]=this.parentDimensions;this.x=1-o,this.y=r,this.width=a*h/d,this.height=l*d/h;break}}const{firstPoint:c}=e;this.#f=[(c[0]-r)/a,(c[1]-o)/l];const{lastPoint:u}=this.#i;this.#m=[(u[0]-r)/a,(u[1]-o)/l]}static initialize(e,t){pe.initialize(e,t),it._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case De.HIGHLIGHT_COLOR:it._defaultColor=t;break;case De.HIGHLIGHT_THICKNESS:it._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case De.HIGHLIGHT_COLOR:this.#C(t);break;case De.HIGHLIGHT_THICKNESS:this.#x(t);break}}static get defaultPropertiesToUpdate(){return[[De.HIGHLIGHT_COLOR,it._defaultColor],[De.HIGHLIGHT_THICKNESS,it._defaultThickness]]}get propertiesToUpdate(){return[[De.HIGHLIGHT_COLOR,this.color||it._defaultColor],[De.HIGHLIGHT_THICKNESS,this.#g||it._defaultThickness],[De.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#o?.updateColor(this.color),super.onUpdatedColor()}#C(e){const t=(r,o)=>{this.color=r,this.opacity=o,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,it._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#x(e){const t=this.#g,n=i=>{this.#g=i,this.#w(i)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#o=new tn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#k())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#k())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#A(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#S([e,t,n,i],r){switch(r){case 90:return[1-t-i,e,i,n];case 180:return[1-e-n,1-t-i,n,i];case 270:return[t,1-e-n,i,n]}return[e,t,n,i]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=it.#S(this.#l.box,e)):n=it.#S([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:it.#S(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),gg(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(e){it._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#P(!0);break;case 1:case 3:this.#P(!1);break}}#P(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#r,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#P(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#k(){return this.#d?this.rotation:0}#B(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,r=this.#s,o=new Float32Array(r.length*8);let a=0;for(const{x:l,y:c,width:u,height:d}of r){const h=l*e+n,f=(1-c)*t+i;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*e,o[a+5]=o[a+7]=f-d*t,a+=8}return o}#D(e){return this.#l.serialize(e,this.#k())}static startHighlighting(e,t,{target:n,x:i,y:r}){const{x:o,y:a,width:l,height:c}=n.getBoundingClientRect(),u=new AbortController,d=e.combinedSignal(u),h=f=>{u.abort(),this.#N(e,f)};window.addEventListener("blur",h,{signal:d}),window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("pointerdown",nt,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",on,{signal:d}),n.addEventListener("pointermove",this.#O.bind(this,e),{signal:d}),this._freeHighlight=new nc({x:i,y:r},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#N(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let i=null;if(e instanceof Bg){const{data:{quadPoints:p,rect:g,rotation:m,id:y,color:_,opacity:w,popupRef:A,richText:S,contentsObj:b,creationDate:x,modificationDate:E},parent:{page:{pageNumber:C}}}=e;i=e={annotationType:Ee.HIGHLIGHT,color:Array.from(_),opacity:w,quadPoints:p,boxes:null,pageIndex:C-1,rect:g.slice(0),rotation:m,annotationElementId:y,id:y,deleted:!1,popupRef:A,richText:S,comment:b?.str||null,creationDate:x,modificationDate:E}}else if(e instanceof su){const{data:{inkLists:p,rect:g,rotation:m,id:y,color:_,borderStyle:{rawWidth:w},popupRef:A,richText:S,contentsObj:b,creationDate:x,modificationDate:E},parent:{page:{pageNumber:C}}}=e;i=e={annotationType:Ee.HIGHLIGHT,color:Array.from(_),thickness:w,inkLists:p,boxes:null,pageIndex:C-1,rect:g.slice(0),rotation:m,annotationElementId:y,id:y,deleted:!1,popupRef:A,richText:S,comment:b?.str||null,creationDate:x,modificationDate:E}}const{color:r,quadPoints:o,inkLists:a,opacity:l}=e,c=await super.deserialize(e,t,n);c.color=de.makeHexColor(...r),c.opacity=l||1,a&&(c.#g=e.thickness),c._initialData=i,e.comment&&c.setCommentData(e);const[u,d]=c.pageDimensions,[h,f]=c.pageTranslation;if(o){const p=c.#s=[];for(let g=0;g<o.length;g+=8)p.push({x:(o[g]-h)/u,y:1-(o[g+1]-f)/d,width:(o[g+2]-o[g])/u,height:(o[g+1]-o[g+5])/d});c.#b(),c.#A(),c.rotate(c.rotation)}else if(a){c.#d=!0;const p=a[0],g={x:p[0]-h,y:d-(p[1]-f)},m=new nc(g,[0,0,u,d],1,c.#g/2,!0,.001);for(let w=0,A=p.length;w<A;w+=2)g.x=p[w]-h,g.y=d-(p[w+1]-f),m.add(g);const{id:y,clipPathId:_}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:m.toSVGPath()}},!0,!0);c.#v({highlightOutlines:m.getOutlines(),highlightId:y,clipPathId:_}),c.#A(),c.rotate(c.parentRotation)}return c}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=pe._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#g,quadPoints:this.#B(),outlines:this.#D(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#L(n)?null:(n.id=this.annotationElementId,n)}#L(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,i)=>n!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class qg{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){ze("Not implemented")}}class be extends pe{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#o=null;static#i=NaN;static#r=null;static#a=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(be._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,r]of Object.entries(t))n.has(i)?Object.assign(e[i],r):e[i]=r;return e}static getDefaultDrawingOptions(e){ze("Not implemented")}static get typesMap(){ze("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(be.#s.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,r=i[t],o=a=>{i.updateProperty(t,a);const l=this.#e.updateProperty(t,a);l&&this.#u(l),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,n),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#m([e,t,n,i]){const{parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[t,1-e,n*(o/r),i*(r/o)];case 180:return[1-e,1-t,n,i];case 270:return[1-t,e,n*(o/r),i*(r/o)];default:return[e,t,n,i]}}#p(){const{x:e,y:t,width:n,height:i,parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(r/o),i*(o/r)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(r/o),i*(o/r)];default:return[e,t,n,i]}}#u(e){[this.x,this.y,this.width,this.height]=this.#m(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:e,y:t,width:n,height:i,rotation:r,parentRotation:o,parentDimensions:[a,l]}=this;switch((r*4+o)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(a/l),i*(l/a),n*(a/l)];case 5:return[1-t,e,n*(a/l),i*(l/a)];case 6:return[1-e-i*(l/a),1-t,i*(l/a),n*(a/l)];case 7:return[t-n*(a/l),1-e-i*(l/a),n*(a/l),i*(l/a)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(l/a),t,i*(l/a),n*(a/l)];case 13:return[1-t-n*(a/l),e-i*(l/a),n*(a/l),i*(l/a)];case 14:return[1-e,1-t-n*(a/l),i*(l/a),n*(a/l)];case 15:return[t,1-e,n*(a/l),i*(l/a)];default:return[e,t,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,be._mergeSVGProperties({bbox:this.#g()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,r){ze("Not implemented")}static startDrawing(e,t,n,i){const{target:r,offsetX:o,offsetY:a,pointerId:l,pointerType:c}=i;if(be.#r&&be.#r!==c)return;const{viewport:{rotation:u}}=e,{width:d,height:h}=r.getBoundingClientRect(),f=be.#n=new AbortController,p=e.combinedSignal(f);if(be.#i||=l,be.#r??=c,window.addEventListener("pointerup",g=>{be.#i===g.pointerId?this._endDraw(g):be.#a?.delete(g.pointerId)},{signal:p}),window.addEventListener("pointercancel",g=>{be.#i===g.pointerId?this._currentParent.endDrawingSession():be.#a?.delete(g.pointerId)},{signal:p}),window.addEventListener("pointerdown",g=>{be.#r===g.pointerType&&((be.#a||=new Set).add(g.pointerId),be.#s.isCancellable()&&(be.#s.removeLastElement(),be.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",on,{signal:p}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:p}),r.addEventListener("touchmove",g=>{g.timeStamp===be.#c&&nt(g)},{signal:p}),e.toggleDrawing(),t._editorUndoBar?.hide(),be.#s){e.drawLayer.updateProperties(this._currentDrawId,be.#s.startNew(o,a,d,h,u));return}t.updateUIForDefaultProperties(this),be.#s=this.createDrawerInstance(o,a,d,h,u),be.#o=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(be.#o.toSVGProperties(),be.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(be.#c=-1,!be.#s)return;const{offsetX:t,offsetY:n,pointerId:i}=e;if(be.#i===i){if(be.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,be.#s.add(t,n)),be.#c=e.timeStamp,nt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,be.#s=null,be.#o=null,be.#r=null,be.#c=NaN),be.#n&&(be.#n.abort(),be.#n=null,be.#i=NaN,be.#a=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,be.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=be.#s,i=this._currentDrawId,r=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,n.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:De.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(De.DRAW_STEP),!be.#s.isEmpty()){const{pageDimensions:[n,i],scale:r}=t,o=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:be.#s.getOutlines(n*r,i*r,r,this._INNER_MARGIN),drawingOptions:be.#o,mustBeCommitted:!e});return this._cleanup(!0),o}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,r,o){ze("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:a}}=t.viewport,l=this.deserializeDraw(o,a,i,r,this._INNER_MARGIN,e),c=await super.deserialize(e,t,n);return c.createDrawingOptions(e),c.#l({drawOutlines:l}),c.#f(),c.onScaleChanging(),c.rotate(),c}serializeDraw(e){const[t,n]=this.pageTranslation,[i,r]=this.pageDimensions;return this.#e.serialize([t,n,i,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class G1{#e=new Float64Array(6);#t;#s;#n;#o;#i;#r="";#a=0;#c=new Fr;#l;#h;constructor(e,t,n,i,r,o){this.#l=n,this.#h=i,this.#n=r,this.#o=o,[e,t]=this.#d(e,t);const a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#s=[{line:a,points:this.#i}],this.#e.set(a,0)}updateProperty(e,t){e==="stroke-width"&&(this.#o=t)}#d(e,t){return ue._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,i,r,o]=this.#e.subarray(2,6),a=e-r,l=t-o;return Math.hypot(this.#l*a,this.#h*l)<=2?null:(this.#i.push(e,t),isNaN(n)?(this.#e.set([r,o,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,i,r,o,e,t],0),this.#t.push(...ue.createBezierPoints(n,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,r){this.#l=n,this.#h=i,this.#n=r,[e,t]=this.#d(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const a=this.#s.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#s.push({line:o,points:this.#i}),this.#e.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#i=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#r="";for(let e=0,t=this.#s.length;e<t;e++){const{line:n,points:i}=this.#s[e];this.#t=n,this.#i=i,this.#a=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const e=ue.svgRound(this.#t[4]),t=ue.svgRound(this.#t[5]);if(this.#i.length===2)return this.#r=`${this.#r} M ${e} ${t} Z`,this.#r;if(this.#i.length<=6){const i=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,i)} M ${e} ${t}`,this.#a=6}if(this.#i.length===4){const i=ue.svgRound(this.#t[10]),r=ue.svgRound(this.#t[11]);return this.#r=`${this.#r} L ${i} ${r}`,this.#a=12,this.#r}const n=[];this.#a===0&&(n.push(`M ${e} ${t}`),this.#a=6);for(let i=this.#a,r=this.#t.length;i<r;i+=6){const[o,a,l,c,u,d]=this.#t.slice(i,i+6).map(ue.svgRound);n.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return this.#r+=n.join(" "),this.#a=this.#t.length,this.#r}getOutlines(e,t,n,i){const r=this.#s.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#c.build(this.#s,e,t,n,this.#n,this.#o,i),this.#e=null,this.#t=null,this.#s=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Fr extends ue{#e;#t=0;#s;#n;#o;#i;#r;#a;#c;build(e,t,n,i,r,o,a){this.#o=t,this.#i=n,this.#r=i,this.#a=r,this.#c=o,this.#s=a??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${ue.svgRound(t[4])} ${ue.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${ue.svgRound(t[10])} ${ue.svgRound(t[11])}`);continue}for(let n=6,i=t.length;n<i;n+=6){const[r,o,a,l,c,u]=t.subarray(n,n+6).map(ue.svgRound);e.push(`C${r} ${o} ${a} ${l} ${c} ${u}`)}}return e.join("")}serialize([e,t,n,i],r){const o=[],a=[],[l,c,u,d]=this.#h();let h,f,p,g,m,y,_,w,A;switch(this.#a){case 0:A=ue._rescale,h=e,f=t+i,p=n,g=-i,m=e+l*n,y=t+(1-c-d)*i,_=e+(l+u)*n,w=t+(1-c)*i;break;case 90:A=ue._rescaleAndSwap,h=e,f=t,p=n,g=i,m=e+c*n,y=t+l*i,_=e+(c+d)*n,w=t+(l+u)*i;break;case 180:A=ue._rescale,h=e+n,f=t,p=-n,g=i,m=e+(1-l-u)*n,y=t+c*i,_=e+(1-l)*n,w=t+(c+d)*i;break;case 270:A=ue._rescaleAndSwap,h=e+n,f=t+i,p=-n,g=-i,m=e+(1-c-d)*n,y=t+(1-l-u)*i,_=e+(1-c)*n,w=t+(1-l)*i;break}for(const{line:S,points:b}of this.#n)o.push(A(S,h,f,p,g,r?new Array(S.length):null)),a.push(A(b,h,f,p,g,r?new Array(b.length):null));return{lines:o,points:a,rect:[m,y,_,w]}}static deserialize(e,t,n,i,r,{paths:{lines:o,points:a},rotation:l,thickness:c}){const u=[];let d,h,f,p,g;switch(l){case 0:g=ue._rescale,d=-e/n,h=t/i+1,f=1/n,p=-1/i;break;case 90:g=ue._rescaleAndSwap,d=-t/i,h=-e/n,f=1/i,p=1/n;break;case 180:g=ue._rescale,d=e/n+1,h=-t/i,f=-1/n,p=1/i;break;case 270:g=ue._rescaleAndSwap,d=t/i+1,h=e/n+1,f=-1/i,p=-1/n;break}if(!o){o=[];for(const y of a){const _=y.length;if(_===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(_===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const w=new Float32Array(3*(_-2));o.push(w);let[A,S,b,x]=y.subarray(0,4);w.set([NaN,NaN,NaN,NaN,A,S],0);for(let E=4;E<_;E+=2){const C=y[E],M=y[E+1];w.set(ue.createBezierPoints(A,S,b,x,C,M),(E-2)*3),[A,S,b,x]=[b,x,C,M]}}}for(let y=0,_=o.length;y<_;y++)u.push({line:g(o[y].map(w=>w??NaN),d,h,f,p),points:g(a[y].map(w=>w??NaN),d,h,f,p)});const m=new this.prototype.constructor;return m.build(u,n,i,1,l,c,r),m}#l(e=this.#c){const t=this.#s+e/2*this.#r;return this.#a%180===0?[t/this.#o,t/this.#i]:[t/this.#i,t/this.#o]}#h(){const[e,t,n,i]=this.#e,[r,o]=this.#l(0);return[e+r,t+o,n-2*r,i-2*o]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let a=4,l=i.length;a<l;a+=6)de.pointBoundingBox(i[a],i[a+1],e);continue}let r=i[4],o=i[5];for(let a=6,l=i.length;a<l;a+=6){const[c,u,d,h,f,p]=i.subarray(a,a+6);de.bezierBoundingBox(r,o,c,u,d,h,f,p,e),r=f,o=p}}const[t,n]=this.#l();e[0]=Tt(e[0]-t,0,1),e[1]=Tt(e[1]-n,0,1),e[2]=Tt(e[2]+t,0,1),e[3]=Tt(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#c=e;const[i,r]=this.#l(),[o,a]=[i-t,r-n],l=this.#e;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}updateParentDimensions([e,t],n){const[i,r]=this.#l();this.#o=e,this.#i=t,this.#r=n;const[o,a]=this.#l(),l=o-i,c=a-r,u=this.#e;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ue.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(e)} ${ue.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,i=0,r=0,o=0,a=0,l=0;switch(this.#t){case 90:i=t/e,r=-e/t,a=e;break;case 180:n=-1,o=-1,a=e,l=t;break;case 270:i=-t/e,r=e/t,l=t;break;default:return""}return`matrix(${n} ${i} ${r} ${o} ${ue.svgRound(a)} ${ue.svgRound(l)})`}getPathResizingSVGProperties([e,t,n,i]){const[r,o]=this.#l(),[a,l,c,u]=this.#e;if(Math.abs(c-r)<=ue.PRECISION||Math.abs(u-o)<=ue.PRECISION){const g=e+n/2-(a+c/2),m=t+i/2-(l+u/2);return{path:{"transform-origin":`${ue.svgRound(e)} ${ue.svgRound(t)}`,transform:`${this.rotationTransform} translate(${g} ${m})`}}}const d=(n-2*r)/(c-2*r),h=(i-2*o)/(u-2*o),f=c/n,p=u/i;return{path:{"transform-origin":`${ue.svgRound(a)} ${ue.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${p}) translate(${ue.svgRound(r)} ${ue.svgRound(o)}) scale(${d} ${h}) translate(${ue.svgRound(-r)} ${ue.svgRound(-o)})`}}}getPathResizedSVGProperties([e,t,n,i]){const[r,o]=this.#l(),a=this.#e,[l,c,u,d]=a;if(a[0]=e,a[1]=t,a[2]=n,a[3]=i,Math.abs(u-r)<=ue.PRECISION||Math.abs(d-o)<=ue.PRECISION){const m=e+n/2-(l+u/2),y=t+i/2-(c+d/2);for(const{line:_,points:w}of this.#n)ue._translate(_,m,y,_),ue._translate(w,m,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(e)} ${ue.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(n-2*r)/(u-2*r),f=(i-2*o)/(d-2*o),p=-h*(l+r)+e+r,g=-f*(c+o)+t+o;if(h!==1||f!==1||p!==0||g!==0)for(const{line:m,points:y}of this.#n)ue._rescale(m,p,g,h,f,m),ue._rescale(y,p,g,h,f,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(e)} ${ue.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[i,r]=n,o=this.#e,a=e-o[0],l=t-o[1];if(this.#o===i&&this.#i===r)for(const{line:c,points:u}of this.#n)ue._translate(c,a,l,c),ue._translate(u,a,l,u);else{const c=this.#o/i,u=this.#i/r;this.#o=i,this.#i=r;for(const{line:d,points:h}of this.#n)ue._rescale(d,a,l,c,u,d),ue._rescale(h,a,l,c,u,h);o[2]*=c,o[3]*=u}return o[0]=e,o[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ue.svgRound(e)} ${ue.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ue.svgRound(e[0])} ${ue.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class va extends qg{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:pe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new va(this._viewParameters);return e.updateAll(this),e}}class ru extends be{static _type="ink";static _editorType=Ee.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){pe.initialize(e,t),this._defaultDrawingOptions=new va(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Te(this,"typesMap",new Map([[De.INK_THICKNESS,"stroke-width"],[De.INK_COLOR,"stroke"],[De.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,r){return new G1(e,t,n,i,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,r,o){return Fr.deserialize(e,t,n,i,r,o)}static async deserialize(e,t,n){let i=null;if(e instanceof su){const{data:{inkLists:o,rect:a,rotation:l,id:c,color:u,opacity:d,borderStyle:{rawWidth:h},popupRef:f,richText:p,contentsObj:g,creationDate:m,modificationDate:y},parent:{page:{pageNumber:_}}}=e;i=e={annotationType:Ee.INK,color:Array.from(u),thickness:h,opacity:d,paths:{points:o},boxes:null,pageIndex:_-1,rect:a.slice(0),rotation:l,annotationElementId:c,id:c,deleted:!1,popupRef:f,richText:p,comment:g?.str||null,creationDate:m,modificationDate:y}}const r=await super.deserialize(e,t,n);return r._initialData=i,e.comment&&r.setCommentData(e),r}get toolbarButtons(){return this._colorPicker||=new br(this),[["colorPicker",this._colorPicker]]}get colorType(){return De.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=ru.getDefaultDrawingOptions({stroke:de.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":r,"stroke-width":o}}=this,a=Object.assign(super.serialize(e),{color:pe._colorManager.convert(i),opacity:r,thickness:o,paths:{lines:t,points:n}});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!this.#e(a)?null:(a.id=this.annotationElementId,a)}#e(e){const{color:t,thickness:n,opacity:i,pageIndex:r}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,a)=>o!==t[a])||e.thickness!==n||e.opacity!==i||e.pageIndex!==r}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class sc extends Fr{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const ro=8,$i=3;class ni{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,i,r,o,a){const l=this.#t(n,i,r,o);for(let c=0;c<8;c++){const u=(-c+l-a+16)%8,d=this.#s[2*u],h=this.#s[2*u+1];if(e[(n+d)*t+(i+h)]!==0)return u}return-1}static#o(e,t,n,i,r,o,a){const l=this.#t(n,i,r,o);for(let c=0;c<8;c++){const u=(c+l+a+16)%8,d=this.#s[2*u],h=this.#s[2*u+1];if(e[(n+d)*t+(i+h)]!==0)return u}return-1}static#i(e,t,n,i){const r=e.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=e[u]<=i?1:0;for(let u=1;u<n-1;u++)o[u*t]=o[u*t+t-1]=0;for(let u=0;u<t;u++)o[u]=o[t*n-1-u]=0;let a=1,l;const c=[];for(let u=1;u<n-1;u++){l=1;for(let d=1;d<t-1;d++){const h=u*t+d,f=o[h];if(f===0)continue;let p=u,g=d;if(f===1&&o[h-1]===0)a+=1,g-=1;else if(f>=1&&o[h+1]===0)a+=1,g+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}const m=[d,u],y=g===d+1,_={isHole:y,points:m,id:a,parent:0};c.push(_);let w;for(const O of c)if(O.id===l){w=O;break}w?w.isHole?_.parent=y?w.parent:l:_.parent=y?l:w.parent:_.parent=y?l:0;const A=this.#n(o,t,u,d,p,g,0);if(A===-1){o[h]=-a,o[h]!==1&&(l=Math.abs(o[h]));continue}let S=this.#s[2*A],b=this.#s[2*A+1];const x=u+S,E=d+b;p=x,g=E;let C=u,M=d;for(;;){const O=this.#o(o,t,C,M,p,g,1);S=this.#s[2*O],b=this.#s[2*O+1];const W=C+S,se=M+b;m.push(se,W);const z=C*t+M;if(o[z+1]===0?o[z]=-a:o[z]===1&&(o[z]=a),W===u&&se===d&&C===x&&M===E){o[h]!==1&&(l=Math.abs(o[h]));break}else p=C,g=M,C=W,M=se}}}return c}static#r(e,t,n,i){if(n-t<=4){for(let x=t;x<n-2;x+=2)i.push(e[x],e[x+1]);return}const r=e[t],o=e[t+1],a=e[n-4]-r,l=e[n-3]-o,c=Math.hypot(a,l),u=a/c,d=l/c,h=u*o-d*r,f=l/a,p=1/c,g=Math.atan(f),m=Math.cos(g),y=Math.sin(g),_=p*(Math.abs(m)+Math.abs(y)),w=p*(1-_+_**2),A=Math.max(Math.atan(Math.abs(y+m)*w),Math.atan(Math.abs(y-m)*w));let S=0,b=t;for(let x=t+2;x<n-2;x+=2){const E=Math.abs(h-u*e[x+1]+d*e[x]);E>S&&(b=x,S=E)}S>(c*A)**2?(this.#r(e,t,b+2,i),this.#r(e,b,n,i)):i.push(r,o)}static#a(e){const t=[],n=e.length;return this.#r(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,i,r,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let g=0;g<o;g++){const m=(g-c)**2;for(let y=0;y<o;y++)a[g*o+y]=Math.exp((m+(y-c)**2)/l)}const u=new Float32Array(256),d=-2*r**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/d);const h=e.length,f=new Uint8Array(h),p=new Uint32Array(256);for(let g=0;g<n;g++)for(let m=0;m<t;m++){const y=g*t+m,_=e[y];let w=0,A=0;for(let b=0;b<o;b++){const x=g+b-c;if(!(x<0||x>=n))for(let E=0;E<o;E++){const C=m+E-c;if(C<0||C>=t)continue;const M=e[x*t+C],O=a[b*o+E]*u[Math.abs(M-_)];w+=M*O,A+=O}}const S=f[y]=Math.round(w/A);p[S]++}return[f,p]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,r=1/0;for(let a=0,l=n.length;a<l;a++){const c=n[a]=e[a<<2];i=Math.max(i,c),r=Math.min(r,c)}const o=255/(i-r);for(let a=0,l=n.length;a<l;a++)n[a]=(n[a]-r)*o;return n}static#d(e){let t,n=-1/0,i=-1/0;const r=e.findIndex(l=>l!==0);let o=r,a=r;for(t=r;t<256;t++){const l=e[t];l>n&&(t-o>i&&(i=t-o,a=t-1),n=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:i}=e,{maxDim:r}=this.#e;let o=n,a=i;if(n>r||i>r){let h=n,f=i,p=Math.log2(Math.max(n,i)/r);const g=Math.floor(p);p=p===g?g-1:g;for(let y=0;y<p;y++){o=Math.ceil(h/2),a=Math.ceil(f/2);const _=new OffscreenCanvas(o,a);_.getContext("2d").drawImage(e,0,0,h,f,0,0,o,a),h=o,f=a,e!==t&&e.close(),e=_.transferToImageBitmap()}const m=Math.min(r/o,r/a);o=Math.round(o*m),a=Math.round(a*m)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const u=c.getImageData(0,0,o,a).data;return[this.#h(u),o,a]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},r,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1});const d=200,h=u.font=`${n} ${i} ${d}px ${t}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:g,actualBoundingBoxDescent:m,fontBoundingBoxAscent:y,fontBoundingBoxDescent:_,width:w}=u.measureText(e),A=1.5,S=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,w)*A),b=Math.ceil(Math.max(Math.abs(g)+Math.abs(m)||d,Math.abs(y)+Math.abs(_)||d)*A);c=new OffscreenCanvas(S,b),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,S,b),u.fillStyle="black",u.fillText(e,S*(A-1)/2,b*(3-A)/2);const x=this.#h(u.getImageData(0,0,S,b).data),E=this.#l(x),C=this.#d(E),M=this.#i(x,S,b,C);return this.processDrawnLines({lines:{curves:M,width:S,height:b},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,r){const[o,a,l]=this.#f(e),[c,u]=this.#c(o,a,l,Math.hypot(a,l)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),d=this.#d(u),h=this.#i(c,a,l,d);return this.processDrawnLines({lines:{curves:h,width:a,height:l},pageWidth:t,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:r,mustSmooth:o,areContours:a}){i%180!==0&&([t,n]=[n,t]);const{curves:l,width:c,height:u}=e,d=e.thickness??0,h=[],f=Math.min(t/c,n/u),p=f/t,g=f/n,m=[];for(const{points:_}of l){const w=o?this.#a(_):_;if(!w)continue;m.push(w);const A=w.length,S=new Float32Array(A),b=new Float32Array(3*(A===2?2:A-2));if(h.push({line:b,points:S}),A===2){S[0]=w[0]*p,S[1]=w[1]*g,b.set([NaN,NaN,NaN,NaN,S[0],S[1]],0);continue}let[x,E,C,M]=w;x*=p,E*=g,C*=p,M*=g,S.set([x,E,C,M],0),b.set([NaN,NaN,NaN,NaN,x,E],0);for(let O=4;O<A;O+=2){const W=S[O]=w[O]*p,se=S[O+1]=w[O+1]*g;b.set(ue.createBezierPoints(x,E,C,M,W,se),(O-2)*3),[x,E,C,M]=[C,M,W,se]}}if(h.length===0)return null;const y=a?new sc:new Fr;return y.build(h,t,n,1,i,a?0:d,r),{outline:y,newCurves:m,areContours:a,thickness:d,width:c,height:u}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:r}){let o=1/0,a=-1/0,l=0;for(const w of e){l+=w.length;for(let A=2,S=w.length;A<S;A++){const b=w[A]-w[A-2];o=Math.min(o,b),a=Math.max(a,b)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const u=e.length,d=ro+$i*u,h=new Uint32Array(d);let f=0;h[f++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*u)*c.BYTES_PER_ELEMENT,h[f++]=0,h[f++]=i,h[f++]=r,h[f++]=t?0:1,h[f++]=Math.max(0,Math.floor(n??0)),h[f++]=u,h[f++]=c.BYTES_PER_ELEMENT;for(const w of e)h[f++]=w.length-2,h[f++]=w[0],h[f++]=w[1];const p=new CompressionStream("deflate-raw"),g=p.writable.getWriter();await g.ready,g.write(h);const m=c.prototype.constructor;for(const w of e){const A=new m(w.length-2);for(let S=2,b=w.length;S<b;S++)A[S-2]=w[S]-w[S-2];g.write(A)}g.close();const y=await new Response(p.readable).arrayBuffer(),_=new Uint8Array(y);return hg(_)}static async decompressSignature(e){try{const t=cC(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const w of n)o||=new Uint8Array(new Uint32Array(w.buffer,0,4)[0]),o.set(w,a),a+=w.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const u=l[2],d=l[3],h=l[4]===0,f=l[5],p=l[6],g=l[7],m=[],y=(ro+$i*p)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(g){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(o.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(o.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(o.buffer,y);break}a=0;for(let w=0;w<p;w++){const A=l[$i*w+ro],S=new Float32Array(A+2);m.push(S);for(let b=0;b<$i-1;b++)S[b]=l[$i*w+ro+b+1];for(let b=0;b<A;b++)S[b+2]=S[b]+_[a++]}return{areContours:h,thickness:f,outlines:m,width:u,height:d}}catch(t){return Se(`decompressSignature: ${t}`),null}}}class ou extends qg{constructor(){super(),super.updateProperties({fill:pe._defaultLineColor,"stroke-width":0})}clone(){const e=new ou;return e.updateAll(this),e}}class au extends va{constructor(e){super(e),super.updateProperties({stroke:pe._defaultLineColor,"stroke-width":1})}clone(){const e=new au(this._viewParameters);return e.updateAll(this),e}}class Sn extends be{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=Ee.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){pe.initialize(e,t),this._defaultDrawingOptions=new ou,this._defaultDrawnSignatureOptions=new au(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Te(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:r,areContours:o,description:a,uuid:l,heightInPage:c}=this.#s,{rawDims:{pageWidth:u,pageHeight:d},rotation:h}=this.parent.viewport,f=ni.processDrawnLines({lines:i,pageWidth:u,pageHeight:d,rotation:h,innerMargin:Sn._INNER_MARGIN,mustSmooth:r,areContours:o});this.addSignature(f,c,a,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:r}=this.#s,o=Math.max(i,r),a=ni.processDrawnLines({lines:{curves:e.map(l=>({points:l})),thickness:n,width:i,height:r},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:a.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:r,y:o}=this,{outline:a}=this.#s=e;this.#e=a instanceof sc,this.description=n;let l;this.#e?l=Sn.getDefaultDrawingOptions():(l=Sn._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});const[,c]=this.pageDimensions;let u=t/c;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(),this.x=r,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return ni.process(e,t,n,i,Sn._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return ni.extractContoursFromText(e,t,n,i,r,Sn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return ni.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:Sn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Sn.getDefaultDrawingOptions():(this._drawingOptions=Sn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,r=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(r),e?(r.paths={lines:t,points:n},r.uuid=this.#n,r.isCopy=!0):r.lines=t,this.#t&&(r.accessibilityData={type:"Figure",alt:this.#t}),r}static deserializeDraw(e,t,n,i,r,o){return o.areContours?sc.deserialize(e,t,n,i,r,o):Fr.deserialize(e,t,n,i,r,o)}static async deserialize(e,t,n){const i=await super.deserialize(e,t,n);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class K1 extends pe{#e=null;#t=null;#s=null;#n=null;#o=null;#i="";#r=null;#a=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Ee.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#o=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){pe.initialize(e,t)}static isHandlingMimeForPasting(e){return Kl.includes(e)}static paste(e,t){t.pasteEditor({mode:Ee.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:o}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:r,height:o,channels:i.length/(r*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const l=a.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#o){const n=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Kl.join(",");const t=this._uiManager._signal;this.#s=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#r===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#o||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,i&&(this.#e=i),this.#a=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},e)}#p(){const{div:e}=this;let{width:t,height:n}=this.#e;const[i,r]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,n=this.height*r;else if(t>o*i||n>o*r){const l=Math.min(o*i/t,o*r/n);t*=l,n*=l}this._uiManager.enableWaiting(!1);const a=this.#r=document.createElement("canvas");a.setAttribute("role","img"),this.addContainer(a),this.width=t/i,this.height=n/r,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:i,height:r}=this.#e,o=new Dn;let a=this.#e,l=i,c=r,u=null;if(t){if(i>t||r>t){const b=Math.min(t/i,t/r);l=Math.floor(i*b),c=Math.floor(r*b)}u=document.createElement("canvas");const h=u.width=Math.ceil(l*o.sx),f=u.height=Math.ceil(c*o.sy);this.#l||(a=this.#u(h,f));const p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":gC.isDarkMode&&(g="#8f8f9d",m="#42414d");const y=15,_=y*o.sx,w=y*o.sy,A=new OffscreenCanvas(_*2,w*2),S=A.getContext("2d");S.fillStyle=g,S.fillRect(0,0,_*2,w*2),S.fillStyle=m,S.fillRect(0,0,_,w),S.fillRect(_,w,_,w),p.fillStyle=p.createPattern(A,"repeat"),p.fillRect(0,0,h,f),p.drawImage(a,0,0,a.width,a.height,0,0,h,f)}let d=null;if(n){let h,f;if(o.symmetric&&a.width<e&&a.height<e)h=a.width,f=a.height;else if(a=this.#e,i>e||r>e){const m=Math.min(e/i,e/r);h=Math.floor(i*m),f=Math.floor(r*m),this.#l||(a=this.#u(h,f))}const g=new OffscreenCanvas(h,f).getContext("2d",{willReadFrequently:!0});g.drawImage(a,0,0,a.width,a.height,0,0,h,f),d={width:h,height:f,data:g.getImageData(0,0,h,f).data}}return{canvas:u,width:l,height:c,imageData:d}}#u(e,t){const{width:n,height:i}=this.#e;let r=n,o=i,a=this.#e;for(;r>2*e||o>2*t;){const l=r,c=o;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(r,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,r,o),a=u.transferToImageBitmap()}return a}#g(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,r=new Dn,o=Math.ceil(n*e*r.sx),a=Math.ceil(i*t*r.sy),l=this.#r;if(!l||l.width===o&&l.height===a)return;l.width=o,l.height=a;const c=this.#l?this.#e:this.#u(o,a),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,o,a)}#y(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,i=Math.round(this.width*t*wi.PDF_TO_CSS_UNITS),r=Math.round(this.height*n*wi.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,r);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,r),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let i=null,r=!1;if(e instanceof Ng){const{data:{rect:g,rotation:m,id:y,structParent:_,popupRef:w,richText:A,contentsObj:S,creationDate:b,modificationDate:x},container:E,parent:{page:{pageNumber:C}},canvas:M}=e;let O,W;M?(delete e.canvas,{id:O,bitmap:W}=n.imageManager.getFromCanvas(E.id,M),M.remove()):(r=!0,e._hasNoCanvas=!0);const se=(await t._structTree.getAriaAttributes(`${Wc}${y}`))?.get("aria-label")||"";i=e={annotationType:Ee.STAMP,bitmapId:O,bitmap:W,pageIndex:C-1,rect:g.slice(0),rotation:m,annotationElementId:y,id:y,deleted:!1,accessibilityData:{decorative:!1,altText:se},isSvg:!1,structParent:_,popupRef:w,richText:A,comment:S?.str||null,creationDate:b,modificationDate:x}}const o=await super.deserialize(e,t,n),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:d,accessibilityData:h}=e;r?(n.addMissingCanvas(e.id,o),o.#a=!0):u&&n.imageManager.isValidId(u)?(o.#t=u,l&&(o.#e=l)):o.#n=c,o.#l=d;const[f,p]=o.pageDimensions;return o.width=(a[2]-a[0])/f,o.height=(a[3]-a[1])/p,h&&(o.altTextData=h),o._initialData=i,e.comment&&o.setCommentData(e),o.#h=!!i,o}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const a=this.#b(n);return a.isSame?null:(a.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const o=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const a=t.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#y(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,i=e.pageIndex===t,r=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&r,isSameAltText:r}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Hn{#e;#t=!1;#s=null;#n=null;#o=null;#i=new Map;#r=!1;#a=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([ut,ru,K1,it,Sn].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:u}){const d=[...Hn.#g.values()];if(!Hn._initialized){Hn._initialized=!0;for(const h of d)h.initialize(u,e)}e.registerEditorTypes(d),this.#u=e,this.pageIndex=t,this.div=n,this.#e=r,this.#s=o,this.viewport=c,this.#d=l,this.drawLayer=a,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ee.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case Ee.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ee.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ee.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ee.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of Hn.#g.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#y(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const e=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#s;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#m){this.#m=new AbortController;const n=this.#u.combinedSignal(this.#m);this.#d.div.addEventListener("pointerdown",i=>{const{clientX:o,clientY:a,timeStamp:l}=i,c=this.#p;if(l-c>500){this.#p=l;return}this.#p=-1;const{classList:u}=this.div;u.toggle("getElements",!0);const d=document.elementsFromPoint(o,a);if(u.toggle("getElements",!1),!this.div.contains(d[0]))return;let h;const f=new RegExp(`^${gr}[0-9]+$`);for(const g of d)if(f.test(g.id)){h=g.id;break}if(!h)return;const p=this.#i.get(h);p?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),p.dblclick(i))},{signal:n,capture:!0})}const e=this.#s;if(e){const n=new Map,i=new Map;for(const o of this.#y){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){n.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const r=e.getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(this.#u.isDeletedAnnotationElement(a)){o.updateEdited({deleted:!0});continue}let l=i.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=n.get(a),l&&(this.#u.addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const n of Hn.#g.values())t.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=yt.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),it.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),pe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#o&&(e._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#v(){return Hn.#g.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#C(e){const t=this.#v;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:n,offsetY:i}=this.#x(),r=this.getNextId(),o=this.#C({parent:this,id:r,x:n,y:i,uiManager:this.#u,isCentered:!0,...t});o&&this.add(o)}async deserialize(e){return await Hn.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),r=this.#C({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...n});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,t+i),c=(r+a)/2-e,u=(o+l)/2-t,[d,h]=this.viewport.rotation%180===0?[c,u]:[u,c];return{offsetX:d,offsetY:h}}addNewEditor(e={}){this.createAndAddNewEditor(this.#x(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#r||(this.#r=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#u.getMode();if(n===Ee.STAMP||n===Ee.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Ee.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:t}=yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#r=!0,this.#v?.isDrawer){this.startDrawingSession(e);return}const n=this.#u.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#v.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(e)):null}findNewParent(e,t,n){const i=this.#u.findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Fs(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Fs(this.div,{rotation:n}),t!==n)for(const i of this.#i.values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class ft{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Te(this,"_svgFactory",new Lo)}static#o(e,[t,n,i,r]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`}#i(){const e=ft._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#r(e,t){const n=ft._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=ft._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i}#a(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)}draw(e,t=!1,n=!1){const i=ft.#n++,r=this.#i(),o=ft._svgFactory.createElement("defs");r.append(o);const a=ft._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,a);const c=n?this.#r(o,l):null,u=ft._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(r,e),this.#t.set(i,r),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){const n=ft.#n++,i=this.#i(),r=ft._svgFactory.createElement("defs");i.append(r);const o=ft._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const d=ft._svgFactory.createElement("mask");r.append(d),l=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const h=ft._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const f=ft._svgFactory.createElement("use");d.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=ft._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(n,i),n}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:r,path:o}=t,a=typeof e=="number"?this.#t.get(e):e;if(a){if(n&&this.#a(a,n),i&&ft.#o(a,i),r){const{classList:l}=a;for(const[c,u]of Object.entries(r))l.toggle(c,u)}if(o){const c=a.firstChild.firstChild;this.#a(c,o)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:tc};globalThis.pdfjsLib={AbortException:vs,AnnotationEditorLayer:Hn,AnnotationEditorParamsType:De,AnnotationEditorType:Ee,AnnotationEditorUIManager:bs,AnnotationLayer:iu,AnnotationMode:us,AnnotationType:at,applyOpacity:yC,build:S1,ColorPicker:tn,createValidAbsoluteUrl:lg,CSSConstants:mC,DOMSVGFactory:Lo,DrawLayer:ft,FeatureTest:yt,fetchData:Rr,findContrastColor:vC,getDocument:Mg,getFilenameFromUrl:uC,getPdfFilenameFromUrl:dC,getRGB:Ir,getUuid:dg,getXfaPageViewport:fC,GlobalWorkerOptions:mi,ImageKind:po,InvalidPDFException:Wl,isDataScheme:ga,isPdfFile:Kc,isValidExplicitDest:PC,MathClamp:Tt,noContextMenu:on,normalizeUnicode:aC,OPS:mr,OutputScale:Dn,PasswordResponses:ZS,PDFDataRangeTransport:Rg,PDFDateString:Gl,PDFWorker:vr,PermissionFlag:JS,PixelsPerInch:wi,RenderingCancelledException:Gc,renderRichText:pg,ResponseException:Io,setLayerDimensions:Fs,shadow:Te,SignatureExtractor:ni,stopEvent:nt,SupportedImageMimeTypes:Kl,TextLayer:Ct,TouchManager:ma,updateUrlHash:cg,Util:de,VerbosityLevel:ha,version:x1,XfaLayer:fg};const X1="/jrtech-infra-annotator/assets/pdf.worker-9aISQa3R.mjs";mi.workerSrc=X1;const ba=Er("image",()=>{const s=Q(null),e=Q(new Image),t=async r=>{r.type==="application/pdf"?await i(r):await n(r)},n=r=>new Promise((o,a)=>{const l=new FileReader;l.onload=()=>{s.value=l.result,e.value.src=s.value,e.value.onload=()=>o(),e.value.onerror=a},l.onerror=a,l.readAsDataURL(r)}),i=async r=>{const o=await r.arrayBuffer(),l=await(await Mg({data:o}).promise).getPage(1),c=l.getViewport({scale:2}),u=document.createElement("canvas"),d=u.getContext("2d");u.width=c.width,u.height=c.height,await l.render({canvasContext:d,viewport:c,canvas:u}).promise,s.value=u.toDataURL("image/png"),e.value.src=s.value,await new Promise((h,f)=>{e.value.onload=()=>h(),e.value.onerror=f})};return{uploadedImageUrl:s,image:e,uploadImage:t}}),fs=[{fill:"rgba(34,197,94,0.2)",stroke:"#22c55e",text:"#15803d"},{fill:"rgba(59,130,246,0.2)",stroke:"#3b82f6",text:"#1d4ed8"},{fill:"rgba(168,85,247,0.2)",stroke:"#a855f7",text:"#7c3aed"},{fill:"rgba(234,179,8,0.2)",stroke:"#eab308",text:"#a16207"},{fill:"rgba(239,68,68,0.2)",stroke:"#ef4444",text:"#dc2626"}];function Y1(s,e,t,n){if(!n||t.length<3)return!0;let i=!1;for(let r=0,o=t.length-1;r<t.length;o=r++){const a=t[r].x,l=t[r].y,c=t[o].x,u=t[o].y;l>e!=u>e&&s<(c-a)*(e-l)/(u-l)+a&&(i=!i)}return i}function J1(s,e,t,n){if(!n||t.length<3)return 1e3;let i=1/0;for(let r=0;r<t.length;r++){const o=t[r],a=t[(r+1)%t.length],l=Z1(s,e,o.x,o.y,a.x,a.y);i=Math.min(i,l)}return i}function Z1(s,e,t,n,i,r){const o=i-t,a=r-n,l=Math.hypot(o,a);if(l===0)return Math.hypot(s-t,e-n);const c=Math.max(0,Math.min(1,((s-t)*o+(e-n)*a)/(l*l))),u=t+c*o,d=n+c*a;return Math.hypot(s-u,e-d)}function Q1(s,e,t,n){const i=Math.min(t.x,n.x),r=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y);return s>=i&&s<=r&&e>=o&&e<=a}const As=Er("annotations",()=>{const s=dt({points:[],closed:!1}),e=dt({}),t=G(()=>{if(e.start&&e.end&&e.meters&&e.meters>0){const k=e.end.x-e.start.x,L=e.end.y-e.start.y,Y=Math.hypot(k,L);return Y===0?null:e.meters/Y}return null}),n=dt([]);let i=1;const r=dt([]);let o=1;const a=dt([]);let l=1;const c=dt(new Set),u=dt({active:!1}),d=(k,L)=>k<=3&&L<=2.1?{maxHorizontalDistance:10,maxVerticalDistance:12,maxHorizontalWallDistance:5,maxVerticalWallDistance:6,coverageRadius:Math.max(10,12)/2*1.15}:k>=4&&L<=2.1?{maxHorizontalDistance:12,maxVerticalDistance:14,maxHorizontalWallDistance:6,maxVerticalWallDistance:7,coverageRadius:Math.max(12,14)/2*1.15}:{maxHorizontalDistance:10,maxVerticalDistance:12,maxHorizontalWallDistance:5,maxVerticalWallDistance:6,coverageRadius:Math.max(10,12)/2*1.15},h=k=>{s.points.push(k)},f=()=>{s.closed=!0},p=()=>{s.points.length=0,s.closed=!1},g=(k,L)=>{e.start=k,e.end=L},m=k=>{e.meters=k},y=(k,L,Y,ee,N=3,ie=2.1)=>{const we=n.length%fs.length,Ce=d(N,ie);n.push({id:i++,x:k,y:L,w:Y,h:ee,label:`Zone ${n.length+1}`,ceilingHeight:N,shelfHeight:ie,coverageRadius:Ce.coverageRadius,showCoverage:!1,colorIndex:we})},_=k=>{const L=n.findIndex(Y=>Y.id===k);if(L!==-1){n.splice(L,1);for(let Y=r.length-1;Y>=0;Y--)r[Y].zoneId===k&&r.splice(Y,1)}},w=(k,L)=>{const Y=n.find(ee=>ee.id===k);Y&&(Y.colorIndex=(Y.colorIndex+L+fs.length)%fs.length)},A=(k,L,Y)=>{const ee=n.find(N=>N.id===k);if(ee){ee.ceilingHeight=L,ee.shelfHeight=Y;const N=d(L,Y);ee.coverageRadius=N.coverageRadius}},S=k=>{const L=n.find(Y=>Y.id===k);L&&(L.showCoverage=!L.showCoverage)},b=(k,L,Y)=>{r.push({id:o++,x:k,y:L,label:`A${r.length+1}`,zoneId:Y})},x=k=>{const L=r.findIndex(Y=>Y.id===k);L!==-1&&(r.splice(L,1),c.delete(k))},E=(k,L,Y)=>{const ee=r.find(N=>N.id===k);ee&&(ee.x=L,ee.y=Y)},C=(k,L)=>{a.push({id:l++,start:k,end:L})},M=k=>{const L=a.findIndex(Y=>Y.id===k);L!==-1&&a.splice(L,1)},O=k=>{c.add(k)},W=k=>{c.delete(k)},se=()=>{c.clear()};return{perimeter:s,scaleLine:e,zones:n,antennas:r,measures:a,selectedAntennas:c,selectionBox:u,metersPerPx:t,addPerimeterPoint:h,closePerimeter:f,clearPerimeter:p,setScaleLine:g,setScaleMeters:m,addZone:y,deleteZone:_,changeZoneColor:w,updateZoneParameters:A,toggleZoneCoverage:S,addAntenna:b,deleteAntenna:x,updateAntennaPosition:E,addMeasure:C,deleteMeasure:M,selectAntenna:O,deselectAntenna:W,clearSelection:se,deleteSelectedAntennas:()=>{for(let k=r.length-1;k>=0;k--)c.has(r[k].id)&&r.splice(k,1);se()},populateAntennasInZone:k=>{const L=n.find(Ce=>Ce.id===k);if(!L||!t.value)return;const Y=d(L.ceilingHeight,L.shelfHeight);for(let Ce=r.length-1;Ce>=0;Ce--)r[Ce].zoneId===k&&r.splice(Ce,1);const ee=Y.maxHorizontalDistance*.8/t.value,N=Y.maxVerticalDistance*.8/t.value,ie=L.x+ee/2,we=L.y+N/2;for(let Ce=ie;Ce<L.x+L.w;Ce+=ee)for(let Me=we;Me<L.y+L.h;Me+=N){const D=Math.round(Ce),te=Math.round(Me);if(!Y1(D,te,s.points,s.closed))continue;const Z=J1(D,te,s.points,s.closed),ce=Math.min(Y.maxHorizontalWallDistance,Y.maxVerticalWallDistance)/t.value;if(Z<ce*.5)continue;let Re=!1;const T=Math.min(ee,N)*.7;for(const P of r)if(Math.hypot(D-P.x,te-P.y)<T){Re=!0;break}Re||b(D,te,k)}},exportData:()=>({perimeter:{points:[...s.points],closed:s.closed},scale:{start:e.start,end:e.end,meters:e.meters},zones:[...n],antennas:[...r],measures:[...a]}),importData:k=>{try{if(!k||typeof k!="object")throw new Error("Invalid data format");p(),n.length=0,r.length=0,a.length=0,se();let L=0,Y=0,ee=0;return k.perimeter&&(Array.isArray(k.perimeter.points)&&s.points.push(...k.perimeter.points),k.perimeter.closed&&(s.closed=k.perimeter.closed)),k.scale&&(k.scale.start&&(e.start=k.scale.start),k.scale.end&&(e.end=k.scale.end),k.scale.meters&&(e.meters=k.scale.meters)),Array.isArray(k.zones)&&k.zones.forEach(N=>{N.id&&N.id>L&&(L=N.id),n.push({id:N.id||i++,x:N.x||0,y:N.y||0,w:N.w||100,h:N.h||100,label:N.label||`Zone ${n.length+1}`,ceilingHeight:N.ceilingHeight||3,shelfHeight:N.shelfHeight||2.1,coverageRadius:N.coverageRadius||6,showCoverage:N.showCoverage||!1,colorIndex:N.colorIndex||0})}),Array.isArray(k.antennas)&&k.antennas.forEach(N=>{N.id&&N.id>Y&&(Y=N.id),r.push({id:N.id||o++,x:N.x||0,y:N.y||0,label:N.label||`A${r.length+1}`,zoneId:N.zoneId})}),Array.isArray(k.measures)&&k.measures.forEach(N=>{N.id&&N.id>ee&&(ee=N.id),a.push({id:N.id||l++,start:N.start||{x:0,y:0},end:N.end||{x:0,y:0}})}),L>=i&&(i=L+1),Y>=o&&(o=Y+1),ee>=l&&(l=ee+1),!0}catch(L){return console.error("Error importing data:",L),!1}},getAntennaPlacementRules:d}}),wa=Er("tools",()=>{const s=Q("perimeter");ba();const e=As(),t=G(()=>[{value:"perimeter",label:"Perimeter",tooltip:"Draw the site boundary",icon:Sd},{value:"scale",label:"Scale",tooltip:"Set map scale",icon:Gx,disabled:e.perimeter.closed===!1},{value:"zone",label:"Zone",tooltip:"Draw coverage zones",icon:Kx,disabled:e.scaleLine.meters===void 0},{value:"antenna",label:"Add Antenna",tooltip:"Place individual antennas",icon:Yp,disabled:e.scaleLine.meters===void 0},{value:"measure",label:"Measure",tooltip:'Measure distances, press "g" to toggle grid snapping',icon:zx,disabled:e.scaleLine.meters===void 0},{value:"select",label:"Select",tooltip:"Select and move antennas",icon:Wx,disabled:e.scaleLine.meters===void 0},{value:"multiselect",label:"Multi-Select",tooltip:"Select multiple antennas",icon:Sd,disabled:e.scaleLine.meters===void 0}]);return{currentTool:s,tools:t,setTool:i=>{s.value=i}}}),eE={class:"flex flex-col gap-3"},tE=V({__name:"ToolSelector",setup(s){const e=wa();return(t,n)=>(F(),Fe("div",eE,[(F(!0),Fe(lt,null,Sr(v(e).tools,i=>(F(),K(v(vA),{key:i.value},{default:I(()=>[B(v(Rx),{"as-child":""},{default:I(()=>[B(v(Bt),{onClick:r=>v(e).setTool(i.value),disabled:i.disabled,class:qt(["inline-flex items-center justify-start gap-3 h-11 px-4 rounded-md text-sm font-medium border shadow-sm cursor-pointer transition-colors",v(e).currentTool===i.value?"bg-accent text-accent-foreground border-accent hover:bg-accent hover:text-accent-foreground":"bg-background text-foreground border-input hover:bg-accent hover:text-accent-foreground"])},{default:I(()=>[(F(),K(vc(i.icon),{class:"w-5 h-5"})),qe(" "+nn(i.label),1)]),_:2},1032,["onClick","disabled","class"])]),_:2},1024),B(v(kx),{side:"right"},{default:I(()=>[qe(nn(i.tooltip),1)]),_:2},1024)]),_:2},1024))),128))]))}}),_a=Er("canvas",()=>{const s=Q(null),e=Q(null),t=Q(0),n=Q(0),i=Q(1),r=1,o=10,a=m=>{s.value=m,e.value=m.getContext("2d")},l=m=>{if(!s.value)return{x:0,y:0};const y=s.value.getBoundingClientRect(),_=s.value.width/y.width,w=s.value.height/y.height,A=(("clientX"in m?m.clientX:m.x)-y.left)*_,S=(("clientY"in m?m.clientY:m.y)-y.top)*w;return{x:(A-t.value)/i.value,y:(S-n.value)/i.value}},c=()=>{e.value&&e.value.setTransform(i.value,0,0,i.value,t.value,n.value)},u=()=>{e.value&&e.value.setTransform(1,0,0,1,0,0)},d=(m,y,_,w)=>{if(!s.value)return;const A=t.value+m,S=n.value+y;if(!_||!w){t.value=A,n.value=S;return}const b=s.value.width,x=s.value.height,E=_*i.value,C=w*i.value;if(E<=b&&C<=x){t.value=(b-E)/2,n.value=(x-C)/2;return}let M,O,W,se;E<=b?M=O=(b-E)/2:(M=0,O=b-E),C<=x?W=se=(x-C)/2:(W=0,se=x-C),t.value=Math.max(O,Math.min(M,A)),n.value=Math.max(se,Math.min(W,S))},h=(m,y)=>{d(0,0,m,y)};return{canvasRef:s,ctx:e,panX:t,panY:n,zoom:i,initCanvas:a,getCanvasCoords:l,applyTransform:c,resetTransform:u,pan:d,clampPan:h,zoomAt:(m,y,_,w,A)=>{if(!s.value)return;const S=s.value.getBoundingClientRect(),b=s.value.width/S.width,x=s.value.height/S.height,E=m*b,C=y*x,M=(E-t.value)/i.value,O=(C-n.value)/i.value,W=Math.max(r,Math.min(o,i.value*_));W!==i.value&&(i.value=W,t.value=E-M*i.value,n.value=C-O*i.value,w&&A&&h(w,A))},resetView:()=>{t.value=0,n.value=0,i.value=1},fitToView:(m,y)=>{if(!s.value)return;const _=s.value.getBoundingClientRect(),w=40,A=_.width-w*2,S=_.height-w*2,b=A/m,x=S/y;i.value=Math.min(b,x,1),t.value=(_.width*(s.value.width/_.width)-m*i.value)/2,n.value=(_.height*(s.value.height/_.height)-y*i.value)/2}}}),Aa=Er("settings",()=>{const s=Q(!1),e=dt({includePerimeter:!0,includeScale:!0,includeZones:!0,includeAntennas:!0,includeMeasurements:!0}),t=dt({enabled:!0,orthogonalSnapAngle:15,diagonalSnapAngle:10,enableDiagonalSnap:!0});return{openImportExportDialog:s,gridSnap:t,exportOptions:e,updateGridSnapSettings:r=>{Object.assign(t,r)},toggleGridSnap:()=>{t.enabled=!t.enabled}}});function Vs(){const s=_a(),e=Aa(),t=ba(),n=As(),i=wa();let r=!1,o=null,a=null,l=null,c=!1;const u=(b,x,E)=>{r=b,b?(x!==void 0&&(o=x,a=x),E!==void 0&&(a=E)):(o=null,a=null)},d=(b,x=!1)=>{l=b,c=x},h=(b=!1)=>{const x=s.ctx,E=s.canvasRef;!x||!E||(x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,E.width,E.height),s.applyTransform(),t.uploadedImageUrl&&x.drawImage(t.image,0,0),b?[{enabled:e.exportOptions.includePerimeter,fn:f},{enabled:e.exportOptions.includeScale,fn:p},{enabled:e.exportOptions.includeZones,fn:m},{enabled:e.exportOptions.includeAntennas,fn:_},{enabled:e.exportOptions.includeMeasurements,fn:A}].forEach(M=>M.enabled&&M.fn(x)):[f,p,g,m,y,_,w,A,S].forEach(M=>M(x)))},f=b=>{const{points:x,closed:E}=n.perimeter;if(x.length!==0){b.save(),b.lineWidth=3,b.lineJoin="round",b.lineCap="round",b.strokeStyle="#e11d48",b.beginPath(),b.moveTo(x[0].x,x[0].y);for(let C=1;C<x.length;C++)b.lineTo(x[C].x,x[C].y);E&&b.closePath(),b.stroke(),l&&!E&&x.length>0&&(b.setLineDash([4,4]),b.lineWidth=2,b.strokeStyle="#f87171",b.beginPath(),b.moveTo(x[x.length-1].x,x[x.length-1].y),b.lineTo(l.x,l.y),b.stroke(),b.setLineDash([])),x.forEach((C,M)=>{b.beginPath(),b.arc(C.x,C.y,c&&M===0?8:5,0,Math.PI*2),b.fillStyle=c&&M===0?"#fbbf24":"#e11d48",b.fill(),c&&M===0&&(b.strokeStyle="#f59e0b",b.lineWidth=2,b.stroke())}),b.restore()}},p=b=>{const{start:x,end:E,meters:C}=n.scaleLine;if(!x||!E)return;b.save(),b.lineWidth=3,b.strokeStyle="#0ea5e9",b.beginPath(),b.moveTo(x.x,x.y),b.lineTo(E.x,E.y),b.stroke(),b.fillStyle="#0ea5e9",b.font="14px sans-serif";const M=Math.hypot(E.x-x.x,E.y-x.y),O=C?`${C} m`:"? m";b.fillText(`${M.toFixed(1)} px = ${O}`,(x.x+E.x)/2+6,(x.y+E.y)/2-6),b.restore()},g=b=>{if(!r||!o||!a||i.currentTool!=="scale")return;b.save(),b.setLineDash([6,4]),b.lineWidth=2,b.strokeStyle="#60a5fa",b.beginPath(),b.moveTo(o.x,o.y),b.lineTo(a.x,a.y),b.stroke(),b.fillStyle="#60a5fa",b.font="13px sans-serif";const x=Math.hypot(a.x-o.x,a.y-o.y);b.fillText(`${x.toFixed(1)} px`,(o.x+a.x)/2+6,(o.y+a.y)/2-6),b.restore()},m=b=>{n.zones.forEach(x=>{const E=fs[x.colorIndex];if(b.save(),n.perimeter.closed&&n.perimeter.points.length>=3){b.beginPath(),b.moveTo(n.perimeter.points[0].x,n.perimeter.points[0].y);for(let C=1;C<n.perimeter.points.length;C++)b.lineTo(n.perimeter.points[C].x,n.perimeter.points[C].y);b.closePath(),b.clip()}if(b.lineWidth=2,b.strokeStyle=E.stroke,b.strokeRect(x.x,x.y,x.w,x.h),b.fillStyle=E.fill,b.fillRect(x.x,x.y,x.w,x.h),b.restore(),b.save(),b.fillStyle=E.text,b.font="13px sans-serif",b.fillText(`${x.label}`,x.x+6,x.y+16),x.showCoverage&&n.metersPerPx!==null){const C=n.antennas.filter(M=>M.zoneId===x.id);C.length>0&&(b.fillStyle="rgba(59,130,246,0.12)",b.strokeStyle="rgba(59,130,246,0.5)",b.lineWidth=1,C.forEach(M=>{const O=x.coverageRadius/n.metersPerPx;b.beginPath(),b.arc(M.x,M.y,O,0,Math.PI*2),b.fill(),b.stroke()}))}b.restore()})},y=b=>{if(!r||!o||!a||i.currentTool!=="zone")return;const x=a.x-o.x,E=a.y-o.y,C=n.zones.length%fs.length,M=fs[C];b.save(),b.setLineDash([6,4]),b.lineWidth=2,b.strokeStyle=M.stroke,b.strokeRect(o.x,o.y,x,E),b.fillStyle=M.fill.replace("0.2)","0.1)"),b.fillRect(o.x,o.y,x,E),b.fillStyle=M.text,b.font="13px sans-serif",b.fillText(`Zone ${n.zones.length+1} (preview)`,o.x+6,o.y+16),b.restore()},_=b=>{n.antennas.forEach(x=>{b.save(),b.beginPath(),b.arc(x.x,x.y,5,0,Math.PI*2);const E=n.selectedAntennas.has(x.id);b.fillStyle=E?"#facc15":"#f97316",b.fill(),b.lineWidth=E?3:1,b.strokeStyle=E?"#eab308":"#7c2d12",b.stroke(),E&&(b.beginPath(),b.arc(x.x,x.y,8,0,Math.PI*2),b.lineWidth=2,b.strokeStyle="#eab308",b.stroke()),b.fillStyle="#111827",b.font="12px sans-serif",x.label&&b.fillText(x.label,x.x+8,x.y+4),b.restore()})},w=b=>{if(i.currentTool==="multiselect"&&n.selectionBox.active&&n.selectionBox.start&&n.selectionBox.end){b.save();const{start:x,end:E}=n.selectionBox,C=E.x-x.x,M=E.y-x.y;b.fillStyle="rgba(59, 130, 246, 0.1)",b.fillRect(x.x,x.y,C,M),b.strokeStyle="#3b82f6",b.lineWidth=2,b.setLineDash([5,5]),b.strokeRect(x.x,x.y,C,M),b.restore()}},A=b=>{n.measures.forEach(x=>{b.save(),b.lineWidth=2,b.strokeStyle="#7c3aed",b.beginPath(),b.moveTo(x.start.x,x.start.y),b.lineTo(x.end.x,x.end.y),b.stroke();const E=x.end.x-x.start.x,C=x.end.y-x.start.y,M=n.metersPerPx?Math.hypot(E,C)*n.metersPerPx:null;b.fillStyle="#7c3aed",b.font="13px sans-serif";const O=M?`M${x.id}: ${M.toFixed(2)} m`:`M${x.id}: ? m`;b.fillText(O,(x.start.x+x.end.x)/2+6,(x.start.y+x.end.y)/2-6),b.restore()})},S=b=>{if(!r||!o||!a||i.currentTool!=="measure")return;b.save(),b.setLineDash([6,4]),b.lineWidth=2,b.strokeStyle="#a78bfa",b.beginPath(),b.moveTo(o.x,o.y),b.lineTo(a.x,a.y),b.stroke();const x=a.x-o.x,E=a.y-o.y,C=n.metersPerPx?Math.hypot(x,E)*n.metersPerPx:null;b.fillStyle="#a78bfa",b.font="13px sans-serif";const M=C?`${C.toFixed(2)} m`:"? m";b.fillText(M,(o.x+a.x)/2+6,(o.y+a.y)/2-6),b.restore()};return{draw:h,setDrawingState:u,setPerimeterPreview:d}}const si=V({__name:"Checkbox",props:{defaultValue:{type:[Boolean,String]},modelValue:{type:[Boolean,String,null]},disabled:{type:Boolean},value:{},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,n=e,i=Zt(t,"class"),r=Jt(i,n);return(o,a)=>(F(),K(v(Yw),ye({"data-slot":"checkbox"},v(r),{class:v(rt)("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t.class)}),{default:I(()=>[B(v(Zw),{"data-slot":"checkbox-indicator",class:"flex items-center justify-center text-current transition-none"},{default:I(()=>[J(o.$slots,"default",{},()=>[B(v(jx),{class:"size-3.5"})])]),_:3})]),_:3},16,["class"]))}}),nE=V({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(s,{emit:e}){const i=Jt(s,e);return(r,o)=>(F(),K(v(Vb),ye({"data-slot":"dialog"},v(i)),{default:I(()=>[J(r.$slots,"default")]),_:3},16))}}),sE=V({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class");return(n,i)=>(F(),K(v(Sw),ye({"data-slot":"dialog-overlay"},v(t),{class:v(rt)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e.class)}),{default:I(()=>[J(n.$slots,"default")]),_:3},16,["class"]))}}),iE=V({__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(s,{emit:e}){const t=s,n=e,i=Zt(t,"class"),r=Jt(i,n);return(o,a)=>(F(),K(v(Tw),null,{default:I(()=>[B(sE),B(v(vw),ye({"data-slot":"dialog-content"},v(r),{class:v(rt)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t.class)}),{default:I(()=>[J(o.$slots,"default"),B(v(Wb),{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:I(()=>[B(v(Xx)),a[0]||(a[0]=ve("span",{class:"sr-only"},"Close",-1))]),_:1,__:[0]})]),_:3},16,["class"])]),_:3}))}}),rE=V({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class"),n=qs(t);return(i,r)=>(F(),K(v(ww),ye({"data-slot":"dialog-description"},v(n),{class:v(rt)("text-muted-foreground text-sm",e.class)}),{default:I(()=>[J(i.$slots,"default")]),_:3},16,["class"]))}}),oE=V({__name:"DialogHeader",props:{class:{}},setup(s){const e=s;return(t,n)=>(F(),Fe("div",{"data-slot":"dialog-header",class:qt(v(rt)("flex flex-col gap-2 text-center sm:text-left",e.class))},[J(t.$slots,"default")],2))}}),aE=V({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class"),n=qs(t);return(i,r)=>(F(),K(v(kw),ye({"data-slot":"dialog-title"},v(n),{class:v(rt)("text-lg leading-none font-semibold",e.class)}),{default:I(()=>[J(i.$slots,"default")]),_:3},16,["class"]))}});function Hg(){const s=new Date,e=t=>t.toString().padStart(2,"0");return`${s.getFullYear()}-${e(s.getMonth()+1)}-${e(s.getDate())}_${e(s.getHours())}-${e(s.getMinutes())}-${e(s.getSeconds())}`}function lE(s){const e=`annotated-map-${Hg()}.png`,t=document.createElement("a");t.download=e,t.href=s.toDataURL("image/png"),t.click()}function cE(s){const e=`annotations-${Hg()}.json`,t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,i.click(),URL.revokeObjectURL(n)}function uE(){return new Promise((s,e)=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=n=>{const i=n.target.files?.[0];if(!i){e(new Error("No file selected"));return}const r=new FileReader;r.onload=o=>{try{const a=JSON.parse(o.target?.result);s(a)}catch{e(new Error("Invalid JSON file"))}},r.onerror=()=>e(new Error("Error reading file")),r.readAsText(i)},t.click()})}const dE={class:"flex items-start gap-6"},hE={class:"flex flex-col space-y-1"},fE={class:"inline-flex items-center"},pE={class:"inline-flex items-center"},gE={class:"inline-flex items-center"},mE={class:"inline-flex items-center"},yE={class:"inline-flex items-center"},vE={class:"flex gap-4"},bE=V({__name:"ImportExportDialog",props:{open:{type:Boolean}},emits:["update:open"],setup(s){const e=Aa(),t=_a(),n=As(),{draw:i}=Vs(),r=()=>{t.canvasRef&&(i(!0),lE(t.canvasRef),i(!1))},o=()=>{const l=n.exportData();cE(l)},a=async()=>{try{const l=await uE();n.importData(l)?(console.log("Data imported successfully"),i()):console.error("Failed to import data")}catch(l){console.error("Import failed:",l)}};return(l,c)=>(F(),K(v(nE),{open:l.open,"onUpdate:open":c[5]||(c[5]=u=>l.$emit("update:open",u))},{default:I(()=>[B(v(iE),{class:"w-[500px]"},{default:I(()=>[B(v(oE),null,{default:I(()=>[B(v(aE),null,{default:I(()=>c[6]||(c[6]=[qe("Import/Export Options",-1)])),_:1,__:[6]}),B(v(rE),null,{default:I(()=>c[7]||(c[7]=[qe(" Choose an option below to import or export data ",-1)])),_:1,__:[7]})]),_:1}),ve("div",dE,[B(v(Bt),{onClick:r,variant:"outline",class:"w-40 justify-start"},{default:I(()=>[B(v(ql),{class:"w-4 h-4 mr-2"}),c[8]||(c[8]=qe(" Export PNG ",-1))]),_:1,__:[8]}),ve("div",hE,[ve("label",fE,[B(v(si),{modelValue:v(e).exportOptions.includePerimeter,"onUpdate:modelValue":c[0]||(c[0]=u=>v(e).exportOptions.includePerimeter=u)},null,8,["modelValue"]),c[9]||(c[9]=ve("span",{class:"ml-2 text-sm"},"Include Perimeter",-1))]),ve("label",pE,[B(v(si),{modelValue:v(e).exportOptions.includeScale,"onUpdate:modelValue":c[1]||(c[1]=u=>v(e).exportOptions.includeScale=u)},null,8,["modelValue"]),c[10]||(c[10]=ve("span",{class:"ml-2 text-sm"},"Include Scale",-1))]),ve("label",gE,[B(v(si),{modelValue:v(e).exportOptions.includeZones,"onUpdate:modelValue":c[2]||(c[2]=u=>v(e).exportOptions.includeZones=u)},null,8,["modelValue"]),c[11]||(c[11]=ve("span",{class:"ml-2 text-sm"},"Include Zones",-1))]),ve("label",mE,[B(v(si),{modelValue:v(e).exportOptions.includeAntennas,"onUpdate:modelValue":c[3]||(c[3]=u=>v(e).exportOptions.includeAntennas=u)},null,8,["modelValue"]),c[12]||(c[12]=ve("span",{class:"ml-2 text-sm"},"Include Antennas",-1))]),ve("label",yE,[B(v(si),{modelValue:v(e).exportOptions.includeMeasurements,"onUpdate:modelValue":c[4]||(c[4]=u=>v(e).exportOptions.includeMeasurements=u)},null,8,["modelValue"]),c[13]||(c[13]=ve("span",{class:"ml-2 text-sm"},"Include Measurements",-1))])])]),B(v(Mo),{class:"my-4"}),ve("div",vE,[B(v(Bt),{onClick:o,variant:"outline",class:"w-40 justify-start"},{default:I(()=>[B(v(ql),{class:"w-4 h-4 mr-2"}),c[14]||(c[14]=qe(" Export JSON ",-1))]),_:1,__:[14]}),B(v(Bt),{onClick:a,variant:"outline",class:"w-40 justify-start"},{default:I(()=>[B(v(jc),{class:"w-4 h-4 mr-2"}),c[15]||(c[15]=qe(" Import JSON ",-1))]),_:1,__:[15]})])]),_:1})]),_:1},8,["open"]))}}),wE={class:"flex h-full flex-col border-r bg-background p-4 gap-4"},_E={class:"flex-1 flex flex-col justify-between"},AE={class:"flex flex-col gap-4"},xE={class:"flex flex-col gap-2"},SE=V({__name:"Sidebar",setup(s){const e=GA(),t=ba(),n=_a(),i=Aa(),{draw:r}=Vs(),o=async a=>{const l=a.target.files?.[0];if(l)try{await t.uploadImage(l),n.canvasRef&&(n.canvasRef.width=t.image.width,n.canvasRef.height=t.image.height,r())}catch(c){console.error("Failed to upload map:",c)}};return(a,l)=>(F(),Fe(lt,null,[B(bE,{open:v(i).openImportExportDialog,"onUpdate:open":l[0]||(l[0]=c=>v(i).openImportExportDialog=c)},null,8,["open"]),ve("aside",wE,[l[10]||(l[10]=ve("div",{class:"flex h-16 items-center border-b px-2"},[ve("h1",{class:"text-xl font-semibold flex items-center gap-2"},[ve("img",{src:Dx,alt:"Logo",class:"h-7 w-7"}),qe(" InfraAnnotator ")])],-1)),ve("div",_E,[ve("div",AE,[B(v(cs),{for:"file-upload",class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 cursor-pointer"},{default:I(()=>[B(v(jc),{class:"w-4 h-4 mr-2"}),qe(" "+nn(v(t).uploadedImageUrl?"Change Map":"Upload Map"),1)]),_:1}),ve("input",{id:"file-upload",type:"file",class:"sr-only",accept:"image/png,image/jpeg, application/pdf",onChange:o},null,32),B(v(Mo),{class:"my-1"}),B(tE)]),ve("div",xE,[B(v(Mo),{class:"my-1"}),B(v(Bt),{onClick:l[1]||(l[1]=c=>v(i).openImportExportDialog=!0),variant:"outline",class:"justify-start"},{default:I(()=>[B(v(ql),{class:"w-4 h-4 mr-2"}),l[5]||(l[5]=qe(" Import/Export ",-1))]),_:1,__:[5]}),B(v(Lx),null,{default:I(()=>[B(v(Jx),{"as-child":""},{default:I(()=>[B(v(Bt),{variant:"outline"},{default:I(()=>[B(v(Bd),{icon:"radix-icons:moon",class:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),B(v(Bd),{icon:"radix-icons:sun",class:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),l[6]||(l[6]=ve("span",{class:"sr-only"},"Toggle theme",-1))]),_:1,__:[6]})]),_:1}),B(v(Yx),{align:"end"},{default:I(()=>[B(v(Ga),{onClick:l[2]||(l[2]=c=>e.value="light")},{default:I(()=>l[7]||(l[7]=[qe(" Light ",-1)])),_:1,__:[7]}),B(v(Ga),{onClick:l[3]||(l[3]=c=>e.value="dark")},{default:I(()=>l[8]||(l[8]=[qe(" Dark ",-1)])),_:1,__:[8]}),B(v(Ga),{onClick:l[4]||(l[4]=c=>e.value="auto")},{default:I(()=>l[9]||(l[9]=[qe(" System ",-1)])),_:1,__:[9]})]),_:1})]),_:1})])])])],64))}});function CE(s,e){return s.addEventListener("wheel",e.onWheel,{passive:!1}),s.addEventListener("pointerdown",e.onPointerDown),s.addEventListener("pointermove",e.onPointerMove),s.addEventListener("pointerup",e.onPointerUp),s.addEventListener("dblclick",e.onDblClick),()=>{s.removeEventListener("wheel",e.onWheel),s.removeEventListener("pointerdown",e.onPointerDown),s.removeEventListener("pointermove",e.onPointerMove),s.removeEventListener("pointerup",e.onPointerUp),s.removeEventListener("dblclick",e.onDblClick)}}function dh(s,e){s.width=e.width,s.height=e.height}class EE{settings;constructor(e){this.settings=e}updateSettings(e){this.settings={...this.settings,...e}}snapLine(e,t,n,i){if(!this.settings.enabled)return{x:n,y:i,snapped:!1};const r=n-e,o=i-t,c=(Math.atan2(o,r)*180/Math.PI%360+360)%360;if(this.isCloseToAngle(c,0,this.settings.orthogonalSnapAngle)||this.isCloseToAngle(c,180,this.settings.orthogonalSnapAngle))return{x:n,y:t,snapped:!0,snapType:"horizontal"};if(this.isCloseToAngle(c,90,this.settings.orthogonalSnapAngle)||this.isCloseToAngle(c,270,this.settings.orthogonalSnapAngle))return{x:e,y:i,snapped:!0,snapType:"vertical"};if(this.settings.enableDiagonalSnap){if(this.isCloseToAngle(c,45,this.settings.diagonalSnapAngle)||this.isCloseToAngle(c,225,this.settings.diagonalSnapAngle)){const u=(Math.abs(r)+Math.abs(o))/2,d=e+u*Math.sign(r),h=t+u*Math.sign(o);return{x:d,y:h,snapped:!0,snapType:"diagonal45"}}if(this.isCloseToAngle(c,135,this.settings.diagonalSnapAngle)||this.isCloseToAngle(c,315,this.settings.diagonalSnapAngle)){const u=(Math.abs(r)+Math.abs(o))/2,d=e+u*Math.sign(r),h=t-u*Math.sign(r);return{x:d,y:h,snapped:!0,snapType:"diagonal135"}}}return{x:n,y:i,snapped:!1}}isCloseToAngle(e,t,n){return Math.min(Math.abs(e-t),Math.abs(e-t+360),Math.abs(e-t-360))<=n}}const TE={class:"flex-1 flex items-center justify-center p-8 bg-muted/40 overflow-hidden"},PE={class:"flex flex-col items-center gap-4 text-center p-10 border-2 border-dashed rounded-xl"},kE={class:"border rounded-lg overflow-hidden shadow-lg bg-background"},ME=V({__name:"MainCanvas",setup(s){const e=Aa(),{gridSnap:t}=Hr(e),n=new EE(t.value);He(t,L=>{n.updateSettings(L)},{deep:!0});const i=Q(null),r=_a(),o=ba(),a=As(),l=wa(),{draw:c,setDrawingState:u,setPerimeterPreview:d}=Vs(),{uploadedImageUrl:h,image:f}=Hr(o),{currentTool:p}=Hr(l),{perimeter:g,antennas:m,selectedAntennas:y,selectionBox:_}=Hr(a);let w=null,A=null,S=null;const b=Q(!1),x=Q(!1);let E=null,C=1;function M(){return b.value?"grabbing":x.value?"grab":"default"}function O(L,Y){for(let ee=m.value.length-1;ee>=0;ee--){const N=m.value[ee];if(Math.hypot(N.x-L,N.y-Y)<8)return ee}return null}function W(L){if(!i.value)return;if(L.button===1||L.button===0&&x.value){L.preventDefault(),b.value=!0,E={x:L.clientX,y:L.clientY,panX:r.panX,panY:r.panY},i.value.setPointerCapture?.(L.pointerId);return}const{x:ee,y:N}=r.getCanvasCoords(L);if(i.value.setPointerCapture?.(L.pointerId),p.value==="perimeter"){if(g.value.points.length>=3){const ie=g.value.points[0];if(Math.hypot(ee-ie.x,N-ie.y)<15){a.closePerimeter(),d(null,!1),c();return}}a.addPerimeterPoint({x:ee,y:N}),c()}else if(p.value==="scale")S={x:ee,y:N},u(!0,{x:ee,y:N});else if(p.value==="zone")S={x:ee,y:N},u(!0,{x:ee,y:N});else if(p.value==="measure")S={x:ee,y:N},u(!0,{x:ee,y:N});else if(p.value==="antenna")a.addAntenna(ee,N,C),c();else if(p.value==="select"){const ie=O(ee,N);ie!==null&&(w={idx:ie,offsetX:ee-m.value[ie].x,offsetY:N-m.value[ie].y})}else if(p.value==="multiselect"){const ie=O(ee,N);ie!==null&&y.value.has(m.value[ie].id)?A={startX:ee,startY:N,antennaPositions:m.value.filter(we=>y.value.has(we.id)).map(we=>({id:we.id,x:we.x,y:we.y}))}:(a.selectionBox={start:{x:ee,y:N},end:{x:ee,y:N},active:!0},a.clearSelection())}}function se(L){if(!i.value)return;if(b.value&&E){const N=L.clientX-E.x,ie=L.clientY-E.y,we=i.value.getBoundingClientRect(),Ce=i.value.width/we.width,Me=i.value.height/we.height;r.panX=E.panX+N*Ce,r.panY=E.panY+ie*Me,f.value.complete&&r.clampPan(f.value.width,f.value.height),c();return}const{x:Y,y:ee}=r.getCanvasCoords(L);if(p.value==="perimeter"&&g.value.points.length>0&&!g.value.closed){let N=!1;if(g.value.points.length>=3){const ie=g.value.points[0];N=Math.hypot(Y-ie.x,ee-ie.y)<15}d({x:Y,y:ee},N),c()}else if(w){const N=m.value[w.idx];a.updateAntennaPosition(N.id,Y-w.offsetX,ee-w.offsetY),c()}else if(p.value==="multiselect"){if(_.value.active&&_.value.start)a.selectionBox={start:_.value.start,end:{x:Y,y:ee},active:!0},c();else if(A){const N=Y-A.startX,ie=ee-A.startY;m.value.forEach(we=>{if(y.value.has(we.id)){const Ce=A.antennaPositions.find(Me=>Me.id===we.id);Ce&&a.updateAntennaPosition(we.id,Ce.x+N,Ce.y+ie)}}),c()}}else if(p.value==="measure"&&S){const N=n.snapLine(S.x,S.y,Y,ee);u(!0,void 0,{x:N.x,y:N.y}),c()}else(p.value==="scale"||p.value==="zone")&&(u(!0,void 0,{x:Y,y:ee}),c())}function z(L){if(!i.value)return;if(b.value){b.value=!1,E=null,i.value.releasePointerCapture?.(L.pointerId);return}const{x:Y,y:ee}=r.getCanvasCoords(L);if(i.value.releasePointerCapture?.(L.pointerId),p.value==="scale")S&&a.setScaleLine(S,{x:Y,y:ee}),u(!1);else if(p.value==="zone"){if(S){const N=Y-S.x,ie=ee-S.y;a.addZone(S.x,S.y,N,ie)}u(!1)}else if(p.value==="measure"){if(S){const N=n.snapLine(S.x,S.y,Y,ee);a.addMeasure(S,{x:N.x,y:N.y})}u(!1)}else if(p.value==="multiselect"&&_.value.active&&_.value.start&&_.value.end){const N=m.value.filter(ie=>Q1(ie.x,ie.y,_.value.start,_.value.end));a.selectedAntennas=new Set(N.map(ie=>ie.id)),a.selectionBox={active:!1}}S=null,w=null,A=null,d(null,!1),c()}function oe(L){if(L.preventDefault(),!i.value)return;const Y=i.value.getBoundingClientRect(),ee=L.clientX-Y.left,N=L.clientY-Y.top,ie=L.ctrlKey;if(!L.ctrlKey&&!L.shiftKey&&f.value.complete){const Ce=i.value.width/Y.width,Me=i.value.height/Y.height,D=-L.deltaX*Ce,te=-L.deltaY*Me;r.pan(D,te,f.value.width,f.value.height),c()}else if(ie){const Ce=1-L.deltaY*.01,Me=f.value.complete?f.value.width:void 0,D=f.value.complete?f.value.height:void 0;r.zoomAt(ee,N,Ce,Me,D),c()}else{const Ce=L.deltaY<0?1.05:.95,Me=f.value.complete?f.value.width:void 0,D=f.value.complete?f.value.height:void 0;r.zoomAt(ee,N,Ce,Me,D),c()}}function q(){p.value==="perimeter"&&g.value.points.length>=3&&(a.closePerimeter(),c())}function $(L){L.code==="Space"&&!x.value&&(L.preventDefault(),x.value=!0),p.value==="multiselect"&&y.value.size>0&&(L.key==="Delete"||L.key==="Backspace"?(L.preventDefault(),a.deleteSelectedAntennas(),c()):L.key==="Escape"&&(L.preventDefault(),a.clearSelection(),c())),(L.key==="g"||L.key==="G")&&(L.preventDefault(),e.toggleGridSnap()),L.key==="0"&&(L.preventDefault(),r.resetView(),c()),(L.key==="f"||L.key==="F")&&(L.preventDefault(),f.value.complete&&(r.fitToView(f.value.width,f.value.height),c()))}function k(L){L.code==="Space"&&(L.preventDefault(),x.value=!1,b.value&&(b.value=!1,E=null))}return Ht(()=>{if(!i.value)return;r.initCanvas(i.value),h.value&&(f.value.onload=()=>{i.value&&(dh(i.value,f.value),c())},f.value.complete&&(dh(i.value,f.value),c()));const L=CE(i.value,{onPointerDown:W,onPointerMove:se,onPointerUp:z,onDblClick:q,onWheel:oe});document.addEventListener("keydown",$),document.addEventListener("keyup",k),Ao(()=>{L(),document.removeEventListener("keydown",$),document.removeEventListener("keyup",k)})}),Ao(()=>{}),(L,Y)=>(F(),Fe("main",TE,[hl(ve("div",PE,[B(v(Vx),{class:"h-24 w-24 text-muted-foreground"}),Y[1]||(Y[1]=ve("h3",{class:"text-2xl font-bold tracking-tight"},"Ready to Annotate?",-1)),Y[2]||(Y[2]=ve("p",{class:"text-sm text-muted-foreground"},"Upload a PNG, JPEG, or PDF map to get started.",-1)),B(v(cs),{for:"file-upload",class:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground shadow hover:bg-primary/90 h-10 px-4 py-2 mt-4 cursor-pointer"},{default:I(()=>[B(v(jc),{class:"w-4 h-4 mr-2"}),Y[0]||(Y[0]=qe(" Upload Map ",-1))]),_:1,__:[0]})],512),[[Fu,!v(h)]]),hl(ve("div",kE,[ve("canvas",{ref_key:"canvasRef",ref:i,style:Zn([{"max-width":"100%","max-height":"85vh",height:"auto","touch-action":"none",display:"block"},{cursor:M()}])},null,4)],512),[[Fu,v(h)]])]))}}),jg=V({__name:"Card",props:{class:{}},setup(s){const e=s;return(t,n)=>(F(),Fe("div",{"data-slot":"card",class:qt(v(rt)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e.class))},[J(t.$slots,"default")],2))}}),Ug=V({__name:"CardContent",props:{class:{}},setup(s){const e=s;return(t,n)=>(F(),Fe("div",{"data-slot":"card-content",class:qt(v(rt)("px-6",e.class))},[J(t.$slots,"default")],2))}}),Vg=V({__name:"CardDescription",props:{class:{}},setup(s){const e=s;return(t,n)=>(F(),Fe("p",{"data-slot":"card-description",class:qt(v(rt)("text-muted-foreground text-sm",e.class))},[J(t.$slots,"default")],2))}}),zg=V({__name:"CardHeader",props:{class:{}},setup(s){const e=s;return(t,n)=>(F(),Fe("div",{"data-slot":"card-header",class:qt(v(rt)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e.class))},[J(t.$slots,"default")],2))}}),Wg=V({__name:"CardTitle",props:{class:{}},setup(s){const e=s;return(t,n)=>(F(),Fe("h3",{"data-slot":"card-title",class:qt(v(rt)("leading-none font-semibold",e.class))},[J(t.$slots,"default")],2))}}),tr=V({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(s,{emit:e}){const t=s,i=KA(t,"modelValue",e,{passive:!0,defaultValue:t.defaultValue});return(r,o)=>hl((F(),Fe("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>Ue(i)?i.value=a:null),"data-slot":"input",class:qt(v(rt)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t.class))},null,2)),[[yv,v(i)]])}}),RE={class:"text-sm text-muted-foreground"},DE=V({__name:"ScaleSection",setup(s){const e=As(),{draw:t}=Vs(),n=i=>{const r=parseFloat(i.target.value);isNaN(r)||(e.setScaleMeters(r),t())};return(i,r)=>v(e).scaleLine.start&&v(e).scaleLine.end?(F(),K(v(jg),{key:0},{default:I(()=>[B(v(zg),null,{default:I(()=>[B(v(Wg),null,{default:I(()=>r[0]||(r[0]=[qe("Map Scale",-1)])),_:1,__:[0]}),B(v(Vg),null,{default:I(()=>r[1]||(r[1]=[qe("Enter the real-world length of the line you drew.",-1)])),_:1,__:[1]})]),_:1}),B(v(Ug),{class:"space-y-2"},{default:I(()=>[B(v(cs),{for:"scale-meters"},{default:I(()=>r[2]||(r[2]=[qe("Scale Line Length (meters)",-1)])),_:1,__:[2]}),B(v(tr),{id:"scale-meters",type:"number",step:"0.01","model-value":v(e).scaleLine.meters,onInput:n,placeholder:"e.g., 10"},null,8,["model-value"]),ve("p",RE," 1 px  "+nn(v(e).metersPerPx?v(e).metersPerPx.toFixed(4):"?")+" m ",1)]),_:1})]),_:1})):Wn("",!0)}}),IE=V({__name:"Accordion",props:{collapsible:{type:Boolean},disabled:{type:Boolean},dir:{},orientation:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{}},emits:["update:modelValue"],setup(s,{emit:e}){const i=Jt(s,e);return(r,o)=>(F(),K(v(Db),ye({"data-slot":"accordion"},v(i)),{default:I(()=>[J(r.$slots,"default")]),_:3},16))}}),OE=V({__name:"AccordionContent",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class");return(n,i)=>(F(),K(v(Bb),ye({"data-slot":"accordion-content"},v(t),{class:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"}),{default:I(()=>[ve("div",{class:qt(v(rt)("pt-0 pb-4",e.class))},[J(n.$slots,"default")],2)]),_:3},16))}}),LE=V({__name:"AccordionItem",props:{disabled:{type:Boolean},value:{},unmountOnHide:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class"),n=qs(t);return(i,r)=>(F(),K(v(Lb),ye({"data-slot":"accordion-item"},v(n),{class:v(rt)("border-b last:border-b-0",e.class)}),{default:I(()=>[J(i.$slots,"default")]),_:3},16,["class"]))}}),FE=V({__name:"AccordionTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(s){const e=s,t=Zt(e,"class");return(n,i)=>(F(),K(v($b),{class:"flex"},{default:I(()=>[B(v(Hb),ye({"data-slot":"accordion-trigger"},v(t),{class:v(rt)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",e.class)}),{default:I(()=>[J(n.$slots,"default"),J(n.$slots,"icon",{},()=>[B(v(Ux),{class:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})])]),_:3},16,["class"])]),_:3}))}}),BE={key:0,class:"text-sm text-muted-foreground"},NE={class:"flex items-center gap-2 flex-1 mr-4"},$E={class:"truncate"},qE={class:"space-y-1"},HE={class:"space-y-1"},jE={class:"space-y-1"},UE={class:"flex items-center space-x-2"},VE={class:"flex items-center gap-2"},zE=V({__name:"ZonesSection",setup(s){const e=As(),{draw:t}=Vs(),n=a=>{e.deleteZone(a),t()},i=a=>{a.showCoverage=!a.showCoverage,t()},r=(a,l)=>{e.changeZoneColor(a,l),t()},o=a=>{if(!e.metersPerPx){alert("Please set a scale first (draw scale line and enter meters).");return}e.populateAntennasInZone(a),t()};return(a,l)=>(F(),Fe("div",null,[l[8]||(l[8]=ve("h3",{class:"text-lg font-semibold mb-2"},"Zones",-1)),v(e).zones.length?(F(),K(v(IE),{key:1,type:"multiple",class:"w-full",collapsible:""},{default:I(()=>[(F(!0),Fe(lt,null,Sr(v(e).zones,c=>(F(),K(v(LE),{key:c.id,value:`zone-${c.id}`},{default:I(()=>[B(v(FE),null,{default:I(()=>[ve("div",NE,[ve("div",{class:"w-4 h-4 border border-gray-400 rounded-sm shrink-0",style:Zn({backgroundColor:v(fs)[c.colorIndex].fill,borderColor:v(fs)[c.colorIndex].stroke})},null,4),ve("span",$E,nn(c.label),1)]),B(v(Bt),{onClick:ta(u=>n(c.id),["stop"]),variant:"ghost",size:"icon",class:"h-7 w-7"},{default:I(()=>[B(v(Ro),{class:"w-4 h-4 text-destructive"})]),_:2},1032,["onClick"])]),_:2},1024),B(v(OE),{class:"space-y-4 pt-2"},{default:I(()=>[ve("div",qE,[B(v(cs),{for:`zone-label-${c.id}`},{default:I(()=>l[2]||(l[2]=[qe("Zone Label",-1)])),_:2,__:[2]},1032,["for"]),B(v(tr),{id:`zone-label-${c.id}`,modelValue:c.label,"onUpdate:modelValue":u=>c.label=u,onInput:l[0]||(l[0]=u=>v(t)())},null,8,["id","modelValue","onUpdate:modelValue"])]),ve("div",HE,[B(v(cs),{for:`zone-ceilingheight-${c.id}`},{default:I(()=>l[3]||(l[3]=[qe("Ceiling height (m)",-1)])),_:2,__:[3]},1032,["for"]),B(v(tr),{id:`zone-ceilingheight-${c.id}`,type:"number",step:"0.1",modelValue:c.ceilingHeight,"onUpdate:modelValue":u=>c.ceilingHeight=u,modelModifiers:{number:!0}},null,8,["id","modelValue","onUpdate:modelValue"])]),ve("div",jE,[B(v(cs),{for:`zone-shelfheight-${c.id}`},{default:I(()=>l[4]||(l[4]=[qe("Shelf height (m)",-1)])),_:2,__:[4]},1032,["for"]),B(v(tr),{id:`zone-shelfheight-${c.id}`,type:"number",step:"0.1",modelValue:c.shelfHeight,"onUpdate:modelValue":u=>c.shelfHeight=u,modelModifiers:{number:!0},onInput:l[1]||(l[1]=u=>v(t)())},null,8,["id","modelValue","onUpdate:modelValue"])]),ve("div",UE,[B(v(si),{id:`show-coverage-${c.id}`,checked:c.showCoverage,onClick:u=>i(c)},null,8,["id","checked","onClick"]),B(v(cs),{for:`show-coverage-${c.id}`,class:"text-sm font-medium leading-none"},{default:I(()=>l[5]||(l[5]=[qe(" Show coverage circles ",-1)])),_:2,__:[5]},1032,["for"])]),ve("div",VE,[B(v(cs),{class:"text-sm"},{default:I(()=>l[6]||(l[6]=[qe("Color:",-1)])),_:1,__:[6]}),B(v(Bt),{onClick:u=>r(c.id,-1),variant:"outline",size:"icon",class:"h-7 w-7"},{default:I(()=>[B(v(qx),{class:"w-4 h-4"})]),_:2},1032,["onClick"]),B(v(Bt),{onClick:u=>r(c.id,1),variant:"outline",size:"icon",class:"h-7 w-7"},{default:I(()=>[B(v(Hx),{class:"w-4 h-4"})]),_:2},1032,["onClick"])]),B(v(Bt),{onClick:u=>o(c.id),class:"w-full"},{default:I(()=>[B(v(Yp),{class:"w-4 h-4 mr-2"}),l[7]||(l[7]=qe(" Populate Antennas ",-1))]),_:2,__:[7]},1032,["onClick"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})):(F(),Fe("p",BE," Use the 'Zone' tool to draw deployment areas. "))]))}}),WE={class:"flex gap-2"},GE={key:1,class:"text-sm text-muted-foreground"},KE={key:2,class:"space-y-2"},XE={key:0,class:"text-xs text-muted-foreground whitespace-nowrap"},YE={key:1,class:"w-2 h-2 bg-yellow-500 rounded-full",title:"Selected"},JE=V({__name:"AntennasSection",setup(s){const e=wa(),t=As(),{draw:n}=Vs(),i=l=>t.zones.find(u=>u.id===l)?.label||"?",r=()=>{t.clearSelection(),n()},o=()=>{t.deleteSelectedAntennas(),n()},a=(l,c)=>{t.selectedAntennas.delete(l),t.antennas.splice(c,1),n()};return(l,c)=>(F(),Fe("div",null,[v(e).currentTool==="multiselect"&&v(t).selectedAntennas.size>0?(F(),K(v(jg),{key:0,class:"mb-4"},{default:I(()=>[B(v(zg),null,{default:I(()=>[B(v(Wg),null,{default:I(()=>c[1]||(c[1]=[qe("Selected Antennas",-1)])),_:1,__:[1]}),B(v(Vg),null,{default:I(()=>[qe(nn(v(t).selectedAntennas.size)+" antenna"+nn(v(t).selectedAntennas.size>1?"s":"")+" selected ",1)]),_:1})]),_:1}),B(v(Ug),{class:"space-y-2"},{default:I(()=>[ve("div",WE,[B(v(Bt),{onClick:r,variant:"outline",size:"sm"},{default:I(()=>c[2]||(c[2]=[qe(" Clear Selection ",-1)])),_:1,__:[2]}),B(v(Bt),{onClick:o,variant:"destructive",size:"sm"},{default:I(()=>[B(v(Ro),{class:"w-4 h-4 mr-2"}),c[3]||(c[3]=qe(" Delete Selected ",-1))]),_:1,__:[3]})]),c[4]||(c[4]=ve("p",{class:"text-xs text-muted-foreground"}," Use Delete key or drag to move selected antennas together. ",-1))]),_:1,__:[4]})]),_:1})):Wn("",!0),B(v(Mo),{class:"mb-4"}),c[5]||(c[5]=ve("h3",{class:"text-lg font-semibold mb-2"},"Antennas",-1)),v(t).antennas.length?(F(),Fe("ul",KE,[(F(!0),Fe(lt,null,Sr(v(t).antennas,(u,d)=>(F(),Fe("li",{key:u.id,class:"flex items-center gap-2 text-sm"},[B(v(tr),{modelValue:u.label,"onUpdate:modelValue":h=>u.label=h,onInput:c[0]||(c[0]=h=>v(n)()),class:"h-8 flex-1"},null,8,["modelValue","onUpdate:modelValue"]),u.zoneId?(F(),Fe("span",XE," In "+nn(i(u.zoneId)),1)):Wn("",!0),v(t).selectedAntennas.has(u.id)?(F(),Fe("div",YE)):Wn("",!0),B(v(Bt),{onClick:h=>a(u.id,d),variant:"ghost",size:"icon",class:"h-7 w-7"},{default:I(()=>[B(v(Ro),{class:"w-4 h-4 text-destructive"})]),_:2},1032,["onClick"])]))),128))])):(F(),Fe("p",GE," Use the 'Add Antenna' tool or populate a zone. "))]))}}),ZE={key:0,class:"text-sm text-muted-foreground"},QE={key:1,class:"space-y-2"},eT={class:"flex items-baseline gap-2"},tT={class:"font-medium"},nT=V({__name:"MeasurementsSection",setup(s){const e=As(),{draw:t}=Vs(),n=r=>{const o=r.end.x-r.start.x,a=r.end.y-r.start.y,l=e.metersPerPx?Math.hypot(o,a)*e.metersPerPx:null;return l?`${l.toFixed(2)} m`:"? m"},i=r=>{e.deleteMeasure(r),t()};return(r,o)=>(F(),Fe("div",null,[o[0]||(o[0]=ve("h3",{class:"text-lg font-semibold mb-2"},"Measurements",-1)),v(e).measures.length?(F(),Fe("ul",QE,[(F(!0),Fe(lt,null,Sr(v(e).measures,a=>(F(),Fe("li",{key:a.id,class:"flex items-center justify-between text-sm"},[ve("div",eT,[ve("span",tT,"M"+nn(a.id)+":",1),ve("span",null,nn(n(a)),1)]),B(v(Bt),{onClick:l=>i(a.id),variant:"ghost",size:"icon",class:"h-7 w-7"},{default:I(()=>[B(v(Ro),{class:"w-4 h-4 text-destructive"})]),_:2},1032,["onClick"])]))),128))])):(F(),Fe("p",ZE," Use the 'Measure' tool to create measurements. "))]))}}),sT={class:"flex h-full flex-col border-l bg-background p-4 gap-6 overflow-y-auto"},iT=V({__name:"PropertiesPanel",setup(s){return(e,t)=>(F(),Fe("aside",sT,[t[0]||(t[0]=ve("div",{class:"flex h-16 items-center border-b px-2"},[ve("h2",{class:"text-xl font-semibold"},"Properties")],-1)),B(DE),B(zE),B(JE),B(nT)]))}}),rT={class:"grid h-screen w-full grid-cols-[240px_1fr_380px] bg-muted/40"},oT=V({__name:"App",setup(s){return(e,t)=>(F(),K(v(Mx),{"delay-duration":100},{default:I(()=>[ve("div",rT,[B(SE),B(ME),B(iT)])]),_:1}))}});/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ii=typeof document<"u";function Gg(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function aT(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&Gg(s.default)}const Be=Object.assign;function il(s,e){const t={};for(const n in e){const i=e[n];t[n]=pn(i)?i.map(s):s(i)}return t}const nr=()=>{},pn=Array.isArray,Kg=/#/g,lT=/&/g,cT=/\//g,uT=/=/g,dT=/\?/g,Xg=/\+/g,hT=/%5B/g,fT=/%5D/g,Yg=/%5E/g,pT=/%60/g,Jg=/%7B/g,gT=/%7C/g,Zg=/%7D/g,mT=/%20/g;function lu(s){return encodeURI(""+s).replace(gT,"|").replace(hT,"[").replace(fT,"]")}function yT(s){return lu(s).replace(Jg,"{").replace(Zg,"}").replace(Yg,"^")}function ic(s){return lu(s).replace(Xg,"%2B").replace(mT,"+").replace(Kg,"%23").replace(lT,"%26").replace(pT,"`").replace(Jg,"{").replace(Zg,"}").replace(Yg,"^")}function vT(s){return ic(s).replace(uT,"%3D")}function bT(s){return lu(s).replace(Kg,"%23").replace(dT,"%3F")}function wT(s){return s==null?"":bT(s).replace(cT,"%2F")}function wr(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const _T=/\/$/,AT=s=>s.replace(_T,"");function rl(s,e,t="/"){let n,i={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),i=s(r)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=ET(n??e,t),{fullPath:n+(r&&"?")+r+o,path:n,query:i,hash:wr(o)}}function xT(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function hh(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function ST(s,e,t){const n=e.matched.length-1,i=t.matched.length-1;return n>-1&&n===i&&_i(e.matched[n],t.matched[i])&&Qg(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function _i(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function Qg(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(!CT(s[t],e[t]))return!1;return!0}function CT(s,e){return pn(s)?fh(s,e):pn(e)?fh(e,s):s===e}function fh(s,e){return pn(e)?s.length===e.length&&s.every((t,n)=>t===e[n]):s.length===1&&s[0]===e}function ET(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),n=s.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let r=t.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+n.slice(o).join("/")}const ss={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var _r;(function(s){s.pop="pop",s.push="push"})(_r||(_r={}));var sr;(function(s){s.back="back",s.forward="forward",s.unknown=""})(sr||(sr={}));function TT(s){if(!s)if(ii){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),AT(s)}const PT=/^[^#]+#/;function kT(s,e){return s.replace(PT,"#")+e}function MT(s,e){const t=document.documentElement.getBoundingClientRect(),n=s.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const xa=()=>({left:window.scrollX,top:window.scrollY});function RT(s){let e;if("el"in s){const t=s.el,n=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=MT(i,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ph(s,e){return(history.state?history.state.position-e:-1)+s}const rc=new Map;function DT(s,e){rc.set(s,e)}function IT(s){const e=rc.get(s);return rc.delete(s),e}let OT=()=>location.protocol+"//"+location.host;function em(s,e){const{pathname:t,search:n,hash:i}=e,r=s.indexOf("#");if(r>-1){let a=i.includes(s.slice(r))?s.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),hh(l,"")}return hh(t,s)+n+i}function LT(s,e,t,n){let i=[],r=[],o=null;const a=({state:h})=>{const f=em(s,location),p=t.value,g=e.value;let m=0;if(h){if(t.value=f,e.value=h,o&&o===p){o=null;return}m=g?h.position-g.position:0}else n(f);i.forEach(y=>{y(t.value,p,{delta:m,type:_r.pop,direction:m?m>0?sr.forward:sr.back:sr.unknown})})};function l(){o=t.value}function c(h){i.push(h);const f=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return r.push(f),f}function u(){const{history:h}=window;h.state&&h.replaceState(Be({},h.state,{scroll:xa()}),"")}function d(){for(const h of r)h();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function gh(s,e,t,n=!1,i=!1){return{back:s,current:e,forward:t,replaced:n,position:window.history.length,scroll:i?xa():null}}function FT(s){const{history:e,location:t}=window,n={value:em(s,t)},i={value:e.state};i.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=s.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?s:s.slice(d))+l:OT()+s+l;try{e[u?"replaceState":"pushState"](c,"",h),i.value=c}catch(f){console.error(f),t[u?"replace":"assign"](h)}}function o(l,c){const u=Be({},e.state,gh(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),n.value=l}function a(l,c){const u=Be({},i.value,e.state,{forward:l,scroll:xa()});r(u.current,u,!0);const d=Be({},gh(n.value,l,null),{position:u.position+1},c);r(l,d,!1),n.value=l}return{location:n,state:i,push:a,replace:o}}function BT(s){s=TT(s);const e=FT(s),t=LT(s,e.state,e.location,e.replace);function n(r,o=!0){o||t.pauseListeners(),history.go(r)}const i=Be({location:"",base:s,go:n,createHref:kT.bind(null,s)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function NT(s){return typeof s=="string"||s&&typeof s=="object"}function tm(s){return typeof s=="string"||typeof s=="symbol"}const nm=Symbol("");var mh;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(mh||(mh={}));function Ai(s,e){return Be(new Error,{type:s,[nm]:!0},e)}function Nn(s,e){return s instanceof Error&&nm in s&&(e==null||!!(s.type&e))}const yh="[^/]+?",$T={sensitive:!1,strict:!1,start:!0,end:!0},qT=/[.+*?^${}()[\]/\\]/g;function HT(s,e){const t=Be({},$T,e),n=[];let i=t.start?"^":"";const r=[];for(const c of s){const u=c.length?[]:[90];t.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const h=c[d];let f=40+(t.sensitive?.25:0);if(h.type===0)d||(i+="/"),i+=h.value.replace(qT,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:g,optional:m,regexp:y}=h;r.push({name:p,repeatable:g,optional:m});const _=y||yh;if(_!==yh){f+=10;try{new RegExp(`(${_})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+A.message)}}let w=g?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;d||(w=m&&c.length<2?`(?:/${w})`:"/"+w),m&&(w+="?"),i+=w,f+=20,m&&(f+=-8),g&&(f+=-20),_===".*"&&(f+=-50)}u.push(f)}n.push(u)}if(t.strict&&t.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const f=u[h]||"",p=r[h-1];d[p.name]=f&&p.repeatable?f.split("/"):f}return d}function l(c){let u="",d=!1;for(const h of s){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const f of h)if(f.type===0)u+=f.value;else if(f.type===1){const{value:p,repeatable:g,optional:m}=f,y=p in c?c[p]:"";if(pn(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=pn(y)?y.join("/"):y;if(!_)if(m)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=_}}return u||"/"}return{re:o,score:n,keys:r,parse:a,stringify:l}}function jT(s,e){let t=0;for(;t<s.length&&t<e.length;){const n=e[t]-s[t];if(n)return n;t++}return s.length<e.length?s.length===1&&s[0]===80?-1:1:s.length>e.length?e.length===1&&e[0]===80?1:-1:0}function sm(s,e){let t=0;const n=s.score,i=e.score;for(;t<n.length&&t<i.length;){const r=jT(n[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-n.length)===1){if(vh(n))return 1;if(vh(i))return-1}return i.length-n.length}function vh(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const UT={type:0,value:""},VT=/[a-zA-Z0-9_]/;function zT(s){if(!s)return[[]];if(s==="/")return[[UT]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,n=t;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<s.length;){if(l=s[a++],l==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),t=1):h();break;case 4:h(),t=n;break;case 1:l==="("?t=2:VT.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function WT(s,e,t){const n=HT(zT(s.path),t),i=Be(n,{record:s,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function GT(s,e){const t=[],n=new Map;e=Ah({strict:!1,end:!0,sensitive:!1},e);function i(d){return n.get(d)}function r(d,h,f){const p=!f,g=wh(d);g.aliasOf=f&&f.record;const m=Ah(e,d),y=[g];if("alias"in d){const A=typeof d.alias=="string"?[d.alias]:d.alias;for(const S of A)y.push(wh(Be({},g,{components:f?f.record.components:g.components,path:S,aliasOf:f?f.record:g})))}let _,w;for(const A of y){const{path:S}=A;if(h&&S[0]!=="/"){const b=h.record.path,x=b[b.length-1]==="/"?"":"/";A.path=h.record.path+(S&&x+S)}if(_=WT(A,h,m),f?f.alias.push(_):(w=w||_,w!==_&&w.alias.push(_),p&&d.name&&!_h(_)&&o(d.name)),im(_)&&l(_),g.children){const b=g.children;for(let x=0;x<b.length;x++)r(b[x],_,f&&f.children[x])}f=f||_}return w?()=>{o(w)}:nr}function o(d){if(tm(d)){const h=n.get(d);h&&(n.delete(d),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(d);h>-1&&(t.splice(h,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return t}function l(d){const h=YT(d,t);t.splice(h,0,d),d.record.name&&!_h(d)&&n.set(d.record.name,d)}function c(d,h){let f,p={},g,m;if("name"in d&&d.name){if(f=n.get(d.name),!f)throw Ai(1,{location:d});m=f.record.name,p=Be(bh(h.params,f.keys.filter(w=>!w.optional).concat(f.parent?f.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&bh(d.params,f.keys.map(w=>w.name))),g=f.stringify(p)}else if(d.path!=null)g=d.path,f=t.find(w=>w.re.test(g)),f&&(p=f.parse(g),m=f.record.name);else{if(f=h.name?n.get(h.name):t.find(w=>w.re.test(h.path)),!f)throw Ai(1,{location:d,currentLocation:h});m=f.record.name,p=Be({},h.params,d.params),g=f.stringify(p)}const y=[];let _=f;for(;_;)y.unshift(_.record),_=_.parent;return{name:m,path:g,params:p,matched:y,meta:XT(y)}}s.forEach(d=>r(d));function u(){t.length=0,n.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function bh(s,e){const t={};for(const n of e)n in s&&(t[n]=s[n]);return t}function wh(s){const e={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:KT(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function KT(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const n in s.components)e[n]=typeof t=="object"?t[n]:t;return e}function _h(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function XT(s){return s.reduce((e,t)=>Be(e,t.meta),{})}function Ah(s,e){const t={};for(const n in s)t[n]=n in e?e[n]:s[n];return t}function YT(s,e){let t=0,n=e.length;for(;t!==n;){const r=t+n>>1;sm(s,e[r])<0?n=r:t=r+1}const i=JT(s);return i&&(n=e.lastIndexOf(i,n-1)),n}function JT(s){let e=s;for(;e=e.parent;)if(im(e)&&sm(s,e)===0)return e}function im({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function ZT(s){const e={};if(s===""||s==="?")return e;const n=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<n.length;++i){const r=n[i].replace(Xg," "),o=r.indexOf("="),a=wr(o<0?r:r.slice(0,o)),l=o<0?null:wr(r.slice(o+1));if(a in e){let c=e[a];pn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function xh(s){let e="";for(let t in s){const n=s[t];if(t=vT(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(pn(n)?n.map(r=>r&&ic(r)):[n&&ic(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function QT(s){const e={};for(const t in s){const n=s[t];n!==void 0&&(e[t]=pn(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const eP=Symbol(""),Sh=Symbol(""),cu=Symbol(""),rm=Symbol(""),oc=Symbol("");function qi(){let s=[];function e(n){return s.push(n),()=>{const i=s.indexOf(n);i>-1&&s.splice(i,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function ls(s,e,t,n,i,r=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(Ai(4,{from:t,to:e})):h instanceof Error?l(h):NT(h)?l(Ai(2,{from:e,to:h})):(o&&n.enterCallbacks[i]===o&&typeof h=="function"&&o.push(h),a())},u=r(()=>s.call(n&&n.instances[i],e,t,c));let d=Promise.resolve(u);s.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function ol(s,e,t,n,i=r=>r()){const r=[];for(const o of s)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Gg(l)){const u=(l.__vccOpts||l)[e];u&&r.push(ls(u,t,n,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=aT(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&ls(f,t,n,o,a,i)()}))}}return r}function Ch(s){const e=Gt(cu),t=Gt(rm),n=G(()=>{const l=v(s.to);return e.resolve(l)}),i=G(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(_i.bind(null,u));if(h>-1)return h;const f=Eh(l[c-2]);return c>1&&Eh(u)===f&&d[d.length-1].path!==f?d.findIndex(_i.bind(null,l[c-2])):h}),r=G(()=>i.value>-1&&rP(t.params,n.value.params)),o=G(()=>i.value>-1&&i.value===t.matched.length-1&&Qg(t.params,n.value.params));function a(l={}){if(iP(l)){const c=e[v(s.replace)?"replace":"push"](v(s.to)).catch(nr);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:G(()=>n.value.href),isActive:r,isExactActive:o,navigate:a}}function tP(s){return s.length===1?s[0]:s}const nP=V({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ch,setup(s,{slots:e}){const t=dt(Ch(s)),{options:n}=Gt(cu),i=G(()=>({[Th(s.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[Th(s.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&tP(e.default(t));return s.custom?r:Kt("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}}),sP=nP;function iP(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function rP(s,e){for(const t in e){const n=e[t],i=s[t];if(typeof n=="string"){if(n!==i)return!1}else if(!pn(i)||i.length!==n.length||n.some((r,o)=>r!==i[o]))return!1}return!0}function Eh(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Th=(s,e,t)=>s??e??t,oP=V({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const n=Gt(oc),i=G(()=>s.route||n.value),r=Gt(Sh,0),o=G(()=>{let c=v(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=G(()=>i.value.matched[o.value]);di(Sh,G(()=>o.value+1)),di(eP,a),di(oc,i);const l=Q();return He(()=>[l.value,a.value,s.name],([c,u,d],[h,f,p])=>{u&&(u.instances[d]=c,f&&f!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!_i(u,f)||!h)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,u=s.name,d=a.value,h=d&&d.components[u];if(!h)return Ph(t.default,{Component:h,route:c});const f=d.props[u],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=Kt(h,Be({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return Ph(t.default,{Component:m,route:c})||m}}});function Ph(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const aP=oP;function lP(s){const e=GT(s.routes,s),t=s.parseQuery||ZT,n=s.stringifyQuery||xh,i=s.history,r=qi(),o=qi(),a=qi(),l=cn(ss);let c=ss;ii&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=il.bind(null,D=>""+D),d=il.bind(null,wT),h=il.bind(null,wr);function f(D,te){let Z,ce;return tm(D)?(Z=e.getRecordMatcher(D),ce=te):ce=D,e.addRoute(ce,Z)}function p(D){const te=e.getRecordMatcher(D);te&&e.removeRoute(te)}function g(){return e.getRoutes().map(D=>D.record)}function m(D){return!!e.getRecordMatcher(D)}function y(D,te){if(te=Be({},te||l.value),typeof D=="string"){const R=rl(t,D,te.path),H=e.resolve({path:R.path},te),U=i.createHref(R.fullPath);return Be(R,H,{params:h(H.params),hash:wr(R.hash),redirectedFrom:void 0,href:U})}let Z;if(D.path!=null)Z=Be({},D,{path:rl(t,D.path,te.path).path});else{const R=Be({},D.params);for(const H in R)R[H]==null&&delete R[H];Z=Be({},D,{params:d(R)}),te.params=d(te.params)}const ce=e.resolve(Z,te),Re=D.hash||"";ce.params=u(h(ce.params));const T=xT(n,Be({},D,{hash:yT(Re),path:ce.path})),P=i.createHref(T);return Be({fullPath:T,hash:Re,query:n===xh?QT(D.query):D.query||{}},ce,{redirectedFrom:void 0,href:P})}function _(D){return typeof D=="string"?rl(t,D,l.value.path):Be({},D)}function w(D,te){if(c!==D)return Ai(8,{from:te,to:D})}function A(D){return x(D)}function S(D){return A(Be(_(D),{replace:!0}))}function b(D){const te=D.matched[D.matched.length-1];if(te&&te.redirect){const{redirect:Z}=te;let ce=typeof Z=="function"?Z(D):Z;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=_(ce):{path:ce},ce.params={}),Be({query:D.query,hash:D.hash,params:ce.path!=null?{}:D.params},ce)}}function x(D,te){const Z=c=y(D),ce=l.value,Re=D.state,T=D.force,P=D.replace===!0,R=b(Z);if(R)return x(Be(_(R),{state:typeof R=="object"?Be({},Re,R.state):Re,force:T,replace:P}),te||Z);const H=Z;H.redirectedFrom=te;let U;return!T&&ST(n,ce,Z)&&(U=Ai(16,{to:H,from:ce}),ee(ce,ce,!0,!1)),(U?Promise.resolve(U):M(H,ce)).catch(j=>Nn(j)?Nn(j,2)?j:Y(j):k(j,H,ce)).then(j=>{if(j){if(Nn(j,2))return x(Be({replace:P},_(j.to),{state:typeof j.to=="object"?Be({},Re,j.to.state):Re,force:T}),te||H)}else j=W(H,ce,!0,P,Re);return O(H,ce,j),j})}function E(D,te){const Z=w(D,te);return Z?Promise.reject(Z):Promise.resolve()}function C(D){const te=we.values().next().value;return te&&typeof te.runWithContext=="function"?te.runWithContext(D):D()}function M(D,te){let Z;const[ce,Re,T]=cP(D,te);Z=ol(ce.reverse(),"beforeRouteLeave",D,te);for(const R of ce)R.leaveGuards.forEach(H=>{Z.push(ls(H,D,te))});const P=E.bind(null,D,te);return Z.push(P),Me(Z).then(()=>{Z=[];for(const R of r.list())Z.push(ls(R,D,te));return Z.push(P),Me(Z)}).then(()=>{Z=ol(Re,"beforeRouteUpdate",D,te);for(const R of Re)R.updateGuards.forEach(H=>{Z.push(ls(H,D,te))});return Z.push(P),Me(Z)}).then(()=>{Z=[];for(const R of T)if(R.beforeEnter)if(pn(R.beforeEnter))for(const H of R.beforeEnter)Z.push(ls(H,D,te));else Z.push(ls(R.beforeEnter,D,te));return Z.push(P),Me(Z)}).then(()=>(D.matched.forEach(R=>R.enterCallbacks={}),Z=ol(T,"beforeRouteEnter",D,te,C),Z.push(P),Me(Z))).then(()=>{Z=[];for(const R of o.list())Z.push(ls(R,D,te));return Z.push(P),Me(Z)}).catch(R=>Nn(R,8)?R:Promise.reject(R))}function O(D,te,Z){a.list().forEach(ce=>C(()=>ce(D,te,Z)))}function W(D,te,Z,ce,Re){const T=w(D,te);if(T)return T;const P=te===ss,R=ii?history.state:{};Z&&(ce||P?i.replace(D.fullPath,Be({scroll:P&&R&&R.scroll},Re)):i.push(D.fullPath,Re)),l.value=D,ee(D,te,Z,P),Y()}let se;function z(){se||(se=i.listen((D,te,Z)=>{if(!Ce.listening)return;const ce=y(D),Re=b(ce);if(Re){x(Be(Re,{replace:!0,force:!0}),ce).catch(nr);return}c=ce;const T=l.value;ii&&DT(ph(T.fullPath,Z.delta),xa()),M(ce,T).catch(P=>Nn(P,12)?P:Nn(P,2)?(x(Be(_(P.to),{force:!0}),ce).then(R=>{Nn(R,20)&&!Z.delta&&Z.type===_r.pop&&i.go(-1,!1)}).catch(nr),Promise.reject()):(Z.delta&&i.go(-Z.delta,!1),k(P,ce,T))).then(P=>{P=P||W(ce,T,!1),P&&(Z.delta&&!Nn(P,8)?i.go(-Z.delta,!1):Z.type===_r.pop&&Nn(P,20)&&i.go(-1,!1)),O(ce,T,P)}).catch(nr)}))}let oe=qi(),q=qi(),$;function k(D,te,Z){Y(D);const ce=q.list();return ce.length?ce.forEach(Re=>Re(D,te,Z)):console.error(D),Promise.reject(D)}function L(){return $&&l.value!==ss?Promise.resolve():new Promise((D,te)=>{oe.add([D,te])})}function Y(D){return $||($=!D,z(),oe.list().forEach(([te,Z])=>D?Z(D):te()),oe.reset()),D}function ee(D,te,Z,ce){const{scrollBehavior:Re}=s;if(!ii||!Re)return Promise.resolve();const T=!Z&&IT(ph(D.fullPath,0))||(ce||!Z)&&history.state&&history.state.scroll||null;return st().then(()=>Re(D,te,T)).then(P=>P&&RT(P)).catch(P=>k(P,D,te))}const N=D=>i.go(D);let ie;const we=new Set,Ce={currentRoute:l,listening:!0,addRoute:f,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:g,resolve:y,options:s,push:A,replace:S,go:N,back:()=>N(-1),forward:()=>N(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:q.add,isReady:L,install(D){const te=this;D.component("RouterLink",sP),D.component("RouterView",aP),D.config.globalProperties.$router=te,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>v(l)}),ii&&!ie&&l.value===ss&&(ie=!0,A(i.location).catch(Re=>{}));const Z={};for(const Re in ss)Object.defineProperty(Z,Re,{get:()=>l.value[Re],enumerable:!0});D.provide(cu,te),D.provide(rm,Qh(Z)),D.provide(oc,l);const ce=D.unmount;we.add(D),D.unmount=function(){we.delete(D),we.size<1&&(c=ss,se&&se(),se=null,l.value=ss,ie=!1,$=!1),ce()}}};function Me(D){return D.reduce((te,Z)=>te.then(()=>C(Z)),Promise.resolve())}return Ce}function cP(s,e){const t=[],n=[],i=[],r=Math.max(e.matched.length,s.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(s.matched.find(c=>_i(c,a))?n.push(a):t.push(a));const l=s.matched[o];l&&(e.matched.find(c=>_i(c,l))||i.push(l))}return[t,n,i]}const uP=lP({history:BT("/jrtech-infra-annotator/"),routes:[]}),uu=xv(oT);uu.use(Ev());uu.use(uP);uu.mount("#app");
